<!DOCTYPE html>
<html>
<head>
<!-- 2016-07-30 六 23:06 -->
<meta  charset="utf-8">
<meta  name="viewport" content="width=device-width, initial-scale=1">
<title>PyQt5入门（第二版）</title>
<meta  name="generator" content="Org-mode">
<meta  name="author" content="万泽">
<meta  name="description" content="制作者邮箱：a358003542@gmail.com"
>
<style type="text/css">
body {
    margin-right: auto;
    margin-left: auto;
}

.title {
    display: block;
    text-align: center;
    padding: 10px;
}

.center-block {
    display: block;
    margin-left: auto;
    margin-right: auto;
}

.underline{
    text-decoration: underline;
}
   html, body {
    margin: 0;
    padding: 0;
    font-family:"Microsoft YaHei",Arial,Helvetica,sans-serif,"宋体";
    font-size: 1em;
}

#content {
    display: block;
    margin-left: auto;
    margin-right: auto;
    background:#fcfcfc;
    height:100%;
    margin-left:300px;
    max-width:800px;
    min-height:100%;
    padding:1.618em 3.236em;
}

code {
    padding: 2px 4px;
    color: #c7254e;
    background-color: #f9f2f4;
    border-radius: 4px;
}

pre {
    max-width: 100%;
    display: block;
    padding: 9.5px;
    margin: 0 0 10px;
    font-size: 13px;
    line-height: 1.42857143;
    color: #333;
    background-color: #f5f5f5;
    border: 1px solid #ccc;
    border-radius: 4px;
    overflow : auto;
}


blockquote {
    padding: 10px 20px;
    margin: 0 0 20px;
    font-size: 17.5px;
    border-left: 5px solid #eee;
}

li{
    margin-top: 0.5em;
    margin-bottom: 0.5em;
}

p{
    text-indent:2em;
    line-height:150%;
}

/* dl */
dl {
    margin-top: 0;
    margin-bottom: 20px;
}
dt {
    font-weight: 700;
    line-height: 150%;
    margin-top: 0.5em;
    margin-bottom: 0.5em;
}
dd {
    line-height: 150%;
}

@media (min-width: 768px) {
  dt {
    white-space: nowrap;
  }
}

video{
    max-width: 100%;
    margin-left: auto;
    margin-right: auto;
}

figure p{
    text-indent:0em;
}
img{
    max-width: 100%;
}

embed{
    max-width: 100%;
    margin-left: auto;
    margin-right: auto;
}

figure{
    text-align: center;
}

/*  class  */
.FRAMED{
    max-width:100%;
    border:1px solid ;
    padding: 1em;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

.NOTECARD{
    width: 35%;
    position:relative;
    right: -30%;
    padding: 1em;
    margin:0 auto;
    border: solid 1px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

/*
table
*/
table {
    border-collapse: collapse;
    border-spacing: 0;
    margin: 16px 0;
    empty-cells: show;
    border: 1px solid #ccc;
    width: 100%;
    display: table;
}

table tr {
    border-bottom: 1px solid #ddd;
}
table th,table td{
    padding:8px;
}

table tr:nth-child(even) {
    background-color: #f1f1f1;
}








ul,ol,dl{
    line-height:24px;
    list-style-image:none;
    /* list-style:none; */
    margin:0px 0px 24px 0px;
    padding:0;
}

li{
    margin-left: 24px;
}

dd{
    margin:0;
}

#content .section ul,#content .toctree-wrapper ul,article ul{
    list-style:disc;
    line-height:24px;
    margin-bottom:24px}

#content .section ul li,#content .toctree-wrapper ul li,article ul li{
    list-style:disc;
    margin-left:24px}

#content .section ul li p:last-child,#content .toctree-wrapper ul li p:last-child,article ul li p:last-child{
                                                                                                                                  margin-bottom:0}

#content .section ul li ul,#content .toctree-wrapper ul li ul,article ul li ul{
    margin-bottom:0}

#content .section ul li li,#content .toctree-wrapper ul li li,article ul li li{
    list-style:circle}

#content .section ul li li li,#content .toctree-wrapper ul li li li,article ul li li li{
    list-style:square}

#content .section ul li ol li,#content .toctree-wrapper ul li ol li,article ul li ol li{
    list-style:decimal}

#content .section ol,#content ol,article ol{
    list-style:decimal;
    line-height:24px;
    margin-bottom:24px}

#content .section ol li,#content ol li,article ol li{
    list-style:decimal;
    margin-left:24px}

#content .section ol li p:last-child,#content ol li p:last-child,article ol li p:last-child{
                                                                                                                           margin-bottom:0}

#content .section ol li ul,#content ol li ul,article ol li ul{
    margin-bottom:0}

#content .section ol li ul li,#content ol li ul li,article ol li ul li{
    list-style:disc}

dl dt{
    font-weight:bold;
}

dl p,dl table,dl ul,dl ol{
    margin-bottom:12px !important;
}

dl dd{
    margin:0 0 12px 24px;
}

@media print{
    .codeblock,pre.src{
        white-space:pre.src-wrap}
}

@media print{
    html,body,section{
        background:none !important}

    *{
        box-shadow:none !important;
        text-shadow:none !important;
        filter:none !important;
        -ms-filter:none !important}

    a,a:visited{
          text-decoration:underline}

    pre.src,blockquote{
        page-break-inside:avoid}

    thead{
        display:table-header-group}

    tr,img{
        page-break-inside:avoid}

    img{
        max-width:100% !important}

    @page{
        margin:0.5cm}

    p,h2,h3{
        orphans:3;
        widows:3}

    h2,h3{
        page-break-after:avoid}
}

@media print{
    #postamble{
        display:none}

    #content{
        margin-left:0}
}

@media print{
    #table-of-contents{
        display:none}

    @page{
        size: auto;
        margin: 25mm 25mm 25mm 25mm;}

    body {
        margin: 0px;}
}

@media screen and (max-width: 768px){
}

@media only screen and (max-width: 480px){
}

@media screen and (max-width: 768px){
    .tablet-hide{
        display:none}
}

@media screen and (max-width: 480px){
    .mobile-hide{
        display:none}
}

@media screen and (max-width: 480px){
}

@media screen and (max-width: 768px){
    #content{
        margin-left:0;
        padding: 1em 1em;}

    #content #content{
        padding:1.618em}

    #content.shift{
        position:fixed;
        min-width:100%;
        left:85%;
        top:0;
        height:100%;
        overflow:hidden}
}

@media screen and (min-width: 1400px){
    #content{
        background:rgba(0,0,0,0.05)}

    #content{
        background:#fcfcfc}
}

@media screen and (max-width: 768px){
    #copyright{
        width:85%;
        display:none}

    #copyright.shift{
        display:block}

    img{
        width:100%;
        height:auto}
}

@media screen and (max-width: 480px){
    #content .sidebar{
        width:100%}
}


.figure p{
    color:#000;
    font:italic 85%/1 arial,sans-serif;
    padding:1em 0;
}

.rotate-90{
    -webkit-transform:rotate(90deg);
    -moz-transform:rotate(90deg);
    -ms-transform:rotate(90deg);
    -o-transform:rotate(90deg);
    transform:rotate(90deg);
}

.rotate-270{
    -webkit-transform:rotate(270deg);
    -moz-transform:rotate(270deg);
    -ms-transform:rotate(270deg);
    -o-transform:rotate(270deg);
    transform:rotate(270deg);
}

#toggle-sidebar,
#table-of-contents .close-sidebar {
    display: none;
}

@media screen and (max-width: 768px) {
    #table-of-contents {
        display: none;
        width: 60%;
    }

    #table-of-contents h2 a {
        display: block;
    }

    #table-of-contents:target {
        display: block;
    }

    #copyright, #postamble {
        display: none;
    }

    #toggle-sidebar {
        background-color: #2980B9;
        display: block;
        margin-bottom: 1.6em;
        padding: 0.6em;
        text-align: center;
    }

    #toggle-sidebar h2 {
        color: white;
        font-size: 100%;
        line-height: 50px;
        margin: 0;
        padding: 0;
    }

    #table-of-contents .close-sidebar {
       color: rgba(255, 255, 255, 0.3);
       display: inline-block;
       margin: 0px 10px 0px 45px;
       padding: 10px;
    }
}

*{
    -webkit-box-sizing:border-box;
    -moz-box-sizing:border-box;
    box-sizing:border-box;
}

figcaption,figure,footer,header,hgroup,nav{
    display:block}

ins{
    background:#ff9;
    color:#000;
    text-decoration:none}

mark{
    background:#ff0;
    color:#000;
    font-style:italic;
    font-weight:bold}

small{
    font-size:85%}

sub,sup{
    font-size:75%;
    line-height:0;
    position:relative;
    vertical-align:baseline}

sup{
    top:-0.5em}

sub{
    bottom:-0.25em}

img{
    -ms-interpolation-mode:bicubic;
    vertical-align:middle;
    max-width:100%}

svg:not(:root){
    overflow:hidden}

figure{
    margin:0}

label{
    cursor:pointer}

legend{
    border:0;
    margin-left:-7px;
    padding:0;
    white-space:normal}

#content .danger,#content .error{
    background:#fdf3f2}

legend{
    display:block;
    width:100%;
    border:0;
    padding:0;
    white-space:normal;
    margin-bottom:24px;
    font-size:150%;
    *margin-left:-7px}

label{
    display:block;
    margin:0 0 0.3125em 0;
    color:#333;
    font-size:90%}

a{
    color:#2980B9;
    text-decoration:none;
    cursor:pointer}


a:hover,a:active{
    outline:0;
}

a:hover{
    color:#3091d1}

a:visited{
    color:#9B59B6}

.left{
    text-align:left}

.center{
    text-align:center}

.right{
    text-align:right}

hr{
    display:block;
    height:1px;
    border:0;
    border-top:1px solid #e1e4e5;
    margin:24px 0;
    padding:0}

#table-of-contents li{
    list-style:none;
    margin-left: 0px;
}

#table-of-contents header{
    height:32px;
    display:inline-block;
    line-height:32px;
    padding:0 1.618em;
    display:block;
    font-weight:bold;
    text-transform:uppercase;
    font-size:80%;
    color:#2980B9;
    white-space:nowrap}

#table-of-contents ul{
    margin-bottom:0}

#table-of-contents li.divide-top{
    border-top:solid 1px #404040}

#table-of-contents li.divide-bottom{
    border-bottom:solid 1px #404040}

#table-of-contents li.current{
    background:#e3e3e3}

#table-of-contents li.current a{
    color:gray;
    border-right:solid 1px #c9c9c9;
    padding:0.4045em 2.427em}

#table-of-contents li.current a:hover{
    background:#d6d6d6}

#table-of-contents li a{
    /* color:#404040; */
    padding:0.4045em 1.618em;
    position:relative;
    /* background:#fcfcfc; */
    border:none;
    /* border-bottom:solid 1px #c9c9c9; */
    /* border-top:solid 1px #c9c9c9; */
    padding-left:1.618em -4px}

#table-of-contents li.on a:hover,#table-of-contents li.current>a:hover{
    background:#fcfcfc}

#table-of-contents li ul li a{
    /* background:#c9c9c9; */
    padding:0.4045em 2.427em}

#table-of-contents li ul li ul li a{
    padding:0.4045em 3.236em}

#table-of-contents li.current ul{
    display:block}

/* #table-of-contents li ul{ */
/*     margin-bottom:0; */
/*     display:none} */

#table-of-contents .local-toc li ul{
    display:block}

#table-of-contents li ul li a{
    margin-bottom:0;
    color:#b3b3b3;
    font-weight:normal}

#table-of-contents a{
    display:inline-block;
    line-height:18px;
    padding:0.4045em 1.618em;
    display:block;
    position:relative;
    font-size:90%;
    color:#b3b3b3;
    direction: ltr;
}

#table-of-contents a:hover{
    background-color:#4e4a4a;
    cursor:pointer}

/* #text-table-of-contents { */
/*     overflow:scroll; */
/* } */

#table-of-contents{
    position:fixed;
    top:0;
    left:0;
    width:300px;
    overflow-x:hidden;
    overflow-y:scroll;
    height:100%;
    background:#343131;
    z-index:200;
    scrollbar-base-color: #1F1D1D;
    scrollbar-arrow-color: #b3b3b3;
    scrollbar-shadow-color: #1F1D1D;
    scrollbar-track-color : #343131;
}

#table-of-contents h2{
    z-index:200;
    background-color:#2980B9;
    text-align:center;
    padding:0.809em;
    display:block;
    color:#fcfcfc;
    font-size: 100%;
    margin-bottom:0.809em}

ul.nav li ul li {
    display: none;
}

ul.nav li ul li ul li {
    display: none;
}

ul.nav li.active ul li {
    display: inline;
}

ul.nav li.active ul li ul li {
    display: inline;
}

ul.nav li.active ul li a {
    background-color: #E3E3E3;
    color: #8099B0;
    border-right:solid 1px #c9c9c9 !important;
}

ul.nav li.active ul li.active a {
    background-color: #C9C9C9;
    color: black !important;
    font-weight: bold !important;
}

ul.nav li.active ul li.active ul li.active a {
    color: black !important;
    font-weight: bold !important;
    display: block !important;
}

ul.nav li.active ul li.active ul li a {
    color: #808080 !important;
    font-weight: normal !important;
    display: block !important;
}

ul.nav li.active ul li ul li a {
    display: none !important;
}


ul.nav li ul li ul li ul li {
    display: none !important; /* as long as nav is on multiple levels of ul */
    /* display: none; /* as long as nav is on multiple levels of ul *\/ */
}

ul.nav li.active > a {
    border-bottom:solid 1px #c9c9c9 !important; /* XXX Restrict it to 2nd level */
    border-right:solid 1px #c9c9c9 !important;
}

ul.nav li.active a {
    color: gray !important;
    font-weight:bold;
    background-color: white;
    border-right:solid 0px white !important;
}

ul.nav > li.active > a {
    color: black !important;
}

footer{
    color:#999}

footer p{
    margin-bottom:12px}

#copyright, #postamble{
    position:fixed;
    bottom:0;
    left:0;
    width:300px;
    color:#fcfcfc;
    background:#1f1d1d;
    border-top:solid 10px #343131;
    font-family:"Lato","proxima-nova","Helvetica Neue",Arial,sans-serif;
    font-size: 90%;
    z-index:400;
    padding:12px;
}

#postamble .author {
    font-size: 100%;
    margin-bottom: 0px;
}

#postamble .date {
    font-size: 90%;
    margin-bottom: 0px;
    color: #27AE60;
}

#postamble .creator,#postamble .validation {
    display:none;
}

#copyright a{
    color:#2980B9;
    text-decoration:none}

#copyright .rst-current-version{
    padding:12px;
    background-color:#272525;
    display:block;
    text-align:right;
    font-size:90%;
    cursor:pointer;
    color:#27AE60;
    *zoom:1}

#content img{
    max-width:100%;
    height:auto !important}

#content div.figure{
    margin-bottom:24px}

#content div.figure.align-center{
    text-align:center}

#content .section>img,#content .section>a>img{
    margin-bottom:24px}

.verse{
    border-left:5px solid #6AB0DE;
    background-color: #E7F2FA;
    padding: 6px 20px;
    font-style:italic;
}

#content .note .last,#content .attention .last,#content .caution .last,#content .danger .last,#content .error .last,#content .hint .last,#content .important .last,#content .tip .last,#content .warning .last,#content .seealso .last,#content .admonitiontodo .last{
    margin-bottom:0}

#content .admonition-title:before{
    margin-right:4px}

#content .section ol p,#content .section ul p{
    margin-bottom:12px}

#content h1 .headerlink,#content h2 .headerlink,#content h3 .headerlink,#content h4 .headerlink,#content h5 .headerlink,#content h6 .headerlink,#content dl dt .headerlink{
    display:none;
    visibility:hidden;
    font-size:14px}

#content h1 .headerlink:after,#content h2 .headerlink:after,#content h3 .headerlink:after,#content h4 .headerlink:after,#content h5 .headerlink:after,#content h6 .headerlink:after,#content dl dt .headerlink:after{
    visibility:visible;
    content:"";
    font-family:FontAwesome;
    display:inline-block}

#content h1:hover .headerlink,#content h2:hover .headerlink,#content h3:hover .headerlink,#content h4:hover .headerlink,#content h5:hover .headerlink,#content h6:hover .headerlink,#content dl dt:hover .headerlink{
    display:inline-block}

#content .sidebar{
    float:right;
    width:40%;
    display:block;
    margin:0 0 24px 24px;
    padding:24px;
    background:#f3f6f6;
    border:solid 1px #e1e4e5}

#content .sidebar p,#content .sidebar ul,#content .sidebar dl{
    font-size:90%}

#content .sidebar .last{
    margin-bottom:0}

#content .sidebar .sidebar-title{
    display:block;
    font-family:"Roboto Slab","ff-tisa-web-pro","Georgia",Arial,sans-serif;
    font-weight:bold;
    background:#e1e4e5;
    padding:6px 12px;
    margin:-24px;
    margin-bottom:24px;
    font-size:100%}

#content .footnote-reference,#content .citation-reference{
    vertical-align:super;
    font-size:90%}

span[id*='MathJax-Span']{
    color:#404040}

.math{
    text-align:center}

#footnotes{
    border-top:1px solid #e1e4e5;
    padding-top: 36px;
}

h2.footnotes{
    display:none;
}


.footnum:before, .footref:before{
    content:"[";
}

.footnum:after, .footref:after{
    content:"]";
}

.footpara {
    color: #999;
    font-size: 90%;
    font-family:"Lato","proxima-nova","Helvetica Neue",Arial,sans-serif;
    padding-bottom: 8px;
    padding-left: 16px;
    padding-right: 16px;
    padding-top: 8px;
    line-height: 1.25em;
    /* display: inline; */
}
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #8f5902; font-style: italic } /* Comment */
.highlight .err { color: #a40000; border: 1px solid #ef2929 } /* Error */
.highlight .g { color: #000000 } /* Generic */
.highlight .k { color: #204a87; font-weight: bold } /* Keyword */
.highlight .l { color: #000000 } /* Literal */
.highlight .n { color: #000000 } /* Name */
.highlight .o { color: #ce5c00; font-weight: bold } /* Operator */
.highlight .x { color: #000000 } /* Other */
.highlight .p { color: #000000; font-weight: bold } /* Punctuation */
.highlight .ch { color: #8f5902; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #8f5902; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #8f5902; font-style: italic } /* Comment.Preproc */
.highlight .cpf { color: #8f5902; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #8f5902; font-style: italic } /* Comment.Single */
.highlight .cs { color: #8f5902; font-style: italic } /* Comment.Special */
.highlight .gd { color: #a40000 } /* Generic.Deleted */
.highlight .ge { color: #000000; font-style: italic } /* Generic.Emph */
.highlight .gr { color: #ef2929 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #000000; font-style: italic } /* Generic.Output */
.highlight .gp { color: #8f5902 } /* Generic.Prompt */
.highlight .gs { color: #000000; font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #a40000; font-weight: bold } /* Generic.Traceback */
.highlight .kc { color: #204a87; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #204a87; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #204a87; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #204a87; font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: #204a87; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #204a87; font-weight: bold } /* Keyword.Type */
.highlight .ld { color: #000000 } /* Literal.Date */
.highlight .m { color: #0000cf; font-weight: bold } /* Literal.Number */
.highlight .s { color: #4e9a06 } /* Literal.String */
.highlight .na { color: #c4a000 } /* Name.Attribute */
.highlight .nb { color: #204a87 } /* Name.Builtin */
.highlight .nc { color: #000000 } /* Name.Class */
.highlight .no { color: #000000 } /* Name.Constant */
.highlight .nd { color: #5c35cc; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #ce5c00 } /* Name.Entity */
.highlight .ne { color: #cc0000; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #000000 } /* Name.Function */
.highlight .nl { color: #f57900 } /* Name.Label */
.highlight .nn { color: #000000 } /* Name.Namespace */
.highlight .nx { color: #000000 } /* Name.Other */
.highlight .py { color: #000000 } /* Name.Property */
.highlight .nt { color: #204a87; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #000000 } /* Name.Variable */
.highlight .ow { color: #204a87; font-weight: bold } /* Operator.Word */
.highlight .w { color: #f8f8f8; text-decoration: underline } /* Text.Whitespace */
.highlight .mb { color: #0000cf; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #0000cf; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #0000cf; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000cf; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #0000cf; font-weight: bold } /* Literal.Number.Oct */
.highlight .sb { color: #4e9a06 } /* Literal.String.Backtick */
.highlight .sc { color: #4e9a06 } /* Literal.String.Char */
.highlight .sd { color: #8f5902; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #4e9a06 } /* Literal.String.Double */
.highlight .se { color: #4e9a06 } /* Literal.String.Escape */
.highlight .sh { color: #4e9a06 } /* Literal.String.Heredoc */
.highlight .si { color: #4e9a06 } /* Literal.String.Interpol */
.highlight .sx { color: #4e9a06 } /* Literal.String.Other */
.highlight .sr { color: #4e9a06 } /* Literal.String.Regex */
.highlight .s1 { color: #4e9a06 } /* Literal.String.Single */
.highlight .ss { color: #4e9a06 } /* Literal.String.Symbol */
.highlight .bp { color: #3465a4 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #000000 } /* Name.Variable.Class */
.highlight .vg { color: #000000 } /* Name.Variable.Global */
.highlight .vi { color: #000000 } /* Name.Variable.Instance */
.highlight .il { color: #0000cf; font-weight: bold } /* Literal.Number.Integer.Long */
</style>

<script type="text/javascript" src="http://orgmode.org/org-info.js">
/**
 *
 * @source: http://orgmode.org/org-info.js
 *
 * @licstart  The following is the entire license notice for the
 *  JavaScript code in http://orgmode.org/org-info.js.
 *
 * Copyright (C) 2012-2013 Free Software Foundation, Inc.
 *
 *
 * The JavaScript code in this tag is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in http://orgmode.org/org-info.js.
 *
 */
</script>

<script type="text/javascript">

/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/

<!--/*--><![CDATA[/*><!--*/
org_html_manager.set("TOC_DEPTH", "6");
org_html_manager.set("LINK_HOME", "");
org_html_manager.set("LINK_UP", "");
org_html_manager.set("LOCAL_TOC", "1");
org_html_manager.set("VIEW_BUTTONS", "0");
org_html_manager.set("MOUSE_HINT", "underline");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "0");
org_html_manager.set("VIEW", "showall");
org_html_manager.setup();  // activate after the parameters are set
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<header>
<h1 class="title">PyQt5入门（第二版）</h1>
</header><nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline5">1. 前言</a>
<ul>
<li><a href="#orgheadline1">1.1. 第二版声明</a></li>
<li><a href="#orgheadline4">1.2. 安装和配置</a>
<ul>
<li><a href="#orgheadline2">1.2.1. 安装pyqt5</a></li>
<li><a href="#orgheadline3">1.2.2. 安装pyqt4</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgheadline18">2. beginning</a>
<ul>
<li><a href="#orgheadline6">2.1. 窗口</a></li>
<li><a href="#orgheadline7">2.2. 加上图标</a></li>
<li><a href="#orgheadline8">2.3. 弹出提示信息</a></li>
<li><a href="#orgheadline9">2.4. 关闭窗体时询问</a></li>
<li><a href="#orgheadline10">2.5. 屏幕居中显示窗体</a></li>
<li><a href="#orgheadline11">2.6. QMainWindow类</a></li>
<li><a href="#orgheadline12">2.7. 加上状态栏</a></li>
<li><a href="#orgheadline13">2.8. 加上菜单栏</a></li>
<li><a href="#orgheadline14">2.9. 信号－槽机制</a></li>
<li><a href="#orgheadline17">2.10. 如何查阅资料</a>
<ul>
<li><a href="#orgheadline15">2.10.1. 查看pydoc</a></li>
<li><a href="#orgheadline16">2.10.2. 相关网络资源</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgheadline23">3. 信号－槽详解</a>
<ul>
<li><a href="#orgheadline19">3.1. 自定义信号</a></li>
<li><a href="#orgheadline20">3.2. 自定义槽</a></li>
<li><a href="#orgheadline21">3.3. 发射信号</a></li>
<li><a href="#orgheadline22">3.4. 信号－槽机制的反思</a></li>
</ul>
</li>
<li><a href="#orgheadline24">4. 使用Qt designer</a></li>
<li><a href="#orgheadline26">5. 资源文件管理</a>
<ul>
<li><a href="#orgheadline25">5.1. 资源管理</a></li>
</ul>
</li>
<li><a href="#orgheadline33">6. 配置文件管理</a>
<ul>
<li><a href="#orgheadline27">6.1. QSettings构造函数</a></li>
<li><a href="#orgheadline30">6.2. IniFormat</a>
<ul>
<li><a href="#orgheadline28">6.2.1. ini文件存放DIY</a></li>
<li><a href="#orgheadline29">6.2.2. ini文件注意事项</a></li>
</ul>
</li>
<li><a href="#orgheadline31">6.3. 存值和读值</a></li>
<li><a href="#orgheadline32">6.4. 群组管理</a></li>
</ul>
</li>
<li><a href="#orgheadline38">7. 布局管理</a>
<ul>
<li><a href="#orgheadline34">7.1. QBoxLayout</a></li>
<li><a href="#orgheadline35">7.2. addStretch方法</a></li>
<li><a href="#orgheadline36">7.3. QGridLayout</a></li>
<li><a href="#orgheadline37">7.4. QFormLayout</a></li>
</ul>
</li>
<li><a href="#orgheadline42">8. 快捷键和Tab键管理</a>
<ul>
<li><a href="#orgheadline39">8.1. 什么是伙伴关系</a></li>
<li><a href="#orgheadline40">8.2. 快捷键</a></li>
<li><a href="#orgheadline41">8.3. QKeySequence</a></li>
</ul>
</li>
<li><a href="#orgheadline45">9. 国际化支持</a>
<ul>
<li><a href="#orgheadline43">9.1. 使用翻译文件</a></li>
<li><a href="#orgheadline44">9.2. 使用qt官方翻译文件</a></li>
</ul>
</li>
<li><a href="#orgheadline50">10. 附录</a>
<ul>
<li><a href="#orgheadline46">10.1. PyQt4和PyQt5的区别整理</a></li>
<li><a href="#orgheadline47">10.2. 引用信号发射对象</a></li>
<li><a href="#orgheadline48">10.3. 菜单栏看不见？</a></li>
<li><a href="#orgheadline49">10.4. 参考资料</a></li>
</ul>
</li>
</ul>
</div>
</nav>



<div class="outline-2">
<h2 id="orgheadline5">前言</h2>
<div class="outline-text-2" id="text-1">
</div><div class="outline-3">
<h3 id="orgheadline1">第二版声明</h3>
<div class="outline-text-3" id="text-1-1">
<p>
随着作者编程水平的上升，对很多内容都有了不同的理解。本文进行了进一步的重新修改，推出第二版。
</p>

<p>
本文的例子都是基于PyQt5。如果读者需要使用PyQt4，请参看附录后面的 PyQt4和PyQt5的区别整理 一小节。
</p>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline4">安装和配置</h3>
<div class="outline-text-3" id="text-1-2">
</div><div class="outline-4">
<h4 id="orgheadline2">安装pyqt5</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
就ubuntu下安装pyqt5是很简单的，如下所示：
</p>
<div class="highlight"><pre><span></span>sudo apt-get install python3-pyqt5
</pre></div>
<p>
如果你使用的是默认的python3版本的话，否则你可能需要手工编译pyqt5。
</p>

<p>
其中安装Qt5不需要我们多费心，请确保下面几个软件包安装上去了（参考了 <a href="http://askubuntu.com/questions/508503/whats-the-development-package-for-qt5-in-14-04">这个网页</a> 和 <a href="http://askubuntu.com/questions/609238/error-pyqt5-requires-qt-v5-0-or-later">这个网页</a> ）:
</p>
<pre>
sudo apt-get install qt5-default
sudo apt-get install qtbase5-dev
sudo apt-get install qtdeclarative5-dev
</pre>

<p>
上面的第三个可能并不需要安装，其中第一个 <code>qt5-default</code> 和qmake的v5版本有关，然后 <code>qtbase5-dev</code> 肯定是需要安装的。不管怎么说，确保这些都装上吧。
</p>

<p>
然后再在 <a href="https://www.riverbankcomputing.com/news">PyQt的官网</a> 下载 <code>SIP</code> 的源码，运行 <code>python3 configure.py</code> 输出makefile，后面就是大家熟悉的 <code>make</code> , <code>sudo make install</code> 。
</p>

<p>
继续再下载 <code>PyQt5</code> 的源码，安装步骤同上，这里就不赘述了。
</p>


<p>
在后面我们会提到 <code>pyuic5</code> 和 <code>pyrcc5</code> 命令，其在下面这个软件包里面: 
</p>
<div class="highlight"><pre><span></span>sudo apt-get install pyqt5-dev-tools
</pre></div>

<p>
检查pyqt5安装情况执行以下脚本即可，显示的是当前安装的pyqt5的版本号:
</p>
<pre>
&gt;&gt;&gt; from PyQt5.QtCore import QT_VERSION_STR
&gt;&gt;&gt; print(QT_VERSION_STR)
5.2.1
</pre>

<p>
本文的代码都是PyQt版本号都是上面的，没有特别的理由，会一直维持在这个版本号里面了。
</p>
</div>
</div>

<div class="outline-4">
<h4 id="orgheadline3">安装pyqt4</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
安装pyqt4大致过程类似上面，只是一些细节上的改动了，比如:
</p>

<p>
ubuntu下安装pyqt4即：
</p>
<div class="highlight"><pre><span></span>sudo apt-get install python3-pyqt4
</pre></div>


<p>
如果你需要使用qt designer来辅助设计GUI，你还需要额外安装qt designer软件和pyuic4和pyrcc4命令。（顺便再次提醒下pyrcc4对中文目录目前支持有问题（201410）） 
</p>
<div class="highlight"><pre><span></span>sudo apt-get install pyqt4-dev-tools qt4-designer
</pre></div>


<p>
检查pyqt4安装情况执行以下脚本即可，显示的是当前安装的pyqt4的版本号:
</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyQt4.QtCore</span> <span class="kn">import</span> <span class="n">QT_VERSION_STR</span>
<span class="k">print</span><span class="p">(</span><span class="n">QT_VERSION_STR</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>



<div class="outline-2">
<h2 id="orgheadline18">beginning</h2>
<div class="outline-text-2" id="text-2">
</div><div class="outline-3">
<h3 id="orgheadline6">窗口</h3>
<div class="outline-text-3" id="text-2-1">
<p>
请看到下面的代码：
</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtGui</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">MyWidget</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">800</span><span class="p">,</span> <span class="mi">600</span><span class="p">)</span>
        <span class="c1">#坐标0 0 大小800 600</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s1">&#39;myapp&#39;</span><span class="p">)</span>

<span class="n">myapp</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="n">mywidget</span> <span class="o">=</span> <span class="n">MyWidget</span><span class="p">()</span>
<span class="n">mywidget</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">myapp</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</pre></div>

<p>
首先导入sys宏包，这是为了后面接受sys.argv参数。关于引入这里值得一提的是: 很多pyqt4原放在QtGui里面的一些QWidget在pyqt5里面都放入QtWidgets里面去了。
</p>

<p>
接下来我们定义了MyWidget类，它继承自QWidget类。然后通过QWidget类的 <code>setGeometry</code> 方法来调整窗口的左顶点的坐标位置和窗口的大小。
</p>

<p>
然后通过 <code>setWindowTitle</code> 方法来设置这个窗口程序的标题，这里就简单设置为"myapp"了。
</p>

<p>
任何窗口程序都需要创建一个QApplication类的实例，这里是myapp。然后接下来创建QWidget类的实例mywidget，然后通过调用mywidget的方法 <code>show</code> 来显示窗体。
</p>

<p>
最后我们看到系统要退出是调用的myapp实例的 <code>exec_</code> 方法。
</p>
</div>
</div>


<div class="outline-3">
<h3 id="orgheadline7">加上图标</h3>
<div class="outline-text-3" id="text-2-2">
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtGui</span> <span class="kn">import</span> <span class="n">QIcon</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QWidget</span><span class="p">,</span> <span class="n">QApplication</span>

<span class="k">class</span> <span class="nc">MyWidget</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span><span class="mi">600</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s1">&#39;myapp&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowIcon</span><span class="p">(</span><span class="n">QIcon</span>\
        <span class="p">(</span><span class="s1">&#39;icons/myapp.ico&#39;</span><span class="p">))</span>

<span class="n">myapp</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="n">mywidget</span> <span class="o">=</span> <span class="n">MyWidget</span><span class="p">()</span>
<span class="n">mywidget</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">myapp</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</pre></div>

<p>
这个程序相对上面的程序就增加了一个 <code>setWindowIcon</code> 方法，这个方法调用了 <code>QtGui.QIcon</code> 方法，然后后面跟的就是图标的存放路径，使用相对路径。在运行这个例子的时候，请随便弄个图标文件过来。
</p>

<p>
为了简单起见这个程序就使用了QWidget类的 <code>resize</code> 方法来设置窗体的大小。
</p>
</div>
</div>


<div class="outline-3">
<h3 id="orgheadline8">弹出提示信息</h3>
<div class="outline-text-3" id="text-2-3">
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtGui</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">MyWidget</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span><span class="mi">600</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s1">&#39;myapp&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowIcon</span><span class="p">(</span><span class="n">QIcon</span>\
        <span class="p">(</span><span class="s1">&#39;icons/myapp.ico&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s1">&#39;看什么看^_^&#39;</span><span class="p">)</span>
        <span class="n">QToolTip</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">QFont</span>\
        <span class="p">(</span><span class="s1">&#39;微软雅黑&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>

<span class="n">myapp</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="n">mywidget</span> <span class="o">=</span> <span class="n">MyWidget</span><span class="p">()</span>
<span class="n">mywidget</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">myapp</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</pre></div>
<p>
上面这段代码和前面的代码的不同就在于MyWidget类的初始函数新加入了两条命令。其中 <code>setToolTip</code> 方法设置具体显示的弹出的提示文本内容，然后后面调用QToolTip类的 <code>setFont</code> 方法来设置字体和字号，我不太清楚这里随便设置系统的字体微软雅黑是不是有效。
</p>

<p>
这样你的鼠标停放在窗口上一会儿会弹出一小段提示文字。
</p>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline9">关闭窗体时询问</h3>
<div class="outline-text-3" id="text-2-4">
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtGui</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">MyWidget</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span><span class="mi">600</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s1">&#39;myapp&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowIcon</span><span class="p">(</span><span class="n">QIcon</span>\
        <span class="p">(</span><span class="s1">&#39;icons/myapp.ico&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s1">&#39;看什么看^_^&#39;</span><span class="p">)</span>
        <span class="n">QToolTip</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">QFont</span>\
        <span class="p">(</span><span class="s1">&#39;微软雅黑&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">closeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="c1">#重新定义colseEvent</span>
        <span class="n">reply</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span>\
        <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;信息&#39;</span><span class="p">,</span>
            <span class="s2">&quot;你确定要退出吗？&quot;</span><span class="p">,</span>
             <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">,</span>
             <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">reply</span> <span class="o">==</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">ignore</span><span class="p">()</span>

<span class="n">myapp</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="n">mywidget</span> <span class="o">=</span> <span class="n">MyWidget</span><span class="p">()</span>
<span class="n">mywidget</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">myapp</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</pre></div>

<p>
这段代码和前面代码的不同就是重新定义了 <code>colseEvent</code> 事件。这段代码的核心就是QtGui类的QMessageBox类的question方法，这个方法将会弹出一个询问窗体。这个方法接受四个参数：第一个参数是这个窗体所属的母体，这里就是self也就是实例mywidget；第二个参数是弹出窗体的标题；第三个参数是一个标准button；第四个参数也是一个标准button，是默认（也就是按enter直接选定的）的button。然后这个方法返回的是那个被点击了的标准button的标识符，所以后面和标准 <code>QMessageBox.Yes</code>
 比较了，然后执行event的accept方法。
</p>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline10">屏幕居中显示窗体</h3>
<div class="outline-text-3" id="text-2-5">
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtGui</span>  <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">MyWidget</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span><span class="mi">600</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s1">&#39;myapp&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowIcon</span><span class="p">(</span><span class="n">QIcon</span>\
        <span class="p">(</span><span class="s1">&#39;icons/myapp.ico&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s1">&#39;看什么看^_^&#39;</span><span class="p">)</span>
        <span class="n">QToolTip</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">QFont</span>\
        <span class="p">(</span><span class="s1">&#39;微软雅黑&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">closeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="c1">#重新定义colseEvent</span>
        <span class="n">reply</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span>\
        <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;信息&#39;</span><span class="p">,</span>
            <span class="s2">&quot;你确定要退出吗？&quot;</span><span class="p">,</span>
             <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">,</span>
             <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">reply</span> <span class="o">==</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">ignore</span><span class="p">()</span>
     <span class="c1">#center method</span>
    <span class="k">def</span> <span class="nf">center</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">screen</span> <span class="o">=</span> <span class="n">QDesktopWidget</span><span class="p">()</span><span class="o">.</span><span class="n">screenGeometry</span><span class="p">()</span>
        <span class="n">size</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">move</span><span class="p">((</span><span class="n">screen</span><span class="o">.</span><span class="n">width</span><span class="p">()</span><span class="o">-</span><span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">())</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>\
         <span class="p">(</span><span class="n">screen</span><span class="o">.</span><span class="n">height</span><span class="p">()</span><span class="o">-</span><span class="n">size</span><span class="o">.</span><span class="n">height</span><span class="p">())</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>

<span class="n">myapp</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="n">mywidget</span> <span class="o">=</span> <span class="n">MyWidget</span><span class="p">()</span>
<span class="n">mywidget</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">myapp</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</pre></div>
<p>
这个例子和前面相比改动是新建了一个 <code>center</code> 方法，接受一个实例，这里是mywidget。然后对这个实例也就是窗口的具体位置做一些调整。
</p>

<p>
QDesktopWidget类的 <code>screenGeometry</code> 方法返回一个量，这个量的width属性就是屏幕的宽度（按照pt像素计，比如1366×768，宽度就是1366），这个量的height属性就是屏幕的高度。
</p>

<p>
然后QWidget类的 <code>geometry</code> 方法同样返回一个量，这个量的width是这个窗体的宽度，这个量的height属性是这个窗体的高度。
</p>

<p>
然后调用QWidget类的move方法，这里是对mywidget这个实例作用。我们可以看到move方法的X，Y是从屏幕的坐标原点 (0,0) 开始计算的。第一个参数X表示向右移动了多少宽度，Y表示向下移动了多少高度。
</p>

<p>
整个函数的作用效果就是将这个窗体居中显示。
</p>
</div>
</div>


<div class="outline-3">
<h3 id="orgheadline11">QMainWindow类</h3>
<div class="outline-text-3" id="text-2-6">
<p>
QtGui.QMainWindow类提供应用程序主窗口，可以创建一个经典的拥有状态栏、工具栏和菜单栏的应用程序骨架。（之前使用的是QWidget类，现在换成QMainWindow类。）
</p>

<p>
前面第一个例子都是用的QtGui.QWidget类创建的一个窗体。关于QWidget和QMainWindow这两个类的区别 <a href="http://stackoverflow.com/questions/3298792/whats-the-difference-between-qmainwindow-and-qwidget-and-qdialog">根据这个网站</a> 得出的结论是：QWdget类在Qt中是所有可画类的基础（这里的意思可能是窗体的基础吧。） 任何基于QWidget的类都可以作为独立窗体而显示出来而不需要母体（parent）。
</p>

<p>
QMainWindow类是针对主窗体一般需求而设计的，它预定义了菜单栏状态栏和其他widget（窗口小部件） 。因为它继承自QWidget，所以前面谈及的一些属性修改都适用于它。那么首先我们将之前的代码中的QWidget类换成QMainWindow类。
</p>

<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtGui</span>  <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">MyWidget</span><span class="p">(</span><span class="n">QMainWindow</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span><span class="mi">600</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s1">&#39;myapp&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowIcon</span><span class="p">(</span><span class="n">QIcon</span>\
        <span class="p">(</span><span class="s1">&#39;icons/myapp.ico&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s1">&#39;看什么看^_^&#39;</span><span class="p">)</span>
        <span class="n">QToolTip</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">QFont</span>\
        <span class="p">(</span><span class="s1">&#39;微软雅黑&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">closeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="c1">#重新定义colseEvent</span>
        <span class="n">reply</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span>\
        <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;信息&#39;</span><span class="p">,</span>
            <span class="s2">&quot;你确定要退出吗？&quot;</span><span class="p">,</span>
             <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">,</span>
             <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">reply</span> <span class="o">==</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">ignore</span><span class="p">()</span>
     <span class="c1">#center method</span>
    <span class="k">def</span> <span class="nf">center</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">screen</span> <span class="o">=</span> <span class="n">QDesktopWidget</span><span class="p">()</span><span class="o">.</span><span class="n">screenGeometry</span><span class="p">()</span>
        <span class="n">size</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">move</span><span class="p">((</span><span class="n">screen</span><span class="o">.</span><span class="n">width</span><span class="p">()</span><span class="o">-</span><span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">())</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>\
         <span class="p">(</span><span class="n">screen</span><span class="o">.</span><span class="n">height</span><span class="p">()</span><span class="o">-</span><span class="n">size</span><span class="o">.</span><span class="n">height</span><span class="p">())</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>

<span class="n">myapp</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="n">mywidget</span> <span class="o">=</span> <span class="n">MyWidget</span><span class="p">()</span>
<span class="n">mywidget</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">myapp</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</pre></div>

<p>
现在程序运行情况良好，我们继续加点东西进去。
</p>
</div>
</div>


<div class="outline-3">
<h3 id="orgheadline12">加上状态栏</h3>
<div class="outline-text-3" id="text-2-7">
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtGui</span>  <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">MainWindow</span><span class="p">(</span><span class="n">QMainWindow</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span><span class="mi">600</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s1">&#39;myapp&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowIcon</span><span class="p">(</span><span class="n">QIcon</span>\
        <span class="p">(</span><span class="s1">&#39;icons/myapp.ico&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s1">&#39;看什么看^_^&#39;</span><span class="p">)</span>
        <span class="n">QToolTip</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">QFont</span>\
        <span class="p">(</span><span class="s1">&#39;微软雅黑&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">closeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="c1">#重新定义colseEvent</span>
        <span class="n">reply</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span>\
        <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;信息&#39;</span><span class="p">,</span>
            <span class="s2">&quot;你确定要退出吗？&quot;</span><span class="p">,</span>
             <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">,</span>
             <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">reply</span> <span class="o">==</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">ignore</span><span class="p">()</span>
     <span class="c1">#center method</span>
    <span class="k">def</span> <span class="nf">center</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">screen</span> <span class="o">=</span> <span class="n">QDesktopWidget</span><span class="p">()</span><span class="o">.</span><span class="n">screenGeometry</span><span class="p">()</span>
        <span class="n">size</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">move</span><span class="p">((</span><span class="n">screen</span><span class="o">.</span><span class="n">width</span><span class="p">()</span><span class="o">-</span><span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">())</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>\
         <span class="p">(</span><span class="n">screen</span><span class="o">.</span><span class="n">height</span><span class="p">()</span><span class="o">-</span><span class="n">size</span><span class="o">.</span><span class="n">height</span><span class="p">())</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>

<span class="n">myapp</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="n">mainwindow</span> <span class="o">=</span> <span class="n">MainWindow</span><span class="p">()</span>
<span class="n">mainwindow</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">mainwindow</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;程序已就绪...&#39;</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">myapp</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</pre></div>

<p>
这个程序和前面的区别在于最后倒数第二行，调用mainwindow这个QMainWindow类生成的实例的 <code>statusBar</code> 方法生成一个QStatusBar对象，然后调用QStatusBar类的 <code>showMessage</code> 方法来显示一段文字。
</p>

<p>
如果你希望这段代码在 <code>__init__</code> 方法里面，那么具体实现过程也与上面描述的类似。
</p>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline13">加上菜单栏</h3>
<div class="outline-text-3" id="text-2-8">
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">PyQt5.QtGui</span>  <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">MainWindow</span><span class="p">(</span><span class="n">QMainWindow</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initUI</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">initUI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span><span class="mi">600</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s1">&#39;myapp&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowIcon</span><span class="p">(</span><span class="n">QIcon</span>\
        <span class="p">(</span><span class="s1">&#39;icons/myapp.ico&#39;</span><span class="p">))</span>
    <span class="c1">#菜单栏</span>
        <span class="n">menu_control</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">menuBar</span><span class="p">()</span><span class="o">.</span><span class="n">addMenu</span><span class="p">(</span><span class="s1">&#39;Contorl&#39;</span><span class="p">)</span>
        <span class="n">act_quit</span> <span class="o">=</span> <span class="n">menu_control</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="s1">&#39;quit&#39;</span><span class="p">)</span>
        <span class="n">act_quit</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>

        <span class="n">menu_help</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">menuBar</span><span class="p">()</span><span class="o">.</span><span class="n">addMenu</span><span class="p">(</span><span class="s1">&#39;Help&#39;</span><span class="p">)</span>
        <span class="n">act_about</span> <span class="o">=</span> <span class="n">menu_help</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="s1">&#39;about...&#39;</span><span class="p">)</span>
        <span class="n">act_about</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">about</span><span class="p">)</span>
        <span class="n">act_aboutqt</span> <span class="o">=</span> <span class="n">menu_help</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="s1">&#39;aboutqt&#39;</span><span class="p">)</span>
        <span class="n">act_aboutqt</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aboutqt</span><span class="p">)</span>


    <span class="c1">#状态栏</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;程序已就绪...&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">about</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">QMessageBox</span><span class="o">.</span><span class="n">about</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s2">&quot;about this software&quot;</span><span class="p">,</span><span class="s2">&quot;wise system&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">aboutqt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">QMessageBox</span><span class="o">.</span><span class="n">aboutQt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">closeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="c1">#重新定义colseEvent</span>
        <span class="n">reply</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span>\
        <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;信息&#39;</span><span class="p">,</span>
            <span class="s2">&quot;你确定要退出吗？&quot;</span><span class="p">,</span>
             <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">,</span>
             <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">reply</span> <span class="o">==</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">ignore</span><span class="p">()</span>
     <span class="c1">#center method</span>
    <span class="k">def</span> <span class="nf">center</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">screen</span> <span class="o">=</span> <span class="n">QDesktopWidget</span><span class="p">()</span><span class="o">.</span><span class="n">screenGeometry</span><span class="p">()</span>
        <span class="n">size</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">move</span><span class="p">((</span><span class="n">screen</span><span class="o">.</span><span class="n">width</span><span class="p">()</span><span class="o">-</span><span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">())</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>\
         <span class="p">(</span><span class="n">screen</span><span class="o">.</span><span class="n">height</span><span class="p">()</span><span class="o">-</span><span class="n">size</span><span class="o">.</span><span class="n">height</span><span class="p">())</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>

<span class="n">myapp</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="n">mainwindow</span> <span class="o">=</span> <span class="n">MainWindow</span><span class="p">()</span>
<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">myapp</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</pre></div>
<p>
和上面讨论加上状态栏类似，这里用QMainWindow类的 <code>menuBar</code> 方法来获得一个菜单栏对象。然后用这个菜单栏对象的 <code>addMenu</code> 方法来创建一个新的菜单对象（QMenu类），addMenu方法里面的内容是新建菜单要显示的文本。
</p>

<p>
然后继续给之前的菜单对象加上动作，调用菜单对象的 <code>addAction</code> 方法，我们看到menuBar创建了一个菜单栏对象，然后使用addMenu方法创建了一个菜单，同时返回的是一个菜单对象，然后对这个菜单对象使用addAction方法，这个方法给菜单添加了一个动作，或者说一个item一个内容，然后addAction返回的是一个动作对象，然后对这个动作对象进行信号－槽机制连接，将其和一个函数连接起来了。
</p>

<p>
在这里这个动作对象，就是菜单的下拉选项，如果我们用鼠标点击一下的话，将会触发 <code>triggered</code> 信号，如果我们connect方法连接到某个槽上（或者某个你定义的函数），那么将会触发这个函数的执行。下面就信号－槽机制详细说明之。
</p>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline14">信号－槽机制</h3>
<div class="outline-text-3" id="text-2-9">
<p>
GUI程序一般都引入一种事件和信号机制，well，简单来说就是一个循环程序，这个循环程序等到某个时刻程序会自动做某些事情比如刷新程序界面啊，或者扫描键盘鼠标之类的，等用户点击鼠标或者按了键盘之后，它会接受这个信号然后做出相应的反应。
</p>

<p>
所以你一定猜到了， <code>close</code> 函数可能就是要退出这个循环程序。我们调用主程序的 <code>exec_</code> 方法，就是开启这个循环程序。
</p>

<p>
pyqt4的旧的信号－槽连接语句我在这里忽略了，在这里值得提醒的是pyqt5已经不支持旧的信号－槽连接语句了。下面就新的语句说明之。
</p>

<div class="highlight"><pre><span></span><span class="n">act_exit</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
</pre></div>

<p>
我们看到新的信号－槽机制语句变得更精简更易懂了。整个过程就是如我前面所述，某个对象发出了某个信号，然后用connect将这个信号和某个槽（或者你定义的某个函数）连接起来即形成了一个反射弧了。
</p>


<p>
这里的槽就是self主窗口实例的close方法，这个是主窗口自带的函数。
</p>

<p>
然后我们看到aboutqt和about函数。具体读者如果不懂请翻阅QMessageBox类的静态方法 <code>about</code> 和 <code>aboutqt</code> 。
</p>
</div>
</div>






<div class="outline-3">
<h3 id="orgheadline17">如何查阅资料</h3>
<div class="outline-text-3" id="text-2-10">
</div><div class="outline-4">
<h4 id="orgheadline15">查看pydoc</h4>
<div class="outline-text-4" id="text-2-10-1">
<p>
如果要看python3的所有模块用help函数之后生成的信息，使用如下命令打开网页查看。
</p>

<pre>
pydoc3  -b
</pre>


<p>
如果要看python2的信息：
</p>
<pre>
pydoc  -p 1234
</pre>

<p>
这里-p 后面跟的是你的localhost的端口号，只要不被使用就行。
</p>
</div>
</div>


<div class="outline-4">
<h4 id="orgheadline16">相关网络资源</h4>
<div class="outline-text-4" id="text-2-10-2">
<p>
请参看本文最下面的参考资料部分。
</p>
</div>
</div>
</div>
</div>



<div class="outline-2">
<h2 id="orgheadline23">信号－槽详解</h2>
<div class="outline-text-2" id="text-3">
<p>
考虑到pyqt5只支持新式信号－槽机制了，这里将新式信号－槽机制详细说明，由于新式信号－槽机制在pyqt4上也能正常运行，所以新来的程序员推荐都用新式信号－槽机制。下面只介绍新式的信号－槽机制。
</p>

<p>
信号(singal)可以连接无数多个槽(slot)，或者没有连接槽也没有问题，信号也可以连接其他的信号。正如前面所述，连接的基本语句形式如下： <code>who.singal.connect(slot)</code> 。比如说按钮最常见的内置信号 <code>triggered</code> ，而槽实际上就是某个函数，比如主窗体的 <code>self.close</code> 方法。
</p>

<p>
信号就是 <code>QObject</code> 的一个属性，pyqt的窗体有很多内置信号，你也可以定义自己的信号，这个后面再提及。信号还没和槽连接起来就只是一个属性，只有通过 <code>connect</code> 方法连接起来，信号－槽机制就建立起来了。类似的信号还有 <code>disconnect</code> 方法和 <code>emit</code> 方法。disconnect就是断开信号－槽机制，而emit就是激活那个信号。
</p>

<p>
pyqt很多内置信号和内置槽将GUI的事件驱动细节给隐藏了，如果你自己定义自己的信号或者槽可能对who.singal.connect(slot)这样简洁的形式如何完成工作的感到困惑。这里先简要地介绍一下。
</p>

<p>
信号都是类的一个属性，新的信号必须继承自QObject，然后由 <code>PyQt5.QtCore.pyqtSingal</code> （在pyqt4下是PyQt4.QtCore.pyqtSingal。）方法创建，这个方法接受的参数中最重要的是types类型，比如int，bool之类的，你可以认为这是信号传递的参数类型，但实际传递这些参数值的是emit方法。然后槽实际上就是经过特殊封装的函数，这些函数当然需要接受一些参数或者不接受参数，而这些参数具体的值传进来的是由emit方法执行的，然后我们通过who.singal.connect(slot)这样的形式将某个信号和某个槽连接起来，who的信号，然后信号类自带的连接方法，然后连接到slot某个函数上，在这里隐藏的一个重要细节就是emit方法，比如说你定义一个新的信号，需要将点击屏幕的具体x,y坐标发送出去，内置的信号－槽将这一机制都完成了，如果你自己定义的信号和槽的话，比如 <code>pyqtSingal(int,int)</code> ，发送给func(x,y)，具体x和y的值你需要通过emit(x,y)来发送。至于什么时候发送，已经发送的x,y值的获取，这应该又是另外一个信号－槽机制的细节。
</p>

<p>
请看下面这个例子：
</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QHBoxLayout</span><span class="p">,</span><span class="n">QSlider</span><span class="p">,</span><span class="n">QSpinBox</span><span class="p">,</span><span class="n">QApplication</span><span class="p">,</span><span class="n">QWidget</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">Qt</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="n">window</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
<span class="n">window</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;enter your age&quot;</span><span class="p">)</span>
<span class="n">spinBox</span> <span class="o">=</span> <span class="n">QSpinBox</span><span class="p">()</span>
<span class="n">slider</span> <span class="o">=</span> <span class="n">QSlider</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Horizontal</span><span class="p">)</span>
<span class="n">spinBox</span><span class="o">.</span><span class="n">setRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">130</span><span class="p">)</span>
<span class="n">slider</span><span class="o">.</span><span class="n">setRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">130</span><span class="p">)</span>

<span class="n">spinBox</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">slider</span><span class="o">.</span><span class="n">setValue</span><span class="p">)</span>
<span class="n">slider</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">spinBox</span><span class="o">.</span><span class="n">setValue</span><span class="p">)</span>

<span class="n">spinBox</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">35</span><span class="p">)</span>

<span class="n">layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
<span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">spinBox</span><span class="p">)</span>
<span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">slider</span><span class="p">)</span>


<span class="n">window</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
<span class="n">window</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</pre></div>

<p>
第16行将spinBox的 <code>valueChanged</code> 信号和slider的 <code>setValue</code> 槽连接起来了，其中QSpinBox内置的 <code>valueChanged</code> 信号发射自带的一个参数就是改变后的值，这个值传递给了QSlider的内置槽 <code>setValue</code> ，从而将slider的值设置为新值。第17行如果slider的值发生了改变，那么会发送valueChanged信号，然后又传递给了spinBox，并执行了内置槽setValue，由于此时的值即为原值，这样spinBox内的值就没有发生改变了，如此程序不会陷入死循环。
</p>
</div>


<div class="outline-3">
<h3 id="orgheadline19">自定义信号</h3>
<div class="outline-text-3" id="text-3-1">
<p>
正如前所述及自定义信号由PyQt5.QtCore.pyqtSingal（在pyqt4下是PyQt4.QtCore.pyqtSingal。）方法创建，具体格式如下：
</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">QObject</span><span class="p">,</span> <span class="n">pyqtSignal</span>

<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">QObject</span><span class="p">):</span>
    <span class="n">closed</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="n">range_changed</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;rangeChanged&#39;</span><span class="p">)</span>
</pre></div>

<p>
上面Foo类里面自定义了一个新的信号，它必须是GObject的子类。然后定义了一个closed信号，没有接受任何参数。下面是range_changed信号，接受了一个int和一个int类型，然后这个信号的名字是rangeChanged，name选项是一个可选项，如果不填那么信号的名字就是range_changed。
</p>

<p>
信号还可以overload，不过似乎不太适合python。
</p>

<p>
注意信号必须定义为类的属性，同时必须是GObject的子类。
</p>
</div>
</div>


<div class="outline-3">
<h3 id="orgheadline20">自定义槽</h3>
<div class="outline-text-3" id="text-3-2">
<p>
按照python格式自己定义的函数就是所谓的自定义槽了。不过推荐用pyqt的槽装饰器来定义槽。
</p>

<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyQt4.QtCore</span> <span class="kn">import</span>  <span class="n">pyqtSlot</span>
    <span class="c1">#1</span>
    <span class="nd">@pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="c1">#2</span>
    <span class="nd">@pyqtSlot</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="c1">#3</span>
    <span class="nd">@pyqtSlot</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg1</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="c1">#4</span>
    <span class="nd">@pyqtSlot</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg1</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="c1">#5</span>
    <span class="nd">@pyqtSlot</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">QObject</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg1</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>

<p>
上面的第一个例子定义了名叫foo的一个槽，然后不接受任何参数。第二个槽接受一个int类型的值和str类型的值。第三个槽名字叫做bar，接受一个int类型的值，第四个槽接受一个int类型的值，然后返回的是一个int类型的值，第五个操作接受一个int类型的值和一个GObject类型的值，此处应该暗指其他pyqt窗体类型都可以作为参数进行传递。
</p>

<div class="highlight"><pre><span></span><span class="nd">@pyqtSlot</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="nd">@pyqtSlot</span><span class="p">(</span><span class="s1">&#39;QString&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">valueChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>

<p>
这里定义了两个槽，名字都叫做valueChanged，一个接受int类型，一个接受QString类型，同前面信号的overload一样，在python中不推荐这么使用，还是明晰一点比较好。
</p>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline21">发射信号</h3>
<div class="outline-text-3" id="text-3-3">
<p>
信号对象有emit方法用来发射信号，然后信号对象还有disconnect方法断开某个信号和槽的连接。
</p>

<p>
一个信号可以连接多个槽，多个信号可以连接同一个槽，一个信号可以与另外一个信号相连接。
</p>

<p>
下面通过一个例子详解自建信号还有自建槽并建立发射机制的情况。
</p>

<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QDialog</span><span class="p">,</span><span class="n">QLabel</span><span class="p">,</span><span class="n">QLineEdit</span><span class="p">,</span><span class="n">QCheckBox</span><span class="p">,</span><span class="n">QPushButton</span><span class="p">,</span><span class="n">QHBoxLayout</span><span class="p">,</span><span class="n">QVBoxLayout</span><span class="p">,</span><span class="n">QApplication</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span>  <span class="n">Qt</span> <span class="p">,</span><span class="n">pyqtSignal</span><span class="p">,</span><span class="n">QObject</span><span class="p">,</span><span class="n">pyqtSlot</span>


<span class="k">class</span> <span class="nc">FindDialog</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="n">findNext</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">Qt</span><span class="o">.</span><span class="n">CaseSensitivity</span><span class="p">)</span>
    <span class="n">findPrevious</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">Qt</span><span class="o">.</span><span class="n">CaseSensitivity</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Find &amp;what:&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineEdit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="n">label</span><span class="o">.</span><span class="n">setBuddy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lineEdit</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">caseCheckBox</span><span class="o">=</span><span class="n">QCheckBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Match &amp;case&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">backwardCheckBox</span><span class="o">=</span><span class="n">QCheckBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Search &amp;backward&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">findButton</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;&amp;Find&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">findButton</span><span class="o">.</span><span class="n">setDefault</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">findButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">closeButton</span><span class="o">=</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Close&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">lineEdit</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">enableFindButton</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">findButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">findClicked</span><span class="p">)</span>
        <span class="n">closeButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>

        <span class="n">topLeftLayout</span><span class="o">=</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">topLeftLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="n">topLeftLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lineEdit</span><span class="p">)</span>
        <span class="n">leftLayout</span><span class="o">=</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">leftLayout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">topLeftLayout</span><span class="p">)</span>
        <span class="n">leftLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">caseCheckBox</span><span class="p">)</span>
        <span class="n">leftLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">backwardCheckBox</span><span class="p">)</span>
        <span class="n">rightLayout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">rightLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">findButton</span><span class="p">)</span>
        <span class="n">rightLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">closeButton</span><span class="p">)</span>
        <span class="n">rightLayout</span><span class="o">.</span><span class="n">addStretch</span><span class="p">()</span>
        <span class="n">mainLayout</span><span class="o">=</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">mainLayout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">leftLayout</span><span class="p">)</span>
        <span class="n">mainLayout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">rightLayout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">mainLayout</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Find&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFixedHeight</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sizeHint</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">())</span>


    <span class="k">def</span> <span class="nf">enableFindButton</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">text</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">findButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="nb">bool</span><span class="p">(</span><span class="n">text</span><span class="p">))</span>
    <span class="nd">@pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">findClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lineEdit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">caseCheckBox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="n">cs</span><span class="o">=</span><span class="n">Qt</span><span class="o">.</span><span class="n">CaseSensitive</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cs</span><span class="o">=</span><span class="n">Qt</span><span class="o">.</span><span class="n">CaseInsensitive</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">backwardCheckBox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">findPrevious</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">text</span><span class="p">,</span><span class="n">cs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">findNext</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">text</span><span class="p">,</span><span class="n">cs</span><span class="p">)</span>



<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">sys</span>
    <span class="n">app</span><span class="o">=</span><span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">findDialog</span> <span class="o">=</span> <span class="n">FindDialog</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="n">text</span><span class="p">,</span><span class="n">cs</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;find:&#39;</span><span class="p">,</span><span class="n">text</span><span class="p">,</span><span class="s1">&#39;cs&#39;</span><span class="p">,</span><span class="n">cs</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">findp</span><span class="p">(</span><span class="n">text</span><span class="p">,</span><span class="n">cs</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;findp:&#39;</span><span class="p">,</span><span class="n">text</span><span class="p">,</span><span class="s1">&#39;cs&#39;</span><span class="p">,</span><span class="n">cs</span><span class="p">)</span>

    <span class="n">findDialog</span><span class="o">.</span><span class="n">findNext</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">find</span><span class="p">)</span>
    <span class="n">findDialog</span><span class="o">.</span><span class="n">findPrevious</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">findp</span><span class="p">)</span>
    <span class="n">findDialog</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</pre></div>

<p>
首先自建的信号必须是类的属性，然后这个类必须是QObject的子类，这里QDialog是继承自QObject的。请看到第9行和第10行，通过pyqtSignal函数来自建信号，此信号有两个参数，一个是str字符变量，一个是Qt.CaseSensitivity的枚举值。假设我们输入一些文字了，然后点击Find按钮，请看到第26行，点击之后将执行findClicked槽，按钮的clicked信号是不带参数的。所以后面定义的findClicked槽（简单的函数也可以）也没有任何参数。
</p>

<p>
findClicked槽的53-57行确定了当前的QLineEdit的text值和cs也就是大小写是否检查的状态。然后根据向前或者向后是否勾选来确定接下来要发送的信号。比如findNext信号调用emit方法，对应两个参数也传递过去了。而这个findNext正是我们前面自定义的信号，正是对应的两个参数类型。
</p>

<p>
我们再看到这里简单做了一个测试程序，70-73行定义了两个简单的函数，然后75，76行将findDialog的这两个信号和上面两个函数连接起来。于是当我们点击Find按钮，首先执行findClicked槽，然后假设这里发送了findNext信号（附带两个参数），然后信号又和find函数相连（参数传递给了find函数），然后执行find函数。整个过程就是这样的。
</p>
</div>
</div>


<div class="outline-3">
<h3 id="orgheadline22">信号－槽机制的反思</h3>
<div class="outline-text-3" id="text-3-4">
<p>
在接下来Qt designer这一章也会详细讨论这个问题，我们使用Qt designer来设计和修改ui文件——对应程序中大部分的静态视图元素，主要的目的倒不是为了快速GUI程序编写，其实写代码也挺快的，主要的目的就是为了代码复用。当我们养成习惯，强迫自己程序中的静态视图元素都进入ui文件，这不仅增强了ui文件的复用性，而且也增强了剩下来的python代码的复用性。这其中很大一部分就是这里讨论的信号－槽机制的功劳。
</p>

<p>
当我们自定义的类加载好ui文件之后，该类里面的代码实际上就剩下两个工作：
</p>
<ol class="org-ol">
<li>把本窗体的信号和槽都编写好</li>
<li>把母窗体和子窗体和信号－槽接口写好。</li>
</ol>

<p>
一般程序的用户互动接口大多在最顶层，也就是用户一般喜欢在菜单栏找到所有可能对程序的控制，这些控制的实现函数如果放在都放在母窗体，那么整个程序的代码复用性会降到最低，而如果我们将这些实现函数分别移到和其视图窗体最紧密的窗体类中，那么不仅代码复用性会大大提高，而且这些槽或函数的编写也会简单很多。那么我们该如何组织这些信号和槽（实现函数）呢？我在这里提出组织学上的一些抽象原则：
</p>
<ol class="org-ol">
<li>最小组织原则，凡是小组织能够自我实现的功能绝不上传到更大一级的组织中去。</li>
<li>大组织对小组织元素的某些实现的引用，采用明文引用原则。比如说母窗体中有一个小窗体有一个编辑器，母窗体想要操控这个编辑器执行剪切操作，那么采用明文引用，也就是self.textEdit.cut。</li>
<li>小组织对大组织属性的引用采用信号激活原则，比如说某个编辑器发生了内容修改，你可以自定义一个信号，该信号为标题修改信号，然后信号触发母窗体的某个方法，这样达到修改母窗体的标题的目的。而在母窗体中，只需要在声明是将小组织的信号和大组织的某个方法连接起来即可。</li>
</ol>
</div>
</div>
</div>


<div class="outline-2">
<h2 id="orgheadline24">使用Qt designer</h2>
<div class="outline-text-2" id="text-4">
<p>
其实我们不一定要使用Qt designer，Qt desinger的目的主要不是为了快速绘制GUI，而是一种模块化编程思路。利用Qt designer在代码复用上ui文件只是很小的一部分，关键是将ui抽离之后，剩下的py文件里面定义的大多是信号和槽，其中槽就是函数，这些函数复用性是很高的。而对于不同的程序最大差异化的不分就是不同的信号和信号与槽之间的连接了。下面将通过一个timer计时器小程序简单演示下如何利用Qt designer快速Qt编程。
</p>
</div>
</div>



<div class="outline-2">
<h2 id="orgheadline26">资源文件管理</h2>
<div class="outline-text-2" id="text-5">
</div><div class="outline-3">
<h3 id="orgheadline25">资源管理</h3>
<div class="outline-text-3" id="text-5-1">
<p>
pyqt都用qrc文件来管理软件内部的资源文件（如图标文件，翻译文件等）。qrc文件的编写格式如下：
</p>
<div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE RCC&gt;</span><span class="nt">&lt;RCC</span> <span class="na">version=</span><span class="s">&quot;1.0&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;qresource&gt;</span>
    <span class="nt">&lt;file&gt;</span>images/copy.png<span class="nt">&lt;/file&gt;</span>
<span class="nt">&lt;/qresource&gt;</span>
<span class="nt">&lt;/RCC&gt;</span>
</pre></div>

<p>
qrc的编写还是很简单的，完全可以手工编写之。上面代码第三行的images/copy.png的意思就是qrc文件所在目录下的images文件夹，里面的copy.png文件。
</p>

<p>
qrc文件编写好了你需要运行如下命令
</p>
<div class="highlight"><pre><span></span>pyrcc5  wise.qrc  -o  wise_rc.py
</pre></div>

<p>
这样将会输出一个wise_rc.py文件，你如果要使用里面的资源，首先
</p>
<div class="highlight"><pre><span></span><span class="kn">import</span>  <span class="nn">wise_rc</span>
</pre></div>

<p>
然后引用路径如下 ' <code>:/images/copy.png</code> ' ，这样就可以使用该图标文件了。
</p>

<p>
上面是pyqt5的情况，对于pyqt4类似的有：
</p>
<div class="highlight"><pre><span></span>pyrcc4  wise.qrc  -o  wise_rc.py
</pre></div>

<p>
值得一提的是pyrcc4还有一个额外的选项 <code>-py3</code> ，用于生成python3的代码。
</p>

<p>
推荐一个项目里面所有的资源文件都用一个qrc文件来管理。
</p>
</div>
</div>
</div>



<div class="outline-2">
<h2 id="orgheadline33">配置文件管理</h2>
<div class="outline-text-2" id="text-6">
<p>
pyqt4和pyqt5里的QtCore子模块里提供了 <strong>QSettings</strong> 类来方便管理软件的配置文件。
</p>
</div>

<div class="outline-3">
<h3 id="orgheadline27">QSettings构造函数</h3>
<div class="outline-text-3" id="text-6-1">
<p>
一般先推荐把OrganizationName和ApplicationName设置好。
</p>

<div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">setOrganizationName</span><span class="p">(</span><span class="s2">&quot;Wise&quot;</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">setApplicationName</span><span class="p">(</span><span class="s2">&quot;wise&quot;</span><span class="p">)</span>
</pre></div>


<p>
然后接下来是构建一个QSettings对象。
</p>
<div class="highlight"><pre><span></span><span class="n">QSettings</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
</pre></div>

<p>
在设置好组织名和软件名之后，如果如上简单 <code>QSettings()</code> 来创建一个配置文件对象，不带任何参数，parent取默认值，那么所谓的format取的默认值是 <code>QSettings.NativeFormat</code> ，然后所谓的scope取的默认值是 <code>QSettings.UserScope</code> 。这里的scope还有QSettings.SystemScope，这个和软件的配置文件权限有关，这里先略过了，一般就使用默认的UserScope吧。
</p>

<p>
fromat如果取默认的NativeFormat那么具体软件配置文件的安装目录如下：
</p>

<ul class="org-ul">
<li>如果是linux系统，比如上面的例子具体配置文件就是：</li>
</ul>
<pre>
/home/wanze/.config/Wise/wise.conf
</pre>

<ul class="org-ul">
<li>如果是windows系统，那么上面的例子具体就是：</li>
</ul>
<pre>
HKEY_CURRENT_USER\Software\Wise\wise
</pre>

<p>
windows下配置是放在注册表里面的。
</p>

<ul class="org-ul">
<li>苹果系统还需要一个OrganizationDomain变量去set，然后苹果系统我非常不熟悉，这里略过了。</li>
</ul>
</div>
</div>


<div class="outline-3">
<h3 id="orgheadline30">IniFormat</h3>
<div class="outline-text-3" id="text-6-2">
<p>
如果你希望配置文件都以ini形式存储，那么你需要采取如下格式初始化配置文件对象：
</p>
<pre>
self.settings = QSettings(QSettings.IniFormat,QSettings.UserScope,"Wise","wise")
</pre>

<p>
这样配置文件就在这里： <code>/home/wanze/.config/Wise/wise.ini</code> 。这里是linux系统的情况，苹果系统略过，windows系统官方文档给出的是： <code>%APPDATA%\Wise\wise.ini</code> ，这个 <code>%APPDATA%</code> 我不清楚具体在哪里。
</p>

<p>
你可以通过调用 <code>self.settings.fileName()</code> 来查看该配置文件对象具体的路径所在。
</p>

<p>
推荐配置文件作为mainwindow实例的属性如上self.settings来确定，然后所有的子窗体都可以通过调用self来获得同一的配置文件对象。
</p>
</div>

<div class="outline-4">
<h4 id="orgheadline28">ini文件存放DIY</h4>
<div class="outline-text-4" id="text-6-2-1">
<p>
如果你希望ini文件放在你喜欢的地方，下面是配置文件构造函数的第三种形式：
</p>
<pre>
QSettings("wise.ini",QSettings.IniFormat)
</pre>

<p>
第一个参数是你的配置文件名，第二个参数是format。如上相对路径的话则是从你目前软件运行时的文件夹算起。
</p>

<p>
你可以通过调用 <code>settings.fileName()</code> 来看看该配置文件的具体所在。
</p>
</div>
</div>

<div class="outline-4">
<h4 id="orgheadline29">ini文件注意事项</h4>
<div class="outline-text-4" id="text-6-2-2">
<p>
ini文件是大小写不敏感的，所以尽量避免两个变量名相近只是大小写不同。
</p>

<p>
不要使用“\”和“/”。windows里\会转换成/，而“/”使用来表示配置文件中分组关系的。
</p>
</div>
</div>
</div>


<div class="outline-3">
<h3 id="orgheadline31">存值和读值</h3>
<div class="outline-text-3" id="text-6-3">
<p>
配置文件对象建立之后你就可以很方便地存放一些值和读取值了。存值用 <code>setValue</code> 方法，取值用 <code>value</code> 方法。如下所示：
</p>
<pre>
settings.setValue("editor/wrapMargin", 68)
margin = self.settings.value("editor/wrapMargin")
</pre>

<p>
如果setValue的键在配置文件对象中已经存在，那么将更新值，如果要修改立即生效，可以使用 <code>sync</code> 方法，sync方法不接受参数，就是立即同步配置文件中的更新。
</p>

<p>
<code>value</code> 方法第一个参数是“键”，第二个参数是可选值，也就是如果没找到这个键，那么将会返回的值。一般最好还是写上，否则可能配置文件不在了，你就会发生读取错误。
</p>


<p>
其他方法还有：
</p>
<dl class="org-dl">
<dt>contains</dt><dd>接受一个“键”，字符串对象，返回bool值，看看这个键是不是存在。</dd>
<dt>remove</dt><dd>接受一个“键“，移除该键。</dd>
<dt>allkeys</dt><dd>不接受参数，返回所有的“键“。</dd>
<dt>clear</dt><dd>不接受参数，清除所有的“键”。</dd>
</dl>
</div>
</div>



<div class="outline-3">
<h3 id="orgheadline32">群组管理</h3>
<div class="outline-text-3" id="text-6-4">
<pre>
settings.setValue("editor/wrapMargin", 68)
</pre>

<p>
如上例子所示“/”表示数据结构中的分组，如果有很多值都有相同的前缀，也就是同属一组，那么可以使用beginGroup方法和endGroup方法来管理。如下所示：
</p>

<pre>
settings.beginGroup("editor")
settings.setValue("wrapMargin", 68)
settings.engGroup()
</pre>
</div>
</div>
</div>



<div class="outline-2">
<h2 id="orgheadline38">布局管理</h2>
<div class="outline-text-2" id="text-7">
<p>
布局管理是GUI设计中不可回避的一个话题，这里详细讨论下pyqt的布局管理。正如前所述及，pyqt5用于布局管理的类都移到了QtWidgets子模块那里了，首先是最基本的 <code>QHBoxLayout</code> 和 <code>QVBoxLayout</code> 。
</p>
</div>

<div class="outline-3">
<h3 id="orgheadline34">QBoxLayout</h3>
<div class="outline-text-3" id="text-7-1">
<p>
<code>QHBoxLayout</code> 和 <code>QVBoxLayout</code> 一个是横向排布，一个是竖向排布。它们的使用方法如下所示：
</p>

<pre>
mainLayout=QHBoxLayout()
mainLayout.addWidget(button1)
mainLayout.addWidget(button2)
self.setLayout(mainLayout)
</pre>


<p>
Layout对象就好像一个封装器，Layout里面还可以有Layout，当然还有其他一些窗体子单元，都通过 <code>addWidget</code> 方法来确立封装关系。最后主母窗口主要接受一个Layout对象，使用的是 <code>setLayout</code> 方法。
</p>

<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QApplication</span><span class="p">,</span><span class="n">QWidget</span><span class="p">,</span><span class="n">QLabel</span><span class="p">,</span><span class="n">QVBoxLayout</span><span class="p">,</span><span class="n">QPushButton</span><span class="p">,</span><span class="n">QLineEdit</span><span class="p">,</span> <span class="n">QMessageBox</span>

<span class="k">class</span> <span class="nc">Form</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="n">nameLabel</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Name:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nameLine</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">submitButton</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Submit&quot;</span><span class="p">)</span>
        <span class="n">bodyLayout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">bodyLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">nameLabel</span><span class="p">)</span>
        <span class="n">bodyLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nameLine</span><span class="p">)</span>
        <span class="n">bodyLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">submitButton</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">submitButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">submit</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">bodyLayout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Hello Qt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">submit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nameLine</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Empty Field&quot;</span><span class="p">,</span>
                                    <span class="s2">&quot;Please enter a name.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success!&quot;</span><span class="p">,</span>
                                    <span class="s2">&quot;Hello </span><span class="si">%s</span><span class="s2">!&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">sys</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">screen</span> <span class="o">=</span> <span class="n">Form</span><span class="p">()</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</pre></div>


<p>
pyqt4版本就是把头引入语句改成
</p>
<pre>
from PyQt4.QtGui import ...
</pre>
</div>
</div>




<div class="outline-3">
<h3 id="orgheadline35">addStretch方法</h3>
<div class="outline-text-3" id="text-7-2">
<p>
插入一个分隔符，也就是设计器里面的弹簧。
</p>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline36">QGridLayout</h3>
<div class="outline-text-3" id="text-7-3">
<p>
在tkinter中有个grid方法，也就是网格布局，同样pyqt中也有个网格布局对象QGridLayout。QGridLayout的用法和上面QBoxLayout类似，除了 <strong>addWidget</strong> 方法后面还可以接受两个额外的参数表示几行几列。
</p>

<p>
请看到下面的例子。这个例子很好地演示了QGridLayout的使用。其中 <code>(i-1)//3</code> 即该数对3取商，本来的1 2 3 4 5 6&#x2026;将变成0 0 0 1 1 1 2 2 2&#x2026;正好对应网格中的几行，而 <code>(i-1)%3</code> 即该数对3取余，本来的1 2 3 4 5 6&#x2026;将变成0 1 2 0 1 2 0 1 2&#x2026;正好对应网格中的几列的概念。
</p>

<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QApplication</span><span class="p">,</span><span class="n">QWidget</span><span class="p">,</span><span class="n">QPushButton</span><span class="p">,</span><span class="n">QGridLayout</span>

<span class="k">class</span> <span class="nc">Form</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="n">bodyLayout</span> <span class="o">=</span> <span class="n">QGridLayout</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">):</span>
            <span class="n">button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
            <span class="n">bodyLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">button</span><span class="p">,(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">//</span><span class="mi">3</span><span class="p">,(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="mi">3</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">,(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">//</span><span class="mi">3</span><span class="p">,(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">bodyLayout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;the grid layout&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">sys</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">screen</span> <span class="o">=</span> <span class="n">Form</span><span class="p">()</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</pre></div>
</div>
</div>


<div class="outline-3">
<h3 id="orgheadline37">QFormLayout</h3>
<div class="outline-text-3" id="text-7-4">
<p>
QFormLayout，表单布局，常用于提交某个配置信息的表单。
</p>

<p>
请看到下面的例子。这个例子来自pyqt5源码examples文件夹layouts文件夹里面的basiclayouts.py文件，做了简化主要用于演示表单布局。
</p>

<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="p">(</span><span class="n">QApplication</span><span class="p">,</span> <span class="n">QDialog</span><span class="p">,</span><span class="n">QDialogButtonBox</span><span class="p">,</span> <span class="n">QFormLayout</span><span class="p">,</span> <span class="n">QGroupBox</span><span class="p">,</span><span class="n">QLabel</span><span class="p">,</span> <span class="n">QLineEdit</span><span class="p">,</span> <span class="n">QSpinBox</span><span class="p">,</span><span class="n">QVBoxLayout</span><span class="p">,</span><span class="n">QTextEdit</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Dialog</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">createFormGroupBox</span><span class="p">()</span>
        <span class="n">buttonBox</span> <span class="o">=</span> <span class="n">QDialogButtonBox</span><span class="p">(</span><span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Ok</span> <span class="o">|</span> <span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Cancel</span><span class="p">)</span>
        <span class="n">buttonBox</span><span class="o">.</span><span class="n">accepted</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">)</span>
        <span class="n">buttonBox</span><span class="o">.</span><span class="n">rejected</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reject</span><span class="p">)</span>
        <span class="n">mainLayout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">mainLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">formGroupBox</span><span class="p">)</span>
        <span class="n">mainLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">buttonBox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">mainLayout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;user info&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">createFormGroupBox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">formGroupBox</span> <span class="o">=</span> <span class="n">QGroupBox</span><span class="p">(</span><span class="s2">&quot;your infomation&quot;</span><span class="p">)</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QFormLayout</span><span class="p">()</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;name:&quot;</span><span class="p">),</span> <span class="n">QLineEdit</span><span class="p">())</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="s2">&quot;age:&quot;</span><span class="p">,</span> <span class="n">QSpinBox</span><span class="p">())</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;other infomation:&quot;</span><span class="p">),</span> <span class="n">QTextEdit</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">formGroupBox</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">sys</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">dialog</span> <span class="o">=</span> <span class="n">Dialog</span><span class="p">()</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</pre></div>


<p>
这里 <code>QDialog</code> 类和 <code>QDialogButtonBox</code> 类我们且不去管他，QDialog类和下面的accept和reject方法有关，而QDialogButtonBox和最下面的两个按钮和绑定的喜好accepted和rejected有关。
</p>

<p>
然后我们看到下面创建表单的那个函数，其中 <code>QGroupBox</code> 也是一个窗体类型，带有标题。接下来就是QFormLayout表单布局的核心代码：
</p>
<pre>
layout = QFormLayout()
layout.addRow(QLabel("name:"), QLineEdit())
layout.addRow(QLabel("age:"), QSpinBox())
layout.addRow(QLabel("other infomation:"), QTextEdit())
self.formGroupBox.setLayout(layout)
</pre>


<p>
我们看到前面的layout的创建和后面母窗体使用本layout的 <code>setLayout</code> 方法和前面两个布局都是类似的，除了表单布局是一行行的，它的方法不是addWidget，而是 <code>addRow</code> ，然后addRow方法严格意义上可以接受两个窗体类型（包括layout类型）， <span class="underline">另外第一个参数还可以是字符串，即显示的文字</span> 。
</p>
</div>
</div>
</div>


<div class="outline-2">
<h2 id="orgheadline42">快捷键和Tab键管理</h2>
<div class="outline-text-2" id="text-8">
</div><div class="outline-3">
<h3 id="orgheadline39">什么是伙伴关系</h3>
<div class="outline-text-3" id="text-8-1">
<p>
一般是通过QLabel的setBuddy方法来关联某个输入窗体。然后QLabel有一个快捷键，当你按下这个快捷键，输入焦点就会转到这个QLabel对应的伙伴输入窗体上。
</p>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline40">快捷键</h3>
<div class="outline-text-3" id="text-8-2">
<p>
QShortcut类
</p>

<p>
文本前用&amp;会引入对应的Alt+w之类的快捷键。
</p>

<p>
然后QAction在初始化的时候有
</p>

<p>
然后QAction有方法
</p>
</div>
</div>



<div class="outline-3">
<h3 id="orgheadline41">QKeySequence</h3>
<div class="outline-text-3" id="text-8-3">
<p>
<code>QKeySequence</code> 类在pyqt4和pyqt5中来自QtGui子模块，是快捷键的解决方案。比如可以直接引用 <code>QKeySequence.Open</code> 来表示快捷键Ctrl+O。可用的构造函数如下所示：
</p>

<pre>
QKeySequence(QKeySequence.Print)
QKeySequence(tr("Ctrl+P"))
QKeySequence(tr("Ctrl+p"))
QKeySequence(Qt.CTRL + Qt.Key_P)
</pre>


<p>
我不太喜欢第一种表达方式，不是任何软件都有打印操作，况且打印和某个快捷键之间并没有逻辑联系，只有程序员的个人使用经验，这是不小的记忆负担。我比较喜欢第四种写法，看上去意义更加清晰，Qt来自QtCore子模块。
</p>

<p>
字母按键就是类似 <code>Qt.Key_W</code> 这样的形式，Shift按键是Qt.SHIFT，Meta按键是Qt.META，CTRL按键是 <code>Qt.CTRL</code> ，ALT按键是 <code>Qt.ALT</code> 。
</p>
</div>
</div>
</div>

<div class="outline-2">
<h2 id="orgheadline45">国际化支持</h2>
<div class="outline-text-2" id="text-9">
<p>
本小节参考资料除了官方文档之外还有<a href="http://plashless.wordpress.com/2014/02/01/internationalizing-python-pyqt-apps/">这个网站</a> 。
</p>

<p>
这里指的pyqt的软件国际化支持主要是指i18n，也就是两种语言，英语和本土语言。其中软件的字符串都是英语，然后用 <code>self.tr()</code> 封装。
</p>

<p>
然后在你的项目里新建一个translations文件夹，新建如下一个小文件 <code>wise.pro</code> ，这里的wise是你的模块具体的名字，随意修改之。这个文件的内容简要如下：
</p>
<pre>
SOURCES += ../main.py  ../__init__.py \
                ../Widgets/__init__.py

TRANSLATIONS += wise_zh_CN.ts
</pre>

<p>
SOURCES 是你希望扫描的py文件，如果该文件有前面所说的self.tr()封装，那么里面的字符串pylupdate5工具就可以扫描出来。这里支持路径的相对表达。但是不支持glob语法。
</p>

<p>
第二个变量就是TRANSLATIONS就是你希望生成的目标翻译ts文件的文件名，一般是如下格式：
</p>
<pre>
{PROJECT_NAME}_{QLocale.system().name()}.ts
</pre>

<p>
其中PROJECT_NAME是你项目的名字，而QLocale.system().name()是你当前机器所用的目标语言简写，你可以在python3的eval模式下查看一下：
</p>
<pre>
&gt;&gt;&gt; from PyQt5.QtCore import QLocale
&gt;&gt;&gt; QLocale.system().name()
'zh_CN'
</pre>


<p>
然后你需要用pylupdate5小工具处理该pro文件：
</p>
<div class="highlight"><pre><span></span>pylupdate5 wise.pro
</pre></div>


<p>
这样你就可以看到生成的 <code>wise_zh_CH.ts</code> 文件了，然后请确保安装了qt4-dev-tools，
</p>
<div class="highlight"><pre><span></span>sudo apt-get install qt4-dev-tools
</pre></div>

<p>
这样你就可以双击打开ts文件，操作很简单，看见对应的英文单词，然后填上相应的中文解释。操作玩了点击发布，即看到生成的qm文件，或者使用命令行工具 <strong>lrelease</strong> 。
</p>
</div>

<div class="outline-3">
<h3 id="orgheadline43">使用翻译文件</h3>
<div class="outline-text-3" id="text-9-1">
<p>
样例如下：
</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">QTranslator</span><span class="p">,</span><span class="n">QLocale</span>
    <span class="n">myapp</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">translator</span> <span class="o">=</span> <span class="n">QTranslator</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">translator</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;wise_&#39;</span><span class="o">+</span> <span class="n">QLocale</span><span class="o">.</span><span class="n">system</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">()</span><span class="o">+</span><span class="s1">&#39;.qm&#39;</span><span class="p">,</span>
        <span class="s2">&quot;:/translations/&quot;</span><span class="p">):</span>
        <span class="n">myapp</span><span class="o">.</span><span class="n">installTranslator</span><span class="p">(</span><span class="n">translator</span><span class="p">)</span>
</pre></div>

<p>
首先你需要构建一个QTranslator对象，然后调用该对象的方法load，这里第一个参数是要load的qm文件名，第二个参数是qm文件的路径，可以使用前面谈及的qrc引用路径。
</p>

<p>
最后你的主母窗口myapp使用installTranslator方法把这个QTranslator对象加进去即可。
</p>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline44">使用qt官方翻译文件</h3>
<div class="outline-text-3" id="text-9-2">
<p>
有些qt窗体内部文字可能不好DIY，这时需要如上一样加载qt的官方翻译文件。代码如下所示：
</p>
<div class="highlight"><pre><span></span>    <span class="n">translator_qt</span> <span class="o">=</span> <span class="n">QTranslator</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">translator_qt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;qt_&#39;</span><span class="o">+</span> <span class="n">QLocale</span><span class="o">.</span><span class="n">system</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">()</span><span class="o">+</span><span class="s1">&#39;.qm&#39;</span><span class="p">,</span><span class="s2">&quot;:/translations/&quot;</span><span class="p">):</span>
<span class="c1">#        print(&#39;i found qt&#39;)</span>
        <span class="n">myapp</span><span class="o">.</span><span class="n">installTranslator</span><span class="p">(</span><span class="n">translator_qt</span><span class="p">)</span>
</pre></div>


<p>
这样你的主母窗口myapp现在需要加载两个翻译文件了。
</p>

<p>
官方qt翻译文件在qt源码的translations文件夹里面，可以如下通过git clone获取。
</p>
<div class="highlight"><pre><span></span>git clone https://gitorious.org/qt/qttranslations.git
</pre></div>

<p>
ts文件如前所述用 <strong>lrelease</strong> 命令处理以下，或者直接用语言工具打开然后发布即可。
</p>
</div>
</div>
</div>



<div class="outline-2">
<h2 id="orgheadline50">附录</h2>
<div class="outline-text-2" id="text-10">
</div><div class="outline-3">
<h3 id="orgheadline46">PyQt4和PyQt5的区别整理</h3>
<div class="outline-text-3" id="text-10-1">
<ul class="org-ul">
<li>很多pyqt4原放在QtGui里面的一些QWidget在pyqt5里面都放入QtWidgets里面去了。一个简单的解决兼容性问题的方案就是在pyqt4里面引入的时候写上:</li>
</ul>
<pre>
from PyQt4.QtGui import *
</pre>

<p>
在pyqt5里面引入的时候写上:
</p>
<pre>
from PyQt5.QtGui import *
from PyQt5.QtWidgets import *
</pre>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline47">引用信号发射对象</h3>
<div class="outline-text-3" id="text-10-2">
<p>
<code>sender</code> 方法来自GObject，所以一般Qt里的窗体对象都可以用。其用法主要在槽里面，调用 <code>self.sender()</code> ，即返回一个发射该信号从而调用该槽的对象。
</p>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline48">菜单栏看不见？</h3>
<div class="outline-text-3" id="text-10-3">
<p>
不过可能你会遇到麻烦，我就折腾了好久，因为菜单栏总是显示不出来，然后才发现是系统环境的问题，我在GNOME下看不到pyqt5做的软件的菜单栏了，但是到Ubuntu默认的Unity环境下最上面的面板就是菜单栏了，这个值得说一下。
</p>

<p>
如果你在Unity环境（Ubuntu14.04）下，那么不需要做什么，如果你在gnome或者KDE上，那么qt5的菜单栏可能会显示不出来，你需要删除下面这个小东西。
</p>
<div class="highlight"><pre><span></span>sudo apt-get remove appmenu-qt5
</pre></div>

<p>
把这个小软件删除，pyqt5上的菜单栏就能正常显示了，不过在unity环境下菜单栏不会显示在最上面的面板上了，而是常规的在图形GUI标题栏下面了。
</p>
</div>
</div>


<div class="outline-3">
<h3 id="orgheadline49">参考资料</h3>
<div class="outline-text-3" id="text-10-4">
<ol class="org-ol">
<li>pyqt4教程，<a href="http://blog.cx125.com/books/PyQt4_Tutorial/">PyQt4_Tutorial</a></li>

<li>Rapid GUI Programming with Python and Qt , 书籍的源码</li>

<li>C++-GUI-Programming-with-Qt-4-Second Edition 书籍的源码</li>

<li><a href="http://pyqt.sourceforge.net/Docs/PyQt4/classes.html">PyQt4各个类参考</a></li>
</ol>
</div>
</div>
</div>
</div>
</body>
</html>
