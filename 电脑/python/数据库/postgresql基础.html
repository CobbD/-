<!DOCTYPE html>
<html>
<head>
<!-- 2016-03-28 一 12:09 -->
<meta  charset="utf-8">
<meta  name="viewport" content="width=device-width, initial-scale=1">
<title>postgresql基础</title>
<meta  name="generator" content="Org-mode">
<meta  name="author" content="万泽(德山书生)">
<meta  name="description" content="制作者邮箱：a358003542@gmail.com"
>
<style type="text/css">
body {

}
@media (min-width: 768px) {
  body {
    width: 732px;
    padding-right: 20px;
    padding-left: 20px;
    margin-right: auto;
    margin-left: auto;
  }
}
@media (min-width: 992px) {
  body {
    width: 880px;
    padding-right: 100px;
    padding-left: 100px;
    margin-right: auto;
    margin-left: auto;
  }
}
@media (min-width: 1200px) {
  body {
    width: 750px;
    padding-right: 200px;
    padding-left: 200px;
    margin-right: auto;
    margin-left: auto;
  }
}

.title {
    display: block;
    text-align: center;
    padding: 10px;
}

.center-block {
    display: block;
    margin-left: auto;
    margin-right: auto;
}

.underline{
    text-decoration: underline;
}
   #content {
    display: block;
    margin-left: auto;
    margin-right: auto;
}

code {
    padding: 2px 4px;
    color: #c7254e;
    background-color: #f9f2f4;
    border-radius: 4px;
}

pre {
    max-width: 100%;
    display: block;
    padding: 9.5px;
    margin: 0 0 10px;
    font-size: 13px;
    line-height: 1.42857143;
    color: #333;
    background-color: #f5f5f5;
    border: 1px solid #ccc;
    border-radius: 4px;
    overflow : auto;
}


blockquote {
    padding: 10px 20px;
    margin: 0 0 20px;
    font-size: 17.5px;
    border-left: 5px solid #eee;
}


p{
    text-indent:2em;
    line-height:150%;
}

li, dt{
    margin-top: 0.5em;
    margin-bottom: 0.5em;
}

video{
    max-width: 100%;
    margin-left: auto;
    margin-right: auto;
}

figure p{
    text-indent:0em;
}
img{
    max-width: 100%;
}

embed{
    max-width: 100%;
    margin-left: auto;
    margin-right: auto;
}

figure{
    text-align: center;
}

/*  class  */
.FRAMED{
    max-width:100%;
    border:1px solid ;
    padding: 1em;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

.NOTECARD{
    width: 30%;
    position:relative;
    right: -30%;
    padding: 1em;
    margin:0 auto;
    border: solid 1px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

/*
table
*/
table {
    border-collapse: collapse;
    border-spacing: 0;
    margin: 16px 0;
    empty-cells: show;
    border: 1px solid #ccc;
    width: 100%;
    display: table;
}

table tr {
    border-bottom: 1px solid #ddd;
}
table th,table td{
    padding:8px;
}

table tr:nth-child(even) {
    background-color: #f1f1f1;
}
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #8f5902; font-style: italic } /* Comment */
.highlight .err { color: #a40000; border: 1px solid #ef2929 } /* Error */
.highlight .g { color: #000000 } /* Generic */
.highlight .k { color: #204a87; font-weight: bold } /* Keyword */
.highlight .l { color: #000000 } /* Literal */
.highlight .n { color: #000000 } /* Name */
.highlight .o { color: #ce5c00; font-weight: bold } /* Operator */
.highlight .x { color: #000000 } /* Other */
.highlight .p { color: #000000; font-weight: bold } /* Punctuation */
.highlight .ch { color: #8f5902; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #8f5902; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #8f5902; font-style: italic } /* Comment.Preproc */
.highlight .cpf { color: #8f5902; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #8f5902; font-style: italic } /* Comment.Single */
.highlight .cs { color: #8f5902; font-style: italic } /* Comment.Special */
.highlight .gd { color: #a40000 } /* Generic.Deleted */
.highlight .ge { color: #000000; font-style: italic } /* Generic.Emph */
.highlight .gr { color: #ef2929 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #000000; font-style: italic } /* Generic.Output */
.highlight .gp { color: #8f5902 } /* Generic.Prompt */
.highlight .gs { color: #000000; font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #a40000; font-weight: bold } /* Generic.Traceback */
.highlight .kc { color: #204a87; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #204a87; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #204a87; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #204a87; font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: #204a87; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #204a87; font-weight: bold } /* Keyword.Type */
.highlight .ld { color: #000000 } /* Literal.Date */
.highlight .m { color: #0000cf; font-weight: bold } /* Literal.Number */
.highlight .s { color: #4e9a06 } /* Literal.String */
.highlight .na { color: #c4a000 } /* Name.Attribute */
.highlight .nb { color: #204a87 } /* Name.Builtin */
.highlight .nc { color: #000000 } /* Name.Class */
.highlight .no { color: #000000 } /* Name.Constant */
.highlight .nd { color: #5c35cc; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #ce5c00 } /* Name.Entity */
.highlight .ne { color: #cc0000; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #000000 } /* Name.Function */
.highlight .nl { color: #f57900 } /* Name.Label */
.highlight .nn { color: #000000 } /* Name.Namespace */
.highlight .nx { color: #000000 } /* Name.Other */
.highlight .py { color: #000000 } /* Name.Property */
.highlight .nt { color: #204a87; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #000000 } /* Name.Variable */
.highlight .ow { color: #204a87; font-weight: bold } /* Operator.Word */
.highlight .w { color: #f8f8f8; text-decoration: underline } /* Text.Whitespace */
.highlight .mb { color: #0000cf; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #0000cf; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #0000cf; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000cf; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #0000cf; font-weight: bold } /* Literal.Number.Oct */
.highlight .sb { color: #4e9a06 } /* Literal.String.Backtick */
.highlight .sc { color: #4e9a06 } /* Literal.String.Char */
.highlight .sd { color: #8f5902; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #4e9a06 } /* Literal.String.Double */
.highlight .se { color: #4e9a06 } /* Literal.String.Escape */
.highlight .sh { color: #4e9a06 } /* Literal.String.Heredoc */
.highlight .si { color: #4e9a06 } /* Literal.String.Interpol */
.highlight .sx { color: #4e9a06 } /* Literal.String.Other */
.highlight .sr { color: #4e9a06 } /* Literal.String.Regex */
.highlight .s1 { color: #4e9a06 } /* Literal.String.Single */
.highlight .ss { color: #4e9a06 } /* Literal.String.Symbol */
.highlight .bp { color: #3465a4 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #000000 } /* Name.Variable.Class */
.highlight .vg { color: #000000 } /* Name.Variable.Global */
.highlight .vi { color: #000000 } /* Name.Variable.Instance */
.highlight .il { color: #0000cf; font-weight: bold } /* Literal.Number.Integer.Long */
</style>
</head>
<body>
<div id="content">
<header>
<h1 class="title">postgresql基础</h1>
</header><nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline2">1. 前言</a>
<ul>
<li><a href="#orgheadline1">1.1. 安装postgresql</a></li>
</ul>
</li>
<li><a href="#orgheadline11">2. 用户群组权限管理</a>
<ul>
<li><a href="#orgheadline3">2.1. 修改postgres的密码</a></li>
<li><a href="#orgheadline4">2.2. postgres这个用户的其他信息</a></li>
<li><a href="#orgheadline5">2.3. 查看当前有多少用户</a></li>
<li><a href="#orgheadline6">2.4. 新建用户</a></li>
<li><a href="#orgheadline7">2.5. 删除用户</a></li>
<li><a href="#orgheadline8">2.6. 改变用户的权限</a></li>
<li><a href="#orgheadline9">2.7. 改变用户密码</a></li>
<li><a href="#orgheadline10">2.8. 新建一个群组</a></li>
</ul>
</li>
<li><a href="#orgheadline17">3. 使用工具初探</a>
<ul>
<li><a href="#orgheadline12">3.1. psql</a></li>
<li><a href="#orgheadline16">3.2. pgadmin3</a>
<ul>
<li><a href="#orgheadline13">3.2.1. 安装</a></li>
<li><a href="#orgheadline14">3.2.2. 连接服务器</a></li>
<li><a href="#orgheadline15">3.2.3. 图形化查询</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgheadline22">4. 第一个例子</a>
<ul>
<li><a href="#orgheadline18">4.1. 创建数据库</a></li>
<li><a href="#orgheadline19">4.2. 备份和还原</a></li>
<li><a href="#orgheadline20">4.3. 改变某个数据库的所有者</a></li>
<li><a href="#orgheadline21">4.4. postgresql字段数据类型</a></li>
</ul>
</li>
<li><a href="#orgheadline25">5. 附录</a>
<ul>
<li><a href="#orgheadline23">5.1. 配置文件在那里</a></li>
<li><a href="#orgheadline24">5.2. 重启postgresql服务</a></li>
</ul>
</li>
<li><a href="#orgheadline26">6. 参考资料</a></li>
</ul>
</div>
</nav>



<div class="outline-2">
<h2 id="orgheadline2">前言</h2>
<div class="outline-text-2" id="text-1">
<p>
本文是在 <a href="sql数据库入门.html">sql数据库入门</a> 一文基础之上的，一些基本的SQL概念将不会再赘述了。PostgreSQL是很有名的一个开源数据库，最初由加州大学伯克利分校的计算机系开发。有名的openerp框架使用的就是postgresql数据库，其内在也继承了postgresql的client/server模型。
</p>
</div>


<div class="outline-3">
<h3 id="orgheadline1">安装postgresql</h3>
<div class="outline-text-3" id="text-1-1">
<p>
在ubuntu下可以这样简单安装之：
</p>
<div class="highlight"><pre><span></span>sudo  apt-get install postgresql
</pre></div>

<p>
但是这样安装之后，你需要牢记一点的是，新安装的PostgreSQL数据库还只有 <strong>postgres</strong> 这个用户有新建role（或说用户）和新建数据库的权限。你需要通过postgres这个用户来执行 <code>createuser</code> 或 <code>createdb</code> 命令。这里我们先不急着学习SQL语句，因为postgresql里面关于用户群组权限的设置稍微有点复杂，而要使用postgresql，这一块是必须有个基本的了解的。
</p>
</div>
</div>
</div>



<div class="outline-2">
<h2 id="orgheadline11">用户群组权限管理</h2>
<div class="outline-text-2" id="text-2">
<p>
postgresql处理我们通常所谓的登录用户或者其他用户概念的术语是Rules（英文的意思是一系列的规则），后面都称之为用户（rules），可以理解为为这个用户确立的一系列访问修改数据库的规则。然后rules是可以包含其他rules的，这个包含其他rules的rules我们通常称之为群组（group rules），然后群组也可以包含群组，但一般都推荐简单分为用户（rules）和群组用户（group rules）这两类。然后用户如果有登录权限的话则可以称之为登录用户（login rules），群组用户也可以赋予登录权限，但处于简单的考虑没谁这么做。所以现在rules简单的划分就分为这三类:
</p>

<ol class="org-ol">
<li>一般用户，这里主要指没有登录权限的一般用户。</li>
<li>登录用户，或叫做一般登录用户，其属于一般用户，但有登录权限。</li>
<li>群组用户，包含一般用户的rules。</li>
</ol>

<p>
此外postgresql还提供 <strong>superuser</strong> 超级用户这一类型，其默认不能登录（更确切的说是不可以连接，也不能通过psql来连接。），但对于数据库几乎拥有所有的权限——比如创建数据库，创建用户，对于数据库的查增删改等。实际上superuser也可以加上 <code>login</code> 属性，但非常不推荐这么做，最好是不使用超级用户，而是对于具体的用户具体的数据库权限进行分配。
</p>

<p>
默认创建的postgres这个用户是可以连接的，而且我们看到其至少对postgres这个数据库具有所有权限，但是我还不太确定其是不是superuser，因为其可能对其他数据库并没有权限，这个后面再谈。按照 <a href="http://serverfault.com/questions/110154/whats-the-default-superuser-username-password-for-postgres-after-a-new-install">这篇网页</a> 的描述，系统默认自建的postgres这个用户最好也在系统中锁定:
</p>
<pre>
passwd -l postgres
</pre>

<p>
这样你就不能通过 <code>login</code> 登录进去了，而只能通过TCP/IP的方式来登入postgresql数据库了。然后推荐如下通过sudo命令以postgres身份来连接postgres数据库。
</p>
</div>

<div class="outline-3">
<h3 id="orgheadline3">修改postgres的密码</h3>
<div class="outline-text-3" id="text-2-1">
<pre>
sudo -u postgres psql postgres

postgres=# \password postgres
Enter new password: 
Enter it again:
</pre>

<p>
这里需要强调一点的是这里通过psql来进行连接（postgres）然后输入 <code>\password</code> 修改postgres的密码是具体通过 TCP/IP 方式连接postgresql数据库的密码，不是系统passwd管理的那个密码。
</p>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline4">postgres这个用户的其他信息</h3>
<div class="outline-text-3" id="text-2-2">
<p>
postgres这个用户的一些信息如下所示:
</p>
<pre>
postgres:x:121:131:PostgreSQL administrator,,,:/var/lib/postgresql:/bin/bash
</pre>
<p>
然后还有新建的postgres这个群组:
</p>
<pre>
postgres:x:131:
</pre>

<p>
这里的121是uid，131是gid，然后后面 <code>/var/lib/postgresql</code> 这个文件夹就是postgres该用户的主文件夹。你可能会遇到保存 <code>.psql_history</code> 这个文件的权限问题，参看 <a href="http://dba.stackexchange.com/questions/68705/could-not-save-history-to-file-var-lib-postgresql-psql-history-no-such-file">这个网页</a> ，这个时候需要确认该文件夹的所有用户和所有群组都是postgres。
</p>
</div>
</div>


<div class="outline-3">
<h3 id="orgheadline5">查看当前有多少用户</h3>
<div class="outline-text-3" id="text-2-3">
<p>
按照 <a href="http://stackoverflow.com/questions/32151288/how-is-there-a-pg-roles-table-in-postgres-before-a-database-is-created">这篇网页</a> 的介绍， <code>pg_roles</code> 是一个view视图，其只是一个对 <code>pg_authid</code> 的简单可读的视图封装，如下面所示，两者目前来说没有差异，然后我们看到postgres其是为superuser，也是login user。
</p>

<pre>
select rolname,rolsuper,rolcreaterole,rolcreatedb,rolcanlogin from pg_roles;

 rolname  | rolsuper | rolcreaterole | rolcreatedb | rolcanlogin 
----------+----------+---------------+-------------+-------------
 postgres | t        | t             | t           | t
</pre>

<pre>
select rolname,rolsuper,rolcreaterole,rolcreatedb,rolcanlogin from pg_authid;

 rolname  | rolsuper | rolcreaterole | rolcreatedb | rolcanlogin 
----------+----------+---------------+-------------+-------------
 postgres | t        | t             | t           | t
</pre>
</div>
</div>


<div class="outline-3">
<h3 id="orgheadline6">新建用户</h3>
<div class="outline-text-3" id="text-2-4">
<p>
新建一个用户:
</p>
<pre>
create role the_name;
</pre>
<p>
但最起码要有登录login权限吧:
</p>
<pre>
create role the_name login;
</pre>

<p>
在使用postgresql时，如果某个用户不存在，那么PostgreSQL将会报错: 
</p>
<pre>
createdb: could not connect to database template1: FATAL:  role "wanze" does not exist
</pre>
</div>
</div>



<div class="outline-3">
<h3 id="orgheadline7">删除用户</h3>
<div class="outline-text-3" id="text-2-5">
<pre>
drop role the_name;
</pre>

<p>
或者该用户名不存在也不会报错的写法:
</p>
<pre>
drop role if exists the_name;
</pre>
</div>
</div>



<div class="outline-3">
<h3 id="orgheadline8">改变用户的权限</h3>
<div class="outline-text-3" id="text-2-6">
<p>
如下所示就改变一个用户的权限了。
</p>
<pre>
alter role the_name createdb;
</pre>

<p>
参照手册，后面的关键词有:
</p>
<pre>
SUPERUSER | NOSUPERUSER
CREATEDB | NOCREATEDB
CREATEROLE | NOCREATEROLE
CREATEUSER | NOCREATEUSER
INHERIT | NOINHERIT
LOGIN | NOLOGIN
REPLICATION | NOREPLICATION
</pre>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline9">改变用户密码</h3>
<div class="outline-text-3" id="text-2-7">
<p>
在新建用户的时候，我们可以如下:
</p>
<pre>
create role the_name password "the_password";
</pre>

<p>
后面也可以通过 <code>alter role</code> 来:
</p>
<pre>
alter role the_name password "the_password";
</pre>




<hr >
</div>
</div>
<div class="outline-3">
<h3 id="orgheadline10">新建一个群组</h3>
<div class="outline-text-3" id="text-2-8">
<pre>
CREATE ROLE royalty INHERIT;
</pre>


<p>
给群组用户增加登录用户
</p>
<pre>
GRANT royalty TO leo;
GRANT royalty TO regina;
</pre>
</div>
</div>
</div>


<div class="outline-2">
<h2 id="orgheadline17">使用工具初探</h2>
<div class="outline-text-2" id="text-3">
</div><div class="outline-3">
<h3 id="orgheadline12">psql</h3>
<div class="outline-text-3" id="text-3-1">
<p>
这里参考了 <a href="http://dba.stackexchange.com/questions/1285/how-do-i-list-all-databases-and-tables-using-psql">这个网页</a> 。
</p>
<dl class="org-dl">
<dt><code>\l</code> 或 <code>\list</code></dt><dd>列出所有的数据库</dd>
<dt><code>\du</code></dt><dd>列出所有的用户</dd>
<dt><code>\dt *</code></dt><dd>列出当前数据库所有的表格</dd>
<dt><code>\c</code> 或者 <code>\connect</code></dt><dd>切换数据库</dd>
</dl>
</div>
</div>





<div class="outline-3">
<h3 id="orgheadline16">pgadmin3</h3>
<div class="outline-text-3" id="text-3-2">
<p>
pgadmin3是针对PostgreSQL数据库很有名的一个管理员工具，里面的经很多，这里只是简单谈论一下。
</p>
</div>

<div class="outline-4">
<h4 id="orgheadline13">安装</h4>
<div class="outline-text-4" id="text-3-2-1">
<p>
在ubuntu下可以用apt-get简单安装之。
</p>
<div class="highlight"><pre><span></span>sudo apt-get install pgadmin3
</pre></div>
</div>
</div>

<div class="outline-4">
<h4 id="orgheadline14">连接服务器</h4>
<div class="outline-text-4" id="text-3-2-2">
<p>
刚进入软件需要连接服务器，如下图所示:
</p>


<figure>
<p><img src="images/pgadmin3连接服务器.png" alt="pgadmin3连接服务器.png">
</p>
<figcaption><span class="figure-number">Figure 1:</span> pgadmin3连接服务器</figcaption>
</figure>

<p>
目前我已经确认的就是名称随意填，然后主机不能填127.0.0.1，而只能填"localhost"这个字符串。然后后面的应该不用更改什么了，如果你给你的postgres数据库设置密码了，那么这个密码也需要填上。
</p>

<p>
连接好服务器了，我们就可以双击或点击查看你的PostgreSQL数据库的信息了。
</p>
</div>
</div>

<div class="outline-4">
<h4 id="orgheadline15">图形化查询</h4>
<div class="outline-text-4" id="text-3-2-3">
<p>
在工具那里有很多有用的工具，比如查看服务器状态工具等。然后我们点击查询工具，会弹出一个窗口，看到图形化查询那个子选单，如下图所示:
</p>


<figure>
<p><img src="images/pgadmin3图形化查询.png" alt="pgadmin3图形化查询.png">
</p>
<figcaption><span class="figure-number">Figure 2:</span> pgadmin3图形化查询</figcaption>
</figure>

<p>
这里我找到了前面我们新建的那个fruits模型，可以看到所有的fruits模型是放在一个名字叫做 <code>mymodule_fruits</code> 的SQL表格里的。然后它的表头有:id, create_uid, create_date, name等。
</p>

<p>
然后我们切换到SQL编辑器子选单。这个工具会根据你的图形化查询选择结果自动生成对应的SQL查询语句:
</p>
<pre>
SELECT 
  * 
FROM 
  public.mymodule_fruits;
</pre>

<p>
所以在我们这个odoo数据库里面，我们新建的模型fruits的各个对象，具体存入的table名是 <code>public.mymodule_fruits</code> 。
</p>

<p>
然后我们点击 查询→执行 ，来具体执行这个SQL语句，输出结果如下所示:
</p>


<figure>
<p><img src="images/pgadmin3具体查询结果.png" alt="pgadmin3具体查询结果.png">
</p>
</figure>
</div>
</div>
</div>
</div>




<div class="outline-2">
<h2 id="orgheadline22">第一个例子</h2>
<div class="outline-text-2" id="text-4">
</div><div class="outline-3">
<h3 id="orgheadline18">创建数据库</h3>
<div class="outline-text-3" id="text-4-1">
<pre>
CREATE DATABASE mydb;
</pre>
<p>
有 CREATEDB 权限的用户可以新建数据库。
</p>


<p>
然后创建一个数据库，并指定这个数据库的owner。
</p>
<pre>
CREATE DATABASE mydb WITH owner = mydb_admin;
</pre>


<p>
然后以mydb_admin登录开始进行数据库的其他操作。
</p>
</div>
</div>


<div class="outline-3">
<h3 id="orgheadline19">备份和还原</h3>
<div class="outline-text-3" id="text-4-2">
<p>
两个backup方法  pg_dump 和 pg_dumpall
用pg_restore 来还原，
</p>
</div>
</div>




<div class="outline-3">
<h3 id="orgheadline20">改变某个数据库的所有者</h3>
<div class="outline-text-3" id="text-4-3">
<p>
首先你需要以postgres的身份连接postgres数据库，因为你要进行更改某个数据库的所有者，就必须是目前该数据库的所有者。
</p>
<pre>
wanze@wanze-ubuntu:~$ sudo -u postgres psql postgres
psql (9.3.8)
Type "help" for help.

postgres=# ALTER DATABASE mydb OWNER TO learner;
ALTER DATABASE
postgres=# \q
</pre>

<p>
这里ALTER DATABASE语句里面 mydb 是具体你要更改的数据库名字，然后后面的learner是具体更改为的所有者名字。
</p>


<p>
类似上面谈及的，还有 <strong>dropdb</strong> 用于删除数据库， <strong>dropuser</strong> 用于删除用户。
</p>


<p>
CREATE TABLE语句我们都熟悉了，不过具体到数据类型上，还需要详细讨论一番。
</p>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline21">postgresql字段数据类型</h3>
<div class="outline-text-3" id="text-4-4">
<p>
int , smallint , real , double precision ,
char( N ) , varchar( N ) , date , time , timestamp , and interval ,
</p>



<p>
而postgresql支持的数据类型就多了，有：int，smallint，real，boolean，date，time，integer，text，char(N)，varchar(N) 甚至还有json。这个可以后面慢慢了解，更多细节请具体参看官方文档第八章 Data Types，这是 <a href="http://www.postgresql.org/docs/9.3/static/datatype.html">版本9.3的网页链接</a> 。
</p>

<p>
其中对于整数简单的就用integer，字符串简单的就用text，然后小数简单的就用real，布尔值就用boolean，此外还有一些特殊用途的数据类型值得引起我们的注意，如uuid，json，arrays，money，bytea，还有日期和时间的date，time；几何类型支持的point，line等等，
</p>



<pre>
INSERT INTO weather VALUES (’San Francisco’, 46, 50, 0.25, ’1994-11-27’);
</pre>

<pre>
COPY weather FROM ’/home/user/weather.txt’;
</pre>

<pre>
SELECT city, (temp_hi+temp_lo)/2 AS temp_avg, date FROM weather;
</pre>


<p>
SELECT *
    FROM weather , cities
    WHERE city=name;
</p>




<p>
CURRENT_DATE 目前的日期 可用于默认值。
</p>

<p>
CURRENT_TIME
</p>
</div>
</div>
</div>








<div class="outline-2">
<h2 id="orgheadline25">附录</h2>
<div class="outline-text-2" id="text-5">
</div><div class="outline-3">
<h3 id="orgheadline23">配置文件在那里</h3>
<div class="outline-text-3" id="text-5-1">
<pre>
sudo -u postgres psql postgres

psql&gt; SELECT name,setting FROM pg_settings WHERE category = 'File Locations';
       name        |                 setting                  
-------------------+------------------------------------------
 config_file       | /etc/postgresql/9.3/main/postgresql.conf
 data_directory    | /var/lib/postgresql/9.3/main
 external_pid_file | /var/run/postgresql/9.3-main.pid
 hba_file          | /etc/postgresql/9.3/main/pg_hba.conf
 ident_file        | /etc/postgresql/9.3/main/pg_ident.conf
(5 rows)
</pre>

<p>
但这些配置文件初级用户还不需要太关心。
</p>
</div>
</div>




<div class="outline-3">
<h3 id="orgheadline24">重启postgresql服务</h3>
<div class="outline-text-3" id="text-5-2">
<p>
在linux下可以运行如下命令行来达到目的:
</p>
<pre>
sudo service postgresql restart
</pre>

<p>
或者
</p>

<pre>
sudo service postgresql reload
</pre>
</div>
</div>
</div>


<div class="outline-2">
<h2 id="orgheadline26">参考资料</h2>
<div class="outline-text-2" id="text-6">
<ol class="org-ol">
<li>PostgreSQL官方参考文档</li>
<li>PostgreSQL Up and Running, 2nd Edition</li>
</ol>
</div>
</div>
</div>
</body>
</html>
