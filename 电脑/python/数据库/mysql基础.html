<!DOCTYPE html>
<html>
<head>
<!-- 2016-07-30 六 23:05 -->
<meta  charset="utf-8">
<meta  name="viewport" content="width=device-width, initial-scale=1">
<title>mysql学习笔记</title>
<meta  name="generator" content="Org-mode">
<meta  name="author" content="万泽(德山书生)">
<meta  name="description" content="制作者邮箱：a358003542@gmail.com"
>
<style type="text/css">
body {
    margin-right: auto;
    margin-left: auto;
}

.title {
    display: block;
    text-align: center;
    padding: 10px;
}

.center-block {
    display: block;
    margin-left: auto;
    margin-right: auto;
}

.underline{
    text-decoration: underline;
}
   html, body {
    margin: 0;
    padding: 0;
    font-family:"Microsoft YaHei",Arial,Helvetica,sans-serif,"宋体";
    font-size: 1em;
}

#content {
    display: block;
    margin-left: auto;
    margin-right: auto;
    background:#fcfcfc;
    height:100%;
    margin-left:300px;
    max-width:800px;
    min-height:100%;
    padding:1.618em 3.236em;
}

code {
    padding: 2px 4px;
    color: #c7254e;
    background-color: #f9f2f4;
    border-radius: 4px;
}

pre {
    max-width: 100%;
    display: block;
    padding: 9.5px;
    margin: 0 0 10px;
    font-size: 13px;
    line-height: 1.42857143;
    color: #333;
    background-color: #f5f5f5;
    border: 1px solid #ccc;
    border-radius: 4px;
    overflow : auto;
}


blockquote {
    padding: 10px 20px;
    margin: 0 0 20px;
    font-size: 17.5px;
    border-left: 5px solid #eee;
}

li{
    margin-top: 0.5em;
    margin-bottom: 0.5em;
}

p{
    text-indent:2em;
    line-height:150%;
}

/* dl */
dl {
    margin-top: 0;
    margin-bottom: 20px;
}
dt {
    font-weight: 700;
    line-height: 150%;
    margin-top: 0.5em;
    margin-bottom: 0.5em;
}
dd {
    line-height: 150%;
}

@media (min-width: 768px) {
  dt {
    white-space: nowrap;
  }
}

video{
    max-width: 100%;
    margin-left: auto;
    margin-right: auto;
}

figure p{
    text-indent:0em;
}
img{
    max-width: 100%;
}

embed{
    max-width: 100%;
    margin-left: auto;
    margin-right: auto;
}

figure{
    text-align: center;
}

/*  class  */
.FRAMED{
    max-width:100%;
    border:1px solid ;
    padding: 1em;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

.NOTECARD{
    width: 35%;
    position:relative;
    right: -30%;
    padding: 1em;
    margin:0 auto;
    border: solid 1px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

/*
table
*/
table {
    border-collapse: collapse;
    border-spacing: 0;
    margin: 16px 0;
    empty-cells: show;
    border: 1px solid #ccc;
    width: 100%;
    display: table;
}

table tr {
    border-bottom: 1px solid #ddd;
}
table th,table td{
    padding:8px;
}

table tr:nth-child(even) {
    background-color: #f1f1f1;
}








ul,ol,dl{
    line-height:24px;
    list-style-image:none;
    /* list-style:none; */
    margin:0px 0px 24px 0px;
    padding:0;
}

li{
    margin-left: 24px;
}

dd{
    margin:0;
}

#content .section ul,#content .toctree-wrapper ul,article ul{
    list-style:disc;
    line-height:24px;
    margin-bottom:24px}

#content .section ul li,#content .toctree-wrapper ul li,article ul li{
    list-style:disc;
    margin-left:24px}

#content .section ul li p:last-child,#content .toctree-wrapper ul li p:last-child,article ul li p:last-child{
                                                                                                                                  margin-bottom:0}

#content .section ul li ul,#content .toctree-wrapper ul li ul,article ul li ul{
    margin-bottom:0}

#content .section ul li li,#content .toctree-wrapper ul li li,article ul li li{
    list-style:circle}

#content .section ul li li li,#content .toctree-wrapper ul li li li,article ul li li li{
    list-style:square}

#content .section ul li ol li,#content .toctree-wrapper ul li ol li,article ul li ol li{
    list-style:decimal}

#content .section ol,#content ol,article ol{
    list-style:decimal;
    line-height:24px;
    margin-bottom:24px}

#content .section ol li,#content ol li,article ol li{
    list-style:decimal;
    margin-left:24px}

#content .section ol li p:last-child,#content ol li p:last-child,article ol li p:last-child{
                                                                                                                           margin-bottom:0}

#content .section ol li ul,#content ol li ul,article ol li ul{
    margin-bottom:0}

#content .section ol li ul li,#content ol li ul li,article ol li ul li{
    list-style:disc}

dl dt{
    font-weight:bold;
}

dl p,dl table,dl ul,dl ol{
    margin-bottom:12px !important;
}

dl dd{
    margin:0 0 12px 24px;
}

@media print{
    .codeblock,pre.src{
        white-space:pre.src-wrap}
}

@media print{
    html,body,section{
        background:none !important}

    *{
        box-shadow:none !important;
        text-shadow:none !important;
        filter:none !important;
        -ms-filter:none !important}

    a,a:visited{
          text-decoration:underline}

    pre.src,blockquote{
        page-break-inside:avoid}

    thead{
        display:table-header-group}

    tr,img{
        page-break-inside:avoid}

    img{
        max-width:100% !important}

    @page{
        margin:0.5cm}

    p,h2,h3{
        orphans:3;
        widows:3}

    h2,h3{
        page-break-after:avoid}
}

@media print{
    #postamble{
        display:none}

    #content{
        margin-left:0}
}

@media print{
    #table-of-contents{
        display:none}

    @page{
        size: auto;
        margin: 25mm 25mm 25mm 25mm;}

    body {
        margin: 0px;}
}

@media screen and (max-width: 768px){
}

@media only screen and (max-width: 480px){
}

@media screen and (max-width: 768px){
    .tablet-hide{
        display:none}
}

@media screen and (max-width: 480px){
    .mobile-hide{
        display:none}
}

@media screen and (max-width: 480px){
}

@media screen and (max-width: 768px){
    #content{
        margin-left:0;
        padding: 1em 1em;}

    #content #content{
        padding:1.618em}

    #content.shift{
        position:fixed;
        min-width:100%;
        left:85%;
        top:0;
        height:100%;
        overflow:hidden}
}

@media screen and (min-width: 1400px){
    #content{
        background:rgba(0,0,0,0.05)}

    #content{
        background:#fcfcfc}
}

@media screen and (max-width: 768px){
    #copyright{
        width:85%;
        display:none}

    #copyright.shift{
        display:block}

    img{
        width:100%;
        height:auto}
}

@media screen and (max-width: 480px){
    #content .sidebar{
        width:100%}
}


.figure p{
    color:#000;
    font:italic 85%/1 arial,sans-serif;
    padding:1em 0;
}

.rotate-90{
    -webkit-transform:rotate(90deg);
    -moz-transform:rotate(90deg);
    -ms-transform:rotate(90deg);
    -o-transform:rotate(90deg);
    transform:rotate(90deg);
}

.rotate-270{
    -webkit-transform:rotate(270deg);
    -moz-transform:rotate(270deg);
    -ms-transform:rotate(270deg);
    -o-transform:rotate(270deg);
    transform:rotate(270deg);
}

#toggle-sidebar,
#table-of-contents .close-sidebar {
    display: none;
}

@media screen and (max-width: 768px) {
    #table-of-contents {
        display: none;
        width: 60%;
    }

    #table-of-contents h2 a {
        display: block;
    }

    #table-of-contents:target {
        display: block;
    }

    #copyright, #postamble {
        display: none;
    }

    #toggle-sidebar {
        background-color: #2980B9;
        display: block;
        margin-bottom: 1.6em;
        padding: 0.6em;
        text-align: center;
    }

    #toggle-sidebar h2 {
        color: white;
        font-size: 100%;
        line-height: 50px;
        margin: 0;
        padding: 0;
    }

    #table-of-contents .close-sidebar {
       color: rgba(255, 255, 255, 0.3);
       display: inline-block;
       margin: 0px 10px 0px 45px;
       padding: 10px;
    }
}

*{
    -webkit-box-sizing:border-box;
    -moz-box-sizing:border-box;
    box-sizing:border-box;
}

figcaption,figure,footer,header,hgroup,nav{
    display:block}

ins{
    background:#ff9;
    color:#000;
    text-decoration:none}

mark{
    background:#ff0;
    color:#000;
    font-style:italic;
    font-weight:bold}

small{
    font-size:85%}

sub,sup{
    font-size:75%;
    line-height:0;
    position:relative;
    vertical-align:baseline}

sup{
    top:-0.5em}

sub{
    bottom:-0.25em}

img{
    -ms-interpolation-mode:bicubic;
    vertical-align:middle;
    max-width:100%}

svg:not(:root){
    overflow:hidden}

figure{
    margin:0}

label{
    cursor:pointer}

legend{
    border:0;
    margin-left:-7px;
    padding:0;
    white-space:normal}

#content .danger,#content .error{
    background:#fdf3f2}

legend{
    display:block;
    width:100%;
    border:0;
    padding:0;
    white-space:normal;
    margin-bottom:24px;
    font-size:150%;
    *margin-left:-7px}

label{
    display:block;
    margin:0 0 0.3125em 0;
    color:#333;
    font-size:90%}

a{
    color:#2980B9;
    text-decoration:none;
    cursor:pointer}


a:hover,a:active{
    outline:0;
}

a:hover{
    color:#3091d1}

a:visited{
    color:#9B59B6}

.left{
    text-align:left}

.center{
    text-align:center}

.right{
    text-align:right}

hr{
    display:block;
    height:1px;
    border:0;
    border-top:1px solid #e1e4e5;
    margin:24px 0;
    padding:0}

#table-of-contents li{
    list-style:none;
    margin-left: 0px;
}

#table-of-contents header{
    height:32px;
    display:inline-block;
    line-height:32px;
    padding:0 1.618em;
    display:block;
    font-weight:bold;
    text-transform:uppercase;
    font-size:80%;
    color:#2980B9;
    white-space:nowrap}

#table-of-contents ul{
    margin-bottom:0}

#table-of-contents li.divide-top{
    border-top:solid 1px #404040}

#table-of-contents li.divide-bottom{
    border-bottom:solid 1px #404040}

#table-of-contents li.current{
    background:#e3e3e3}

#table-of-contents li.current a{
    color:gray;
    border-right:solid 1px #c9c9c9;
    padding:0.4045em 2.427em}

#table-of-contents li.current a:hover{
    background:#d6d6d6}

#table-of-contents li a{
    /* color:#404040; */
    padding:0.4045em 1.618em;
    position:relative;
    /* background:#fcfcfc; */
    border:none;
    /* border-bottom:solid 1px #c9c9c9; */
    /* border-top:solid 1px #c9c9c9; */
    padding-left:1.618em -4px}

#table-of-contents li.on a:hover,#table-of-contents li.current>a:hover{
    background:#fcfcfc}

#table-of-contents li ul li a{
    /* background:#c9c9c9; */
    padding:0.4045em 2.427em}

#table-of-contents li ul li ul li a{
    padding:0.4045em 3.236em}

#table-of-contents li.current ul{
    display:block}

/* #table-of-contents li ul{ */
/*     margin-bottom:0; */
/*     display:none} */

#table-of-contents .local-toc li ul{
    display:block}

#table-of-contents li ul li a{
    margin-bottom:0;
    color:#b3b3b3;
    font-weight:normal}

#table-of-contents a{
    display:inline-block;
    line-height:18px;
    padding:0.4045em 1.618em;
    display:block;
    position:relative;
    font-size:90%;
    color:#b3b3b3;
    direction: ltr;
}

#table-of-contents a:hover{
    background-color:#4e4a4a;
    cursor:pointer}

/* #text-table-of-contents { */
/*     overflow:scroll; */
/* } */

#table-of-contents{
    position:fixed;
    top:0;
    left:0;
    width:300px;
    overflow-x:hidden;
    overflow-y:scroll;
    height:100%;
    background:#343131;
    z-index:200;
    scrollbar-base-color: #1F1D1D;
    scrollbar-arrow-color: #b3b3b3;
    scrollbar-shadow-color: #1F1D1D;
    scrollbar-track-color : #343131;
}

#table-of-contents h2{
    z-index:200;
    background-color:#2980B9;
    text-align:center;
    padding:0.809em;
    display:block;
    color:#fcfcfc;
    font-size: 100%;
    margin-bottom:0.809em}

ul.nav li ul li {
    display: none;
}

ul.nav li ul li ul li {
    display: none;
}

ul.nav li.active ul li {
    display: inline;
}

ul.nav li.active ul li ul li {
    display: inline;
}

ul.nav li.active ul li a {
    background-color: #E3E3E3;
    color: #8099B0;
    border-right:solid 1px #c9c9c9 !important;
}

ul.nav li.active ul li.active a {
    background-color: #C9C9C9;
    color: black !important;
    font-weight: bold !important;
}

ul.nav li.active ul li.active ul li.active a {
    color: black !important;
    font-weight: bold !important;
    display: block !important;
}

ul.nav li.active ul li.active ul li a {
    color: #808080 !important;
    font-weight: normal !important;
    display: block !important;
}

ul.nav li.active ul li ul li a {
    display: none !important;
}


ul.nav li ul li ul li ul li {
    display: none !important; /* as long as nav is on multiple levels of ul */
    /* display: none; /* as long as nav is on multiple levels of ul *\/ */
}

ul.nav li.active > a {
    border-bottom:solid 1px #c9c9c9 !important; /* XXX Restrict it to 2nd level */
    border-right:solid 1px #c9c9c9 !important;
}

ul.nav li.active a {
    color: gray !important;
    font-weight:bold;
    background-color: white;
    border-right:solid 0px white !important;
}

ul.nav > li.active > a {
    color: black !important;
}

footer{
    color:#999}

footer p{
    margin-bottom:12px}

#copyright, #postamble{
    position:fixed;
    bottom:0;
    left:0;
    width:300px;
    color:#fcfcfc;
    background:#1f1d1d;
    border-top:solid 10px #343131;
    font-family:"Lato","proxima-nova","Helvetica Neue",Arial,sans-serif;
    font-size: 90%;
    z-index:400;
    padding:12px;
}

#postamble .author {
    font-size: 100%;
    margin-bottom: 0px;
}

#postamble .date {
    font-size: 90%;
    margin-bottom: 0px;
    color: #27AE60;
}

#postamble .creator,#postamble .validation {
    display:none;
}

#copyright a{
    color:#2980B9;
    text-decoration:none}

#copyright .rst-current-version{
    padding:12px;
    background-color:#272525;
    display:block;
    text-align:right;
    font-size:90%;
    cursor:pointer;
    color:#27AE60;
    *zoom:1}

#content img{
    max-width:100%;
    height:auto !important}

#content div.figure{
    margin-bottom:24px}

#content div.figure.align-center{
    text-align:center}

#content .section>img,#content .section>a>img{
    margin-bottom:24px}

.verse{
    border-left:5px solid #6AB0DE;
    background-color: #E7F2FA;
    padding: 6px 20px;
    font-style:italic;
}

#content .note .last,#content .attention .last,#content .caution .last,#content .danger .last,#content .error .last,#content .hint .last,#content .important .last,#content .tip .last,#content .warning .last,#content .seealso .last,#content .admonitiontodo .last{
    margin-bottom:0}

#content .admonition-title:before{
    margin-right:4px}

#content .section ol p,#content .section ul p{
    margin-bottom:12px}

#content h1 .headerlink,#content h2 .headerlink,#content h3 .headerlink,#content h4 .headerlink,#content h5 .headerlink,#content h6 .headerlink,#content dl dt .headerlink{
    display:none;
    visibility:hidden;
    font-size:14px}

#content h1 .headerlink:after,#content h2 .headerlink:after,#content h3 .headerlink:after,#content h4 .headerlink:after,#content h5 .headerlink:after,#content h6 .headerlink:after,#content dl dt .headerlink:after{
    visibility:visible;
    content:"";
    font-family:FontAwesome;
    display:inline-block}

#content h1:hover .headerlink,#content h2:hover .headerlink,#content h3:hover .headerlink,#content h4:hover .headerlink,#content h5:hover .headerlink,#content h6:hover .headerlink,#content dl dt:hover .headerlink{
    display:inline-block}

#content .sidebar{
    float:right;
    width:40%;
    display:block;
    margin:0 0 24px 24px;
    padding:24px;
    background:#f3f6f6;
    border:solid 1px #e1e4e5}

#content .sidebar p,#content .sidebar ul,#content .sidebar dl{
    font-size:90%}

#content .sidebar .last{
    margin-bottom:0}

#content .sidebar .sidebar-title{
    display:block;
    font-family:"Roboto Slab","ff-tisa-web-pro","Georgia",Arial,sans-serif;
    font-weight:bold;
    background:#e1e4e5;
    padding:6px 12px;
    margin:-24px;
    margin-bottom:24px;
    font-size:100%}

#content .footnote-reference,#content .citation-reference{
    vertical-align:super;
    font-size:90%}

span[id*='MathJax-Span']{
    color:#404040}

.math{
    text-align:center}

#footnotes{
    border-top:1px solid #e1e4e5;
    padding-top: 36px;
}

h2.footnotes{
    display:none;
}


.footnum:before, .footref:before{
    content:"[";
}

.footnum:after, .footref:after{
    content:"]";
}

.footpara {
    color: #999;
    font-size: 90%;
    font-family:"Lato","proxima-nova","Helvetica Neue",Arial,sans-serif;
    padding-bottom: 8px;
    padding-left: 16px;
    padding-right: 16px;
    padding-top: 8px;
    line-height: 1.25em;
    /* display: inline; */
}
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #8f5902; font-style: italic } /* Comment */
.highlight .err { color: #a40000; border: 1px solid #ef2929 } /* Error */
.highlight .g { color: #000000 } /* Generic */
.highlight .k { color: #204a87; font-weight: bold } /* Keyword */
.highlight .l { color: #000000 } /* Literal */
.highlight .n { color: #000000 } /* Name */
.highlight .o { color: #ce5c00; font-weight: bold } /* Operator */
.highlight .x { color: #000000 } /* Other */
.highlight .p { color: #000000; font-weight: bold } /* Punctuation */
.highlight .ch { color: #8f5902; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #8f5902; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #8f5902; font-style: italic } /* Comment.Preproc */
.highlight .cpf { color: #8f5902; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #8f5902; font-style: italic } /* Comment.Single */
.highlight .cs { color: #8f5902; font-style: italic } /* Comment.Special */
.highlight .gd { color: #a40000 } /* Generic.Deleted */
.highlight .ge { color: #000000; font-style: italic } /* Generic.Emph */
.highlight .gr { color: #ef2929 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #000000; font-style: italic } /* Generic.Output */
.highlight .gp { color: #8f5902 } /* Generic.Prompt */
.highlight .gs { color: #000000; font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #a40000; font-weight: bold } /* Generic.Traceback */
.highlight .kc { color: #204a87; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #204a87; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #204a87; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #204a87; font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: #204a87; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #204a87; font-weight: bold } /* Keyword.Type */
.highlight .ld { color: #000000 } /* Literal.Date */
.highlight .m { color: #0000cf; font-weight: bold } /* Literal.Number */
.highlight .s { color: #4e9a06 } /* Literal.String */
.highlight .na { color: #c4a000 } /* Name.Attribute */
.highlight .nb { color: #204a87 } /* Name.Builtin */
.highlight .nc { color: #000000 } /* Name.Class */
.highlight .no { color: #000000 } /* Name.Constant */
.highlight .nd { color: #5c35cc; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #ce5c00 } /* Name.Entity */
.highlight .ne { color: #cc0000; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #000000 } /* Name.Function */
.highlight .nl { color: #f57900 } /* Name.Label */
.highlight .nn { color: #000000 } /* Name.Namespace */
.highlight .nx { color: #000000 } /* Name.Other */
.highlight .py { color: #000000 } /* Name.Property */
.highlight .nt { color: #204a87; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #000000 } /* Name.Variable */
.highlight .ow { color: #204a87; font-weight: bold } /* Operator.Word */
.highlight .w { color: #f8f8f8; text-decoration: underline } /* Text.Whitespace */
.highlight .mb { color: #0000cf; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #0000cf; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #0000cf; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000cf; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #0000cf; font-weight: bold } /* Literal.Number.Oct */
.highlight .sb { color: #4e9a06 } /* Literal.String.Backtick */
.highlight .sc { color: #4e9a06 } /* Literal.String.Char */
.highlight .sd { color: #8f5902; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #4e9a06 } /* Literal.String.Double */
.highlight .se { color: #4e9a06 } /* Literal.String.Escape */
.highlight .sh { color: #4e9a06 } /* Literal.String.Heredoc */
.highlight .si { color: #4e9a06 } /* Literal.String.Interpol */
.highlight .sx { color: #4e9a06 } /* Literal.String.Other */
.highlight .sr { color: #4e9a06 } /* Literal.String.Regex */
.highlight .s1 { color: #4e9a06 } /* Literal.String.Single */
.highlight .ss { color: #4e9a06 } /* Literal.String.Symbol */
.highlight .bp { color: #3465a4 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #000000 } /* Name.Variable.Class */
.highlight .vg { color: #000000 } /* Name.Variable.Global */
.highlight .vi { color: #000000 } /* Name.Variable.Instance */
.highlight .il { color: #0000cf; font-weight: bold } /* Literal.Number.Integer.Long */
</style>
</head>
<body>
<div id="content">
<header>
<h1 class="title">mysql学习笔记</h1>
</header><nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline1">1. 简介</a></li>
<li><a href="#orgheadline16">2. mysql入门</a>
<ul>
<li><a href="#orgheadline2">2.1. 登录</a></li>
<li><a href="#orgheadline3">2.2. mysql数据库</a></li>
<li><a href="#orgheadline4">2.3. 查看数据库情况</a></li>
<li><a href="#orgheadline5">2.4. 切换数据库</a></li>
<li><a href="#orgheadline6">2.5. 查看表格情况</a></li>
<li><a href="#orgheadline7">2.6. 简单检索某个表格</a></li>
<li><a href="#orgheadline8">2.7. 创建用户</a></li>
<li><a href="#orgheadline9">2.8. 删除用户</a></li>
<li><a href="#orgheadline10">2.9. 更新记录</a></li>
<li><a href="#orgheadline11">2.10. 创建数据库</a></li>
<li><a href="#orgheadline12">2.11. 创建表格</a></li>
<li><a href="#orgheadline13">2.12. 插入数据</a></li>
<li><a href="#orgheadline14">2.13. 删除table</a></li>
<li><a href="#orgheadline15">2.14. 删除database</a></li>
</ul>
</li>
<li><a href="#orgheadline25">3. mysql进阶</a>
<ul>
<li><a href="#orgheadline17">3.1. 创建表格</a></li>
<li><a href="#orgheadline24">3.2. 插入数据</a>
<ul>
<li><a href="#orgheadline18">3.2.1. 子查询</a></li>
<li><a href="#orgheadline19">3.2.2. insert where语句</a></li>
<li><a href="#orgheadline20">3.2.3. 交叉连接</a></li>
<li><a href="#orgheadline21">3.2.4. 内连接</a></li>
<li><a href="#orgheadline22">3.2.5. union all</a></li>
<li><a href="#orgheadline23">3.2.6. 不能重复刷的部分</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgheadline26">4. 别名</a></li>
<li><a href="#orgheadline27">5. 去除重复的行</a></li>
<li><a href="#orgheadline30">6. 附录</a>
<ul>
<li><a href="#orgheadline28">6.1. 演示例子的补充信息</a></li>
<li><a href="#orgheadline29">6.2. 参考资料</a></li>
</ul>
</li>
</ul>
</div>
</nav>

<div class="outline-2">
<h2 id="orgheadline1">简介</h2>
<div class="outline-text-2" id="text-1">
<p>
本文已经假设读者对sql有一个初步的认识了，然后更加具体的讨论mysql的相关细节。安装在ubuntu下就简单用apt-get安装之，如下所示，不赘述了。
</p>

<div class="highlight"><pre><span></span>sudo apt-get  install mysql-server mysql-client
</pre></div>
</div>
</div>

<div class="outline-2">
<h2 id="orgheadline16">mysql入门</h2>
<div class="outline-text-2" id="text-2">
<p>
本小节的代码依次演示了第一个例子，好让读者对mysql有个初步的认识。
</p>
</div>

<div class="outline-3">
<h3 id="orgheadline2">登录</h3>
<div class="outline-text-3" id="text-2-1">
<p>
以root用户登录
</p>
<pre>
mysql -u root -p
</pre>

<p>
具体密码是多少要根据你安装mysql时的情况来，若没有设置密码则直接按Enter。
</p>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline3">mysql数据库</h3>
<div class="outline-text-3" id="text-2-2">
<p>
mysql里面默认有个和自身配置相关的数据库，名字就叫做mysql。
</p>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline4">查看数据库情况</h3>
<div class="outline-text-3" id="text-2-3">
<div class="highlight"><pre><span></span><span class="k">show</span> <span class="k">databases</span><span class="p">;</span>
</pre></div>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline5">切换数据库</h3>
<div class="outline-text-3" id="text-2-4">
<p>
我们先切换到那个mysql数据库看一下。
</p>

<div class="highlight"><pre><span></span><span class="k">use</span> <span class="n">mysql</span><span class="p">;</span>
</pre></div>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline6">查看表格情况</h3>
<div class="outline-text-3" id="text-2-5">
<div class="highlight"><pre><span></span><span class="k">show</span> <span class="kp">tables</span><span class="p">;</span>
</pre></div>

<p>
上面描述的这些过程你也可以用GUI程序（比如 <strong>emma</strong> 等）来点开看一下。我们先看到user这个表格，这个表格里面存储着mysql用户的一些信息。
</p>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline7">简单检索某个表格</h3>
<div class="outline-text-3" id="text-2-6">
<div class="highlight"><pre><span></span><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">user</span><span class="p">;</span>
</pre></div>

<p>
因为内容较多，可能显示效果不太好。
</p>
</div>
</div>


<div class="outline-3">
<h3 id="orgheadline8">创建用户</h3>
<div class="outline-text-3" id="text-2-7">
<p>
给user表格插入一条记录实际上就是新建一个新的mysql用户，如下所示:
</p>
<div class="highlight"><pre><span></span><span class="k">insert</span> <span class="k">into</span> <span class="nf">user</span><span class="p">(</span><span class="n">host</span><span class="p">,</span><span class="n">user</span><span class="p">,</span><span class="n">password</span><span class="p">,</span><span class="n">select_priv</span><span class="p">,</span><span class="n">insert_priv</span><span class="p">)</span>
<span class="k">values</span><span class="p">(</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span><span class="s1">&#39;wanze&#39;</span><span class="p">,</span><span class="nf">password</span><span class="p">(</span><span class="s1">&#39;123456&#39;</span><span class="p">),</span><span class="s1">&#39;Y&#39;</span><span class="p">,</span><span class="s1">&#39;Y&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline9">删除用户</h3>
<div class="outline-text-3" id="text-2-8">
<p>
给user表格删除一条记录就是删除某个mysql用户，让我们把前面创建的这个用户删除了:
</p>
<div class="highlight"><pre><span></span><span class="k">delete</span> <span class="k">from</span> <span class="n">user</span> <span class="k">where</span> <span class="n">user</span> <span class="o">=</span> <span class="s1">&#39;wanze&#39;</span><span class="p">;</span>
</pre></div>

<p>
好吧，继续再把那个用户加进去，然后我们注意到之前只给了那个用户select和insert的权限的，现在让我们再多给他几个权限。
</p>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline10">更新记录</h3>
<div class="outline-text-3" id="text-2-9">
<div class="highlight"><pre><span></span><span class="n">mysql</span><span class="o">&gt;</span> <span class="k">update</span> <span class="n">user</span>
    <span class="o">-&gt;</span> <span class="kt">set</span> <span class="n">update_priv</span> <span class="o">=</span> <span class="s1">&#39;Y&#39;</span><span class="p">,</span>
    <span class="o">-&gt;</span> <span class="n">delete_priv</span> <span class="o">=</span> <span class="s1">&#39;Y&#39;</span><span class="p">,</span>
    <span class="o">-&gt;</span> <span class="n">create_priv</span> <span class="o">=</span> <span class="s1">&#39;Y&#39;</span><span class="p">,</span>
    <span class="o">-&gt;</span> <span class="n">drop_priv</span> <span class="o">=</span> <span class="s1">&#39;Y&#39;</span>
    <span class="o">-&gt;</span> <span class="k">where</span> <span class="n">user</span> <span class="o">=</span> <span class="s1">&#39;wanze&#39;</span><span class="p">;</span>
</pre></div>

<p>
现在这个用户又新加上了update，delete，create和drop权限了。然后我们看到用户还有很多其他权限设置，
</p>

<p>
然后还有一种方式是赋予该用户之于某个数据库所有的权限。
</p>

<div class="highlight"><pre><span></span><span class="k">grant</span> <span class="k">all</span> <span class="n">privileges</span> <span class="k">on</span> <span class="n">test</span><span class="p">.</span><span class="o">*</span> <span class="k">to</span> <span class="s1">&#39;test&#39;</span><span class="o">@</span><span class="s1">&#39;localhost&#39;</span><span class="p">;</span>
</pre></div>

<p>
这里的test是具体的database name，第二个test是新加入的用户名【这里后面还可以加上 identified by 'thepassword' 来控制新加用户的密码。】。这种方式除了user里面加入了test这个新用户之外，在mysql数据库的db表格里面还加入了一条新的记录。前面那种用户设置权限的应该是对所有数据库都有权限，而这里只针对某一数据库有权限。具体权限管理还有很多内容，这里先略过了。
</p>
</div>
</div>


<div class="outline-3">
<h3 id="orgheadline11">创建数据库</h3>
<div class="outline-text-3" id="text-2-10">
<p>
我们先创建一个新的数据库:
</p>
<div class="highlight"><pre><span></span><span class="k">create</span> <span class="k">database</span> <span class="n">test</span><span class="p">;</span>
</pre></div>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline12">创建表格</h3>
<div class="outline-text-3" id="text-2-11">
<div class="highlight"><pre><span></span><span class="n">mysql</span><span class="o">&gt;</span> <span class="k">create</span> <span class="k">table</span> <span class="nf">test</span><span class="p">(</span><span class="n">x</span> <span class="kt">int</span><span class="p">,</span><span class="n">y</span> <span class="kt">integer</span><span class="p">,</span><span class="n">z</span> <span class="kt">integer</span><span class="p">);</span>
</pre></div>

<p>
这里就简单创建了一个名叫test的表格，然后定义表头为三个整数，integer和int是一个意思。
</p>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline13">插入数据</h3>
<div class="outline-text-3" id="text-2-12">
<p>
插入数据和其他sql数据库一样还是insert into这样的语句格式。
</p>
<div class="highlight"><pre><span></span><span class="n">mysql</span><span class="o">&gt;</span> <span class="k">insert</span> <span class="k">into</span> <span class="nf">test</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">)</span> <span class="k">values</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="p">;</span>
</pre></div>

<p>
第一个例子就到这里了，简单了解了一下mysql的情况，下面继续详细的讨论。
</p>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline14">删除table</h3>
<div class="outline-text-3" id="text-2-13">
<div class="highlight"><pre><span></span><span class="k">drop</span> <span class="k">table</span> <span class="n">test</span><span class="p">;</span>
</pre></div>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline15">删除database</h3>
<div class="outline-text-3" id="text-2-14">
<div class="highlight"><pre><span></span><span class="k">drop</span> <span class="k">database</span> <span class="n">test</span><span class="p">;</span>
</pre></div>

<p>
至此我们新建的那个数据库的所有信息都被删除了，下面进入第二个例子，我们将建立更具有现实意义的数据库。
</p>
</div>
</div>
</div>

<div class="outline-2">
<h2 id="orgheadline25">mysql进阶</h2>
<div class="outline-text-2" id="text-3">
<p>
第二个例子绝不是一个很小型的例子，而是一个几乎涉及mysql数据库方方面面的例子，内容是很丰富的，我们慢慢继续下去吧。
</p>

<p>
首先创建learning_example database。然后创建一个student用户，其对learning_example database拥有所有的权限。
</p>

<div class="highlight"><pre><span></span><span class="n">mysql</span> <span class="o">-</span><span class="n">u</span> <span class="n">root</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="k">create</span> <span class="k">database</span> <span class="n">learning_example</span><span class="p">;</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="k">grant</span> <span class="k">all</span> <span class="n">privileges</span> <span class="k">on</span> <span class="n">learning_example</span><span class="p">.</span><span class="o">*</span> <span class="k">to</span> <span class="s1">&#39;student&#39;</span><span class="o">@</span><span class="s1">&#39;localhost&#39;</span><span class="p">;</span>
</pre></div>
</div>


<div class="outline-3">
<h3 id="orgheadline17">创建表格</h3>
<div class="outline-text-3" id="text-3-1">
<p>
写好sql语句文件然后刷进去，如下所示:
</p>
<pre>
mysql -u student learning_example &lt; mysql_learning_example.sql
</pre>
<p>
这里的 <code>-u</code> 接用户名，然后后面跟要操作的database名字。
</p>

<p>
现在这个文件就简单写上这么一句:
</p>
<div class="highlight"><pre><span></span><span class="k">create</span> <span class="k">table</span> <span class="nf">department</span>
 <span class="p">(</span><span class="n">dept_id</span> <span class="kt">smallint</span> <span class="k">unsigned</span> <span class="k">not</span> <span class="no">null</span> <span class="kp">auto_increment</span><span class="p">,</span>
  <span class="n">name</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="k">constraint</span> <span class="n">pk_department</span> <span class="k">primary</span> <span class="k">key</span> <span class="p">(</span><span class="n">dept_id</span><span class="p">)</span>
 <span class="p">);</span>
</pre></div>

<p>
这里前面的意思是很明显的，就是新建department这个table，然后定义一列dept_id ，其为 <code>smallint</code> ， <code>unsigned</code> （就是从0到65535），然后 <code>not null</code> 说这列不能为空，然后 <code>auto_increment</code> 说这列的数值自动增加（主要是主键id需要这个）；然后name这一列是 <code>varchar(20)</code> ，是变长字符串，最大长度20，类似的还有 <code>char(20)</code> ，其为定长字符串，后面都会 <span class="underline">自动填充空格</span> ，同样not null限定非空。然后后面的约束语句需要额外说一下。
</p>

<p>
<code>constraint</code> 是约束的意思，然后后面跟pk_department（这个名字貌似是随意的）指约束department这个table的primary key，后面跟上primary key (dept_id) ，即约束table department的主键值为 <code>dept_id</code> 这一列。
</p>

<p>
继续往下讨论，现在文件改成这个样子:
</p>

<div class="highlight"><pre><span></span><span class="k">create</span> <span class="k">table</span> <span class="k">if</span> <span class="k">not</span> <span class="k">exists</span> <span class="nf">department</span>
 <span class="p">(</span><span class="n">dept_id</span> <span class="kt">smallint</span> <span class="k">unsigned</span> <span class="k">not</span> <span class="no">null</span> <span class="kp">auto_increment</span><span class="p">,</span>
  <span class="n">name</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="k">constraint</span> <span class="n">pk_department</span> <span class="k">primary</span> <span class="k">key</span> <span class="p">(</span><span class="n">dept_id</span><span class="p">)</span>
 <span class="p">);</span>

 <span class="k">create</span> <span class="k">table</span> <span class="k">if</span> <span class="k">not</span> <span class="k">exists</span> <span class="nf">branch</span>
 <span class="p">(</span><span class="n">branch_id</span> <span class="kt">smallint</span> <span class="k">unsigned</span> <span class="k">not</span> <span class="no">null</span> <span class="kp">auto_increment</span><span class="p">,</span>
  <span class="n">name</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">address</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>
  <span class="n">city</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
  <span class="n">state</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
  <span class="n">zip</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">12</span><span class="p">),</span>
  <span class="k">constraint</span> <span class="n">pk_branch</span> <span class="k">primary</span> <span class="k">key</span> <span class="p">(</span><span class="n">branch_id</span><span class="p">)</span>
 <span class="p">);</span>
</pre></div>

<p>
注意前面的创建department表格语句那里加上了 <code>if not exists</code> ，这样如果表格不存在才会新建该table，从而避免了sql文件重复刷的时候出错。下面那个新建branch表格的sql语句并没有增加新的东西，所以我们继续往下看。
</p>

<div class="highlight"><pre><span></span><span class="k">create</span> <span class="k">table</span> <span class="k">if</span> <span class="k">not</span> <span class="k">exists</span> <span class="nf">employee</span>
 <span class="p">(</span><span class="n">emp_id</span> <span class="kt">smallint</span> <span class="k">unsigned</span> <span class="k">not</span> <span class="no">null</span> <span class="kp">auto_increment</span><span class="p">,</span>
  <span class="n">fname</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">lname</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">start_date</span> <span class="kt">date</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">end_date</span> <span class="kt">date</span><span class="p">,</span>
  <span class="n">superior_emp_id</span> <span class="kt">smallint</span> <span class="k">unsigned</span><span class="p">,</span>
  <span class="n">dept_id</span> <span class="kt">smallint</span> <span class="k">unsigned</span><span class="p">,</span>
  <span class="n">title</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
  <span class="n">assigned_branch_id</span> <span class="kt">smallint</span> <span class="k">unsigned</span><span class="p">,</span>
  <span class="k">constraint</span> <span class="n">fk_e_emp_id</span>
    <span class="k">foreign</span> <span class="k">key</span> <span class="p">(</span><span class="n">superior_emp_id</span><span class="p">)</span> <span class="k">references</span> <span class="nf">employee</span> <span class="p">(</span><span class="n">emp_id</span><span class="p">),</span>
  <span class="k">constraint</span> <span class="n">fk_dept_id</span>
    <span class="k">foreign</span> <span class="k">key</span> <span class="p">(</span><span class="n">dept_id</span><span class="p">)</span> <span class="k">references</span> <span class="nf">department</span> <span class="p">(</span><span class="n">dept_id</span><span class="p">),</span>
  <span class="k">constraint</span> <span class="n">fk_e_branch_id</span>
    <span class="k">foreign</span> <span class="k">key</span> <span class="p">(</span><span class="n">assigned_branch_id</span><span class="p">)</span> <span class="k">references</span> <span class="nf">branch</span> <span class="p">(</span><span class="n">branch_id</span><span class="p">),</span>
  <span class="k">constraint</span> <span class="n">pk_employee</span> <span class="k">primary</span> <span class="k">key</span> <span class="p">(</span><span class="n">emp_id</span><span class="p">)</span>
 <span class="p">);</span>
</pre></div>

<p>
我们继续来看这个创建employee table语句，fname是first name的缩写，然后lname是lastname的缩写。start_date和end_date应该是雇佣时间和解聘时间的意思，其中解聘时间可以为空，就说明该雇员还在公司工作。然后其都为 <code>date</code> 数据类型。值得一提的是mysql的date类型只能存储公元前1000年到公元9999年之间的date。
</p>

<p>
后面superior_emp_id是该雇员的上司的id号，然后dept_id是该雇员所在部门号，然后assigned_branch_id是对于该雇员分配的分公司id号。该table的约束主键值是emp_id。
</p>

<p>
接下来重点讲一下 <code>foreign key</code> 约束的写法。
</p>
<pre>
constraint fk_e_emp_id
  foreign key (superior_emp_id) references employee (emp_id),
</pre>
<p>
这里fk_e_emp_id这个名字带有一定的随意性，大致表达出fk_然后某个table下的某一列即可。然后 foreign key 外键值 (superior_emp_id) 即这一列是外键值，具体references 引用自 employee 这个表格的(emp_id) 这一列。总的意思就是superiro_emp_id这一列是一个外键值约束列，其值只可能取自employee表格的emp_id这一列，因为这里具体的逻辑含义就是其值引用自它。比如说雇员张三在这里的id是3，张三的上司是张三丰，其id是4。那么张三如果要修改自己的上司值，就必须是本雇员列表已经有了的id号的其他雇员。（外键引用主要用于SQL表格中所谓的one to many 或者 many to one 的情况，具体就是用内连接查询，这样该外键值约束列的可能对应取值是另外一个表格的很多列，这个后面再详细讨论。）
</p>

<p>
继续刷下去，强烈推荐读者用emma或者其他什么GUI程序来实时查看一下:
</p>
<div class="highlight"><pre><span></span><span class="k">create</span> <span class="k">table</span> <span class="k">if</span> <span class="k">not</span> <span class="k">exists</span> <span class="nf">product_type</span>
 <span class="p">(</span><span class="n">product_type_cd</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">name</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="k">constraint</span> <span class="n">pk_product_type</span> <span class="k">primary</span> <span class="k">key</span> <span class="p">(</span><span class="n">product_type_cd</span><span class="p">)</span>
 <span class="p">);</span>

 <span class="k">create</span> <span class="k">table</span> <span class="k">if</span> <span class="k">not</span> <span class="k">exists</span> <span class="nf">product</span>
 <span class="p">(</span><span class="n">product_cd</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">name</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">product_type_cd</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">date_offered</span> <span class="kt">date</span><span class="p">,</span>
  <span class="n">date_retired</span> <span class="kt">date</span><span class="p">,</span>
  <span class="k">constraint</span> <span class="n">fk_product_type_cd</span> <span class="k">foreign</span> <span class="k">key</span> <span class="p">(</span><span class="n">product_type_cd</span><span class="p">)</span>
    <span class="k">references</span> <span class="nf">product_type</span> <span class="p">(</span><span class="n">product_type_cd</span><span class="p">),</span>
  <span class="k">constraint</span> <span class="n">pk_product</span> <span class="k">primary</span> <span class="k">key</span> <span class="p">(</span><span class="n">product_cd</span><span class="p">)</span>
 <span class="p">);</span>

 <span class="k">create</span> <span class="k">table</span> <span class="k">if</span> <span class="k">not</span> <span class="k">exists</span> <span class="nf">customer</span>
 <span class="p">(</span><span class="n">cust_id</span> <span class="kt">integer</span> <span class="k">unsigned</span> <span class="k">not</span> <span class="no">null</span> <span class="kp">auto_increment</span><span class="p">,</span>
  <span class="n">fed_id</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">cust_type_cd</span> <span class="kt">enum</span><span class="p">(</span><span class="s1">&#39;I&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">address</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>
  <span class="n">city</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
  <span class="n">state</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
  <span class="n">postal_code</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
  <span class="k">constraint</span> <span class="n">pk_customer</span> <span class="k">primary</span> <span class="k">key</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">)</span>
 <span class="p">);</span>

 <span class="k">create</span> <span class="k">table</span> <span class="k">if</span> <span class="k">not</span> <span class="k">exists</span> <span class="nf">individual</span>
 <span class="p">(</span><span class="n">cust_id</span> <span class="kt">integer</span> <span class="k">unsigned</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">fname</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">lname</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">birth_date</span> <span class="kt">date</span><span class="p">,</span>
  <span class="k">constraint</span> <span class="n">fk_i_cust_id</span> <span class="k">foreign</span> <span class="k">key</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">)</span>
    <span class="k">references</span> <span class="nf">customer</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">),</span>
  <span class="k">constraint</span> <span class="n">pk_individual</span> <span class="k">primary</span> <span class="k">key</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">)</span>
 <span class="p">);</span>

 <span class="k">create</span> <span class="k">table</span> <span class="k">if</span> <span class="k">not</span> <span class="k">exists</span> <span class="nf">business</span>
 <span class="p">(</span><span class="n">cust_id</span> <span class="kt">integer</span> <span class="k">unsigned</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">name</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">state_id</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">incorp_date</span> <span class="kt">date</span><span class="p">,</span>
  <span class="k">constraint</span> <span class="n">fk_b_cust_id</span> <span class="k">foreign</span> <span class="k">key</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">)</span>
    <span class="k">references</span> <span class="nf">customer</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">),</span>
  <span class="k">constraint</span> <span class="n">pk_business</span> <span class="k">primary</span> <span class="k">key</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">)</span>
 <span class="p">);</span>


 <span class="k">create</span> <span class="k">table</span> <span class="k">if</span> <span class="k">not</span> <span class="k">exists</span> <span class="nf">officer</span>
 <span class="p">(</span><span class="n">officer_id</span> <span class="kt">smallint</span> <span class="k">unsigned</span> <span class="k">not</span> <span class="no">null</span> <span class="kp">auto_increment</span><span class="p">,</span>
  <span class="n">cust_id</span> <span class="kt">integer</span> <span class="k">unsigned</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">fname</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">lname</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">title</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
  <span class="n">start_date</span> <span class="kt">date</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">end_date</span> <span class="kt">date</span><span class="p">,</span>
  <span class="k">constraint</span> <span class="n">fk_o_cust_id</span> <span class="k">foreign</span> <span class="k">key</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">)</span>
    <span class="k">references</span> <span class="nf">business</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">),</span>
  <span class="k">constraint</span> <span class="n">pk_officer</span> <span class="k">primary</span> <span class="k">key</span> <span class="p">(</span><span class="n">officer_id</span><span class="p">)</span>
 <span class="p">);</span>

 <span class="k">create</span> <span class="k">table</span> <span class="k">if</span> <span class="k">not</span> <span class="k">exists</span> <span class="nf">account</span>
 <span class="p">(</span><span class="n">account_id</span> <span class="kt">integer</span> <span class="k">unsigned</span> <span class="k">not</span> <span class="no">null</span> <span class="kp">auto_increment</span><span class="p">,</span>
  <span class="n">product_cd</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">cust_id</span> <span class="kt">integer</span> <span class="k">unsigned</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">open_date</span> <span class="kt">date</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">close_date</span> <span class="kt">date</span><span class="p">,</span>
  <span class="n">last_activity_date</span> <span class="kt">date</span><span class="p">,</span>
  <span class="n">status</span> <span class="kt">enum</span><span class="p">(</span><span class="s1">&#39;ACTIVE&#39;</span><span class="p">,</span><span class="s1">&#39;CLOSED&#39;</span><span class="p">,</span><span class="s1">&#39;FROZEN&#39;</span><span class="p">),</span>
  <span class="n">open_branch_id</span> <span class="kt">smallint</span> <span class="k">unsigned</span><span class="p">,</span>
  <span class="n">open_emp_id</span> <span class="kt">smallint</span> <span class="k">unsigned</span><span class="p">,</span>
  <span class="n">avail_balance</span> <span class="kt">float</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
  <span class="n">pending_balance</span> <span class="kt">float</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
  <span class="k">constraint</span> <span class="n">fk_product_cd</span> <span class="k">foreign</span> <span class="k">key</span> <span class="p">(</span><span class="n">product_cd</span><span class="p">)</span>
    <span class="k">references</span> <span class="nf">product</span> <span class="p">(</span><span class="n">product_cd</span><span class="p">),</span>
  <span class="k">constraint</span> <span class="n">fk_a_cust_id</span> <span class="k">foreign</span> <span class="k">key</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">)</span>
    <span class="k">references</span> <span class="nf">customer</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">),</span>
  <span class="k">constraint</span> <span class="n">fk_a_branch_id</span> <span class="k">foreign</span> <span class="k">key</span> <span class="p">(</span><span class="n">open_branch_id</span><span class="p">)</span>
    <span class="k">references</span> <span class="nf">branch</span> <span class="p">(</span><span class="n">branch_id</span><span class="p">),</span>
  <span class="k">constraint</span> <span class="n">fk_a_emp_id</span> <span class="k">foreign</span> <span class="k">key</span> <span class="p">(</span><span class="n">open_emp_id</span><span class="p">)</span>
    <span class="k">references</span> <span class="nf">employee</span> <span class="p">(</span><span class="n">emp_id</span><span class="p">),</span>
  <span class="k">constraint</span> <span class="n">pk_account</span> <span class="k">primary</span> <span class="k">key</span> <span class="p">(</span><span class="n">account_id</span><span class="p">)</span>
 <span class="p">);</span>

 <span class="k">create</span> <span class="k">table</span> <span class="k">if</span> <span class="k">not</span> <span class="k">exists</span> <span class="nf">transaction</span>
 <span class="p">(</span><span class="n">txn_id</span> <span class="kt">integer</span> <span class="k">unsigned</span> <span class="k">not</span> <span class="no">null</span> <span class="kp">auto_increment</span><span class="p">,</span>
  <span class="n">txn_date</span> <span class="kt">datetime</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">account_id</span> <span class="kt">integer</span> <span class="k">unsigned</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">txn_type_cd</span> <span class="kt">enum</span><span class="p">(</span><span class="s1">&#39;DBT&#39;</span><span class="p">,</span><span class="s1">&#39;CDT&#39;</span><span class="p">),</span>
  <span class="n">amount</span> <span class="kt">double</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">not</span> <span class="no">null</span><span class="p">,</span>
  <span class="n">teller_emp_id</span> <span class="kt">smallint</span> <span class="k">unsigned</span><span class="p">,</span>
  <span class="n">execution_branch_id</span> <span class="kt">smallint</span> <span class="k">unsigned</span><span class="p">,</span>
  <span class="n">funds_avail_date</span> <span class="kt">datetime</span><span class="p">,</span>
  <span class="k">constraint</span> <span class="n">fk_t_account_id</span> <span class="k">foreign</span> <span class="k">key</span> <span class="p">(</span><span class="n">account_id</span><span class="p">)</span>
    <span class="k">references</span> <span class="nf">account</span> <span class="p">(</span><span class="n">account_id</span><span class="p">),</span>
  <span class="k">constraint</span> <span class="n">fk_teller_emp_id</span> <span class="k">foreign</span> <span class="k">key</span> <span class="p">(</span><span class="n">teller_emp_id</span><span class="p">)</span>
    <span class="k">references</span> <span class="nf">employee</span> <span class="p">(</span><span class="n">emp_id</span><span class="p">),</span>
  <span class="k">constraint</span> <span class="n">fk_exec_branch_id</span> <span class="k">foreign</span> <span class="k">key</span> <span class="p">(</span><span class="n">execution_branch_id</span><span class="p">)</span>
    <span class="k">references</span> <span class="nf">branch</span> <span class="p">(</span><span class="n">branch_id</span><span class="p">),</span>
  <span class="k">constraint</span> <span class="n">pk_transaction</span> <span class="k">primary</span> <span class="k">key</span> <span class="p">(</span><span class="n">txn_id</span><span class="p">)</span>
 <span class="p">);</span>
</pre></div>

<p>
这里值得一讲的有:
</p>
<pre>
cust_type_cd enum('I','B') not null,
</pre>
<p>
mysql的枚举类型，在这里cust_type_cd这一列只能取'I'和'B'这两个值。
</p>
</div>
</div>


<div class="outline-3">
<h3 id="orgheadline24">插入数据</h3>
<div class="outline-text-3" id="text-3-2">
<p>
现在我们加入如下代码:
</p>
<div class="highlight"><pre><span></span><span class="k">insert</span> <span class="k">into</span> <span class="nf">department</span> <span class="p">(</span><span class="n">dept_id</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="no">null</span><span class="p">,</span> <span class="s1">&#39;Operations&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="nf">department</span> <span class="p">(</span><span class="n">dept_id</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="no">null</span><span class="p">,</span> <span class="s1">&#39;Loans&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="nf">department</span> <span class="p">(</span><span class="n">dept_id</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="no">null</span><span class="p">,</span> <span class="s1">&#39;Administration&#39;</span><span class="p">);</span>
</pre></div>

<p>
department的dept_id已经打开了auto_increment特性，那么简单的给这一列赋值 <code>null</code> 即可，其会自动添加一个主键数字。
</p>

<p>
在前面创建表格的时候有if not exists逻辑，这样sql脚本可以重复刷都没有问题，那么插入数据也有这样的if not exists逻辑吗？请参看 <a href="http://bogdan.org.ua/2007/10/18/mysql-insert-if-not-exists-syntax.html">这个网页</a> 。我们可以使用 <code>insert ignore</code> 语句来避免重复插入，这是插入语句改成这个样子了:
</p>
<div class="highlight"><pre><span></span><span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">department</span> <span class="p">(</span><span class="n">dept_id</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Operations&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">department</span> <span class="p">(</span><span class="n">dept_id</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Loans&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">department</span> <span class="p">(</span><span class="n">dept_id</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Administration&#39;</span><span class="p">);</span>
</pre></div>

<p>
注意这里id直接赋值了，因为其为primarykey，如果设置为null这里的语句还是会重复插入，只有primarykey重复了，这个insert语句才不会继续插入了。
</p>

<p>
让我继续插入一些数据:
</p>
<div class="highlight"><pre><span></span><span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">branch</span> <span class="p">(</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">zip</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Headquarters&#39;</span><span class="p">,</span> <span class="s1">&#39;3882 Main St.&#39;</span><span class="p">,</span> <span class="s1">&#39;Waltham&#39;</span><span class="p">,</span> <span class="s1">&#39;MA&#39;</span><span class="p">,</span> <span class="s1">&#39;02451&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">branch</span> <span class="p">(</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">zip</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Woburn Branch&#39;</span><span class="p">,</span> <span class="s1">&#39;422 Maple St.&#39;</span><span class="p">,</span> <span class="s1">&#39;Woburn&#39;</span><span class="p">,</span> <span class="s1">&#39;MA&#39;</span><span class="p">,</span> <span class="s1">&#39;01801&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">branch</span> <span class="p">(</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">zip</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Quincy Branch&#39;</span><span class="p">,</span> <span class="s1">&#39;125 Presidential Way&#39;</span><span class="p">,</span> <span class="s1">&#39;Quincy&#39;</span><span class="p">,</span> <span class="s1">&#39;MA&#39;</span><span class="p">,</span> <span class="s1">&#39;02169&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">branch</span> <span class="p">(</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">zip</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;So. NH Branch&#39;</span><span class="p">,</span> <span class="s1">&#39;378 Maynard Ln.&#39;</span><span class="p">,</span> <span class="s1">&#39;Salem&#39;</span><span class="p">,</span> <span class="s1">&#39;NH&#39;</span><span class="p">,</span> <span class="s1">&#39;03079&#39;</span><span class="p">);</span>
</pre></div>

<p>
上面没啥好讲的，然后我们看到下面这句:
</p>
<div class="highlight"><pre><span></span><span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">employee</span> <span class="p">(</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span>
  <span class="n">dept_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">assigned_branch_id</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Michael&#39;</span><span class="p">,</span> <span class="s1">&#39;Smith&#39;</span><span class="p">,</span> <span class="s1">&#39;2001-06-22&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">dept_id</span> <span class="k">from</span> <span class="n">department</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Administration&#39;</span><span class="p">),</span>
  <span class="s1">&#39;President&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">branch_id</span> <span class="k">from</span> <span class="n">branch</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Headquarters&#39;</span><span class="p">));</span>
</pre></div>
</div>

<div class="outline-4">
<h4 id="orgheadline18">子查询</h4>
<div class="outline-text-4" id="text-3-2-1">
<p>
SQL有三种类型的表: 一种是大家常见的实际存储的那种SQL表格；第二种是临时表格，也就是子查询返回的表格；还有一种就是虚拟表，比如视图。
</p>

<p>
所谓的子查询实际上就是一个select语句其将返回一个临时的SQL表格，最简单的应用就是直接跟在另一个select语句的from语句后面，然后还有一种用法常用于表格多列值的复制转移操作，也就是所谓的 <code>insert select</code> 语句，其是由一个insert语句和一个select语句组合而成。如下所示<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>:
</p>

<pre>
INSERT INTO Customers (CustomerName, Country)
SELECT SupplierName, Country FROM Suppliers;
</pre>
<p>
这个SQL语句将把Suppliers表格里面的SupplierName和Country这两列的值都复制到Customers这个表格中去，具体是对应的CustomerName和Country这两列。
</p>

<p>
而上面的例子就是第三种用法，其是一个select语句然后 <span class="underline">用括号()括起来了</span> 。其需要返回一列值，然后像上面的情况必须是只有一个值，而这个值将提取出来被insert into语句作为value使用，然后也有返回多个值的情况，比如过滤条件where what in (select &#x2026;) ，这种子查询就可以返回多个值。
</p>

<p>
下面类似的这些语句就不赘述了:
</p>
<div class="highlight"><pre><span></span><span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">employee</span> <span class="p">(</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span>
  <span class="n">dept_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">assigned_branch_id</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Susan&#39;</span><span class="p">,</span> <span class="s1">&#39;Barker&#39;</span><span class="p">,</span> <span class="s1">&#39;2002-09-12&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">dept_id</span> <span class="k">from</span> <span class="n">department</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Administration&#39;</span><span class="p">),</span>
  <span class="s1">&#39;Vice President&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">branch_id</span> <span class="k">from</span> <span class="n">branch</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Headquarters&#39;</span><span class="p">));</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">employee</span> <span class="p">(</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span>
  <span class="n">dept_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">assigned_branch_id</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Robert&#39;</span><span class="p">,</span> <span class="s1">&#39;Tyler&#39;</span><span class="p">,</span> <span class="s1">&#39;2000-02-09&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">dept_id</span> <span class="k">from</span> <span class="n">department</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Administration&#39;</span><span class="p">),</span>
  <span class="s1">&#39;Treasurer&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">branch_id</span> <span class="k">from</span> <span class="n">branch</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Headquarters&#39;</span><span class="p">));</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">employee</span> <span class="p">(</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span>
  <span class="n">dept_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">assigned_branch_id</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;Susan&#39;</span><span class="p">,</span> <span class="s1">&#39;Hawthorne&#39;</span><span class="p">,</span> <span class="s1">&#39;2002-04-24&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">dept_id</span> <span class="k">from</span> <span class="n">department</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Operations&#39;</span><span class="p">),</span>
  <span class="s1">&#39;Operations Manager&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">branch_id</span> <span class="k">from</span> <span class="n">branch</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Headquarters&#39;</span><span class="p">));</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">employee</span> <span class="p">(</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span>
  <span class="n">dept_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">assigned_branch_id</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;Gooding&#39;</span><span class="p">,</span> <span class="s1">&#39;2003-11-14&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">dept_id</span> <span class="k">from</span> <span class="n">department</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Loans&#39;</span><span class="p">),</span>
  <span class="s1">&#39;Loan Manager&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">branch_id</span> <span class="k">from</span> <span class="n">branch</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Headquarters&#39;</span><span class="p">));</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">employee</span> <span class="p">(</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span>
  <span class="n">dept_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">assigned_branch_id</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;Helen&#39;</span><span class="p">,</span> <span class="s1">&#39;Fleming&#39;</span><span class="p">,</span> <span class="s1">&#39;2004-03-17&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">dept_id</span> <span class="k">from</span> <span class="n">department</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Operations&#39;</span><span class="p">),</span>
  <span class="s1">&#39;Head Teller&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">branch_id</span> <span class="k">from</span> <span class="n">branch</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Headquarters&#39;</span><span class="p">));</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">employee</span> <span class="p">(</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span>
  <span class="n">dept_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">assigned_branch_id</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;Chris&#39;</span><span class="p">,</span> <span class="s1">&#39;Tucker&#39;</span><span class="p">,</span> <span class="s1">&#39;2004-09-15&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">dept_id</span> <span class="k">from</span> <span class="n">department</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Operations&#39;</span><span class="p">),</span>
  <span class="s1">&#39;Teller&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">branch_id</span> <span class="k">from</span> <span class="n">branch</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Headquarters&#39;</span><span class="p">));</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">employee</span> <span class="p">(</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span>
  <span class="n">dept_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">assigned_branch_id</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;Sarah&#39;</span><span class="p">,</span> <span class="s1">&#39;Parker&#39;</span><span class="p">,</span> <span class="s1">&#39;2002-12-02&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">dept_id</span> <span class="k">from</span> <span class="n">department</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Operations&#39;</span><span class="p">),</span>
  <span class="s1">&#39;Teller&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">branch_id</span> <span class="k">from</span> <span class="n">branch</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Headquarters&#39;</span><span class="p">));</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">employee</span> <span class="p">(</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span>
  <span class="n">dept_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">assigned_branch_id</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;Jane&#39;</span><span class="p">,</span> <span class="s1">&#39;Grossman&#39;</span><span class="p">,</span> <span class="s1">&#39;2002-05-03&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">dept_id</span> <span class="k">from</span> <span class="n">department</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Operations&#39;</span><span class="p">),</span>
  <span class="s1">&#39;Teller&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">branch_id</span> <span class="k">from</span> <span class="n">branch</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Headquarters&#39;</span><span class="p">));</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">employee</span> <span class="p">(</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span>
  <span class="n">dept_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">assigned_branch_id</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;Paula&#39;</span><span class="p">,</span> <span class="s1">&#39;Roberts&#39;</span><span class="p">,</span> <span class="s1">&#39;2002-07-27&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">dept_id</span> <span class="k">from</span> <span class="n">department</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Operations&#39;</span><span class="p">),</span>
  <span class="s1">&#39;Head Teller&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">branch_id</span> <span class="k">from</span> <span class="n">branch</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Woburn Branch&#39;</span><span class="p">));</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">employee</span> <span class="p">(</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span>
  <span class="n">dept_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">assigned_branch_id</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;Thomas&#39;</span><span class="p">,</span> <span class="s1">&#39;Ziegler&#39;</span><span class="p">,</span> <span class="s1">&#39;2000-10-23&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">dept_id</span> <span class="k">from</span> <span class="n">department</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Operations&#39;</span><span class="p">),</span>
  <span class="s1">&#39;Teller&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">branch_id</span> <span class="k">from</span> <span class="n">branch</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Woburn Branch&#39;</span><span class="p">));</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">employee</span> <span class="p">(</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span>
  <span class="n">dept_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">assigned_branch_id</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;Samantha&#39;</span><span class="p">,</span> <span class="s1">&#39;Jameson&#39;</span><span class="p">,</span> <span class="s1">&#39;2003-01-08&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">dept_id</span> <span class="k">from</span> <span class="n">department</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Operations&#39;</span><span class="p">),</span>
  <span class="s1">&#39;Teller&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">branch_id</span> <span class="k">from</span> <span class="n">branch</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Woburn Branch&#39;</span><span class="p">));</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">employee</span> <span class="p">(</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span>
  <span class="n">dept_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">assigned_branch_id</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;Blake&#39;</span><span class="p">,</span> <span class="s1">&#39;2000-05-11&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">dept_id</span> <span class="k">from</span> <span class="n">department</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Operations&#39;</span><span class="p">),</span>
  <span class="s1">&#39;Head Teller&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">branch_id</span> <span class="k">from</span> <span class="n">branch</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Quincy Branch&#39;</span><span class="p">));</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">employee</span> <span class="p">(</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span>
  <span class="n">dept_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">assigned_branch_id</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="s1">&#39;Cindy&#39;</span><span class="p">,</span> <span class="s1">&#39;Mason&#39;</span><span class="p">,</span> <span class="s1">&#39;2002-08-09&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">dept_id</span> <span class="k">from</span> <span class="n">department</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Operations&#39;</span><span class="p">),</span>
  <span class="s1">&#39;Teller&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">branch_id</span> <span class="k">from</span> <span class="n">branch</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Quincy Branch&#39;</span><span class="p">));</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">employee</span> <span class="p">(</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span>
  <span class="n">dept_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">assigned_branch_id</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="s1">&#39;Frank&#39;</span><span class="p">,</span> <span class="s1">&#39;Portman&#39;</span><span class="p">,</span> <span class="s1">&#39;2003-04-01&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">dept_id</span> <span class="k">from</span> <span class="n">department</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Operations&#39;</span><span class="p">),</span>
  <span class="s1">&#39;Teller&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">branch_id</span> <span class="k">from</span> <span class="n">branch</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Quincy Branch&#39;</span><span class="p">));</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">employee</span> <span class="p">(</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span>
  <span class="n">dept_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">assigned_branch_id</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="s1">&#39;Theresa&#39;</span><span class="p">,</span> <span class="s1">&#39;Markham&#39;</span><span class="p">,</span> <span class="s1">&#39;2001-03-15&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">dept_id</span> <span class="k">from</span> <span class="n">department</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Operations&#39;</span><span class="p">),</span>
  <span class="s1">&#39;Head Teller&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">branch_id</span> <span class="k">from</span> <span class="n">branch</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;So. NH Branch&#39;</span><span class="p">));</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">employee</span> <span class="p">(</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span>
  <span class="n">dept_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">assigned_branch_id</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="s1">&#39;Beth&#39;</span><span class="p">,</span> <span class="s1">&#39;Fowler&#39;</span><span class="p">,</span> <span class="s1">&#39;2002-06-29&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">dept_id</span> <span class="k">from</span> <span class="n">department</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Operations&#39;</span><span class="p">),</span>
  <span class="s1">&#39;Teller&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">branch_id</span> <span class="k">from</span> <span class="n">branch</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;So. NH Branch&#39;</span><span class="p">));</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">employee</span> <span class="p">(</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span>
  <span class="n">dept_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">assigned_branch_id</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="s1">&#39;Rick&#39;</span><span class="p">,</span> <span class="s1">&#39;Tulman&#39;</span><span class="p">,</span> <span class="s1">&#39;2002-12-12&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">dept_id</span> <span class="k">from</span> <span class="n">department</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Operations&#39;</span><span class="p">),</span>
  <span class="s1">&#39;Teller&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="k">select</span> <span class="n">branch_id</span> <span class="k">from</span> <span class="n">branch</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;So. NH Branch&#39;</span><span class="p">));</span>
</pre></div>

<p>
我们继续往下看:
</p>
<div class="highlight"><pre><span></span><span class="k">create</span> <span class="n">temporary</span> <span class="k">table</span> <span class="n">emp_tmp</span> <span class="k">as</span>
<span class="k">select</span> <span class="n">emp_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span> <span class="k">from</span> <span class="n">employee</span><span class="p">;</span>

<span class="k">update</span> <span class="n">employee</span> <span class="kt">set</span> <span class="n">superior_emp_id</span> <span class="o">=</span>
 <span class="p">(</span><span class="k">select</span> <span class="n">emp_id</span> <span class="k">from</span> <span class="n">emp_tmp</span> <span class="k">where</span> <span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Smith&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;Michael&#39;</span><span class="p">)</span>
<span class="k">where</span> <span class="p">((</span><span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Barker&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;Susan&#39;</span><span class="p">)</span>
  <span class="k">or</span> <span class="p">(</span><span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Tyler&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;Robert&#39;</span><span class="p">));</span>
</pre></div>

<p>
这里的 <code>create temporary table</code> 语句是根据某个select语句创建了一个临时表格，临时表格只有当前的session看得到，退出session之后该临时表格会自动drop掉。
</p>

<p>
update语句基本格式我们是熟悉的，关键是理解where字句这个过滤条件。该SQL语句的意思是:将employee表格中Barker Susan和Tyler Robert这两个伙计的上司设置为Michael Smith的emp_id。这里的过滤条件or逻辑还有and逻辑我想熟悉编程的都很清楚了，这里就不赘述了。
</p>

<p>
下面情况类似:
</p>
<div class="highlight"><pre><span></span><span class="k">update</span> <span class="n">employee</span> <span class="kt">set</span> <span class="n">superior_emp_id</span> <span class="o">=</span>
 <span class="p">(</span><span class="k">select</span> <span class="n">emp_id</span> <span class="k">from</span> <span class="n">emp_tmp</span> <span class="k">where</span> <span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Tyler&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;Robert&#39;</span><span class="p">)</span>
<span class="k">where</span> <span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Hawthorne&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;Susan&#39;</span><span class="p">;</span>
<span class="k">update</span> <span class="n">employee</span> <span class="kt">set</span> <span class="n">superior_emp_id</span> <span class="o">=</span>
 <span class="p">(</span><span class="k">select</span> <span class="n">emp_id</span> <span class="k">from</span> <span class="n">emp_tmp</span> <span class="k">where</span> <span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Hawthorne&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;Susan&#39;</span><span class="p">)</span>
<span class="k">where</span> <span class="p">((</span><span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Gooding&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;John&#39;</span><span class="p">)</span>
  <span class="k">or</span> <span class="p">(</span><span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Fleming&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;Helen&#39;</span><span class="p">)</span>
  <span class="k">or</span> <span class="p">(</span><span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Roberts&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;Paula&#39;</span><span class="p">)</span> 
  <span class="k">or</span> <span class="p">(</span><span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Blake&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;John&#39;</span><span class="p">)</span> 
  <span class="k">or</span> <span class="p">(</span><span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Markham&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;Theresa&#39;</span><span class="p">));</span> 
<span class="k">update</span> <span class="n">employee</span> <span class="kt">set</span> <span class="n">superior_emp_id</span> <span class="o">=</span>
 <span class="p">(</span><span class="k">select</span> <span class="n">emp_id</span> <span class="k">from</span> <span class="n">emp_tmp</span> <span class="k">where</span> <span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Fleming&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;Helen&#39;</span><span class="p">)</span>
<span class="k">where</span> <span class="p">((</span><span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Tucker&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;Chris&#39;</span><span class="p">)</span> 
  <span class="k">or</span> <span class="p">(</span><span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Parker&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;Sarah&#39;</span><span class="p">)</span> 
  <span class="k">or</span> <span class="p">(</span><span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Grossman&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;Jane&#39;</span><span class="p">));</span>  
<span class="k">update</span> <span class="n">employee</span> <span class="kt">set</span> <span class="n">superior_emp_id</span> <span class="o">=</span>
 <span class="p">(</span><span class="k">select</span> <span class="n">emp_id</span> <span class="k">from</span> <span class="n">emp_tmp</span> <span class="k">where</span> <span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Roberts&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;Paula&#39;</span><span class="p">)</span>
<span class="k">where</span> <span class="p">((</span><span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Ziegler&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;Thomas&#39;</span><span class="p">)</span>  
  <span class="k">or</span> <span class="p">(</span><span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Jameson&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;Samantha&#39;</span><span class="p">));</span>   
<span class="k">update</span> <span class="n">employee</span> <span class="kt">set</span> <span class="n">superior_emp_id</span> <span class="o">=</span>
 <span class="p">(</span><span class="k">select</span> <span class="n">emp_id</span> <span class="k">from</span> <span class="n">emp_tmp</span> <span class="k">where</span> <span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Blake&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;John&#39;</span><span class="p">)</span>
<span class="k">where</span> <span class="p">((</span><span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Mason&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;Cindy&#39;</span><span class="p">)</span>   
  <span class="k">or</span> <span class="p">(</span><span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Portman&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;Frank&#39;</span><span class="p">));</span>    
<span class="k">update</span> <span class="n">employee</span> <span class="kt">set</span> <span class="n">superior_emp_id</span> <span class="o">=</span>
 <span class="p">(</span><span class="k">select</span> <span class="n">emp_id</span> <span class="k">from</span> <span class="n">emp_tmp</span> <span class="k">where</span> <span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Markham&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;Theresa&#39;</span><span class="p">)</span>
<span class="k">where</span> <span class="p">((</span><span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Fowler&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;Beth&#39;</span><span class="p">)</span>   
  <span class="k">or</span> <span class="p">(</span><span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;Tulman&#39;</span> <span class="k">and</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;Rick&#39;</span><span class="p">));</span>    

<span class="k">drop</span> <span class="k">table</span> <span class="n">emp_tmp</span><span class="p">;</span>
</pre></div>



<p>
然后加入product和product_type的数据，看了一下，没啥好说的:
</p>
<div class="highlight"><pre><span></span><span class="cm">/* product type data */</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">product_type</span> <span class="p">(</span><span class="n">product_type_cd</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="s1">&#39;ACCOUNT&#39;</span><span class="p">,</span><span class="s1">&#39;Customer Accounts&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">product_type</span> <span class="p">(</span><span class="n">product_type_cd</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="s1">&#39;LOAN&#39;</span><span class="p">,</span><span class="s1">&#39;Individual and Business Loans&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">product_type</span> <span class="p">(</span><span class="n">product_type_cd</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="s1">&#39;INSURANCE&#39;</span><span class="p">,</span><span class="s1">&#39;Insurance Offerings&#39;</span><span class="p">);</span>


<span class="cm">/* product data */</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">product</span> <span class="p">(</span><span class="n">product_cd</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">product_type_cd</span><span class="p">,</span> <span class="n">date_offered</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="s1">&#39;CHK&#39;</span><span class="p">,</span><span class="s1">&#39;checking account&#39;</span><span class="p">,</span><span class="s1">&#39;ACCOUNT&#39;</span><span class="p">,</span><span class="s1">&#39;2000-01-01&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">product</span> <span class="p">(</span><span class="n">product_cd</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">product_type_cd</span><span class="p">,</span> <span class="n">date_offered</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="s1">&#39;SAV&#39;</span><span class="p">,</span><span class="s1">&#39;savings account&#39;</span><span class="p">,</span><span class="s1">&#39;ACCOUNT&#39;</span><span class="p">,</span><span class="s1">&#39;2000-01-01&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">product</span> <span class="p">(</span><span class="n">product_cd</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">product_type_cd</span><span class="p">,</span> <span class="n">date_offered</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="s1">&#39;MM&#39;</span><span class="p">,</span><span class="s1">&#39;money market account&#39;</span><span class="p">,</span><span class="s1">&#39;ACCOUNT&#39;</span><span class="p">,</span><span class="s1">&#39;2000-01-01&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">product</span> <span class="p">(</span><span class="n">product_cd</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">product_type_cd</span><span class="p">,</span> <span class="n">date_offered</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="s1">&#39;CD&#39;</span><span class="p">,</span><span class="s1">&#39;certificate of deposit&#39;</span><span class="p">,</span><span class="s1">&#39;ACCOUNT&#39;</span><span class="p">,</span><span class="s1">&#39;2000-01-01&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">product</span> <span class="p">(</span><span class="n">product_cd</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">product_type_cd</span><span class="p">,</span> <span class="n">date_offered</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="s1">&#39;MRT&#39;</span><span class="p">,</span><span class="s1">&#39;home mortgage&#39;</span><span class="p">,</span><span class="s1">&#39;LOAN&#39;</span><span class="p">,</span><span class="s1">&#39;2000-01-01&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">product</span> <span class="p">(</span><span class="n">product_cd</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">product_type_cd</span><span class="p">,</span> <span class="n">date_offered</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="s1">&#39;AUT&#39;</span><span class="p">,</span><span class="s1">&#39;auto loan&#39;</span><span class="p">,</span><span class="s1">&#39;LOAN&#39;</span><span class="p">,</span><span class="s1">&#39;2000-01-01&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">product</span> <span class="p">(</span><span class="n">product_cd</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">product_type_cd</span><span class="p">,</span> <span class="n">date_offered</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="s1">&#39;BUS&#39;</span><span class="p">,</span><span class="s1">&#39;business line of credit&#39;</span><span class="p">,</span><span class="s1">&#39;LOAN&#39;</span><span class="p">,</span><span class="s1">&#39;2000-01-01&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">product</span> <span class="p">(</span><span class="n">product_cd</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">product_type_cd</span><span class="p">,</span> <span class="n">date_offered</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="s1">&#39;SBL&#39;</span><span class="p">,</span><span class="s1">&#39;small business loan&#39;</span><span class="p">,</span><span class="s1">&#39;LOAN&#39;</span><span class="p">,</span><span class="s1">&#39;2000-01-01&#39;</span><span class="p">);</span>
</pre></div>

<p>
然后下面是插入customer表格的数据，也没啥好说的:
</p>

<div class="highlight"><pre><span></span><span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">customer</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">fed_id</span><span class="p">,</span> <span class="n">cust_type_cd</span><span class="p">,</span>
  <span class="n">address</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">postal_code</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;111-11-1111&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;47 Mockingbird Ln&#39;</span><span class="p">,</span> <span class="s1">&#39;Lynnfield&#39;</span><span class="p">,</span> <span class="s1">&#39;MA&#39;</span><span class="p">,</span> <span class="s1">&#39;01940&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">customer</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">fed_id</span><span class="p">,</span> <span class="n">cust_type_cd</span><span class="p">,</span>
  <span class="n">address</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">postal_code</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;222-22-2222&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;372 Clearwater Blvd&#39;</span><span class="p">,</span> <span class="s1">&#39;Woburn&#39;</span><span class="p">,</span> <span class="s1">&#39;MA&#39;</span><span class="p">,</span> <span class="s1">&#39;01801&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">customer</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">fed_id</span><span class="p">,</span> <span class="n">cust_type_cd</span><span class="p">,</span>
  <span class="n">address</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">postal_code</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;333-33-3333&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;18 Jessup Rd&#39;</span><span class="p">,</span> <span class="s1">&#39;Quincy&#39;</span><span class="p">,</span> <span class="s1">&#39;MA&#39;</span><span class="p">,</span> <span class="s1">&#39;02169&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">customer</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">fed_id</span><span class="p">,</span> <span class="n">cust_type_cd</span><span class="p">,</span>
  <span class="n">address</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">postal_code</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;444-44-4444&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;12 Buchanan Ln&#39;</span><span class="p">,</span> <span class="s1">&#39;Waltham&#39;</span><span class="p">,</span> <span class="s1">&#39;MA&#39;</span><span class="p">,</span> <span class="s1">&#39;02451&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">customer</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">fed_id</span><span class="p">,</span> <span class="n">cust_type_cd</span><span class="p">,</span>
  <span class="n">address</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">postal_code</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;555-55-5555&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;2341 Main St&#39;</span><span class="p">,</span> <span class="s1">&#39;Salem&#39;</span><span class="p">,</span> <span class="s1">&#39;NH&#39;</span><span class="p">,</span> <span class="s1">&#39;03079&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">customer</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">fed_id</span><span class="p">,</span> <span class="n">cust_type_cd</span><span class="p">,</span>
  <span class="n">address</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">postal_code</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;666-66-6666&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;12 Blaylock Ln&#39;</span><span class="p">,</span> <span class="s1">&#39;Waltham&#39;</span><span class="p">,</span> <span class="s1">&#39;MA&#39;</span><span class="p">,</span> <span class="s1">&#39;02451&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">customer</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">fed_id</span><span class="p">,</span> <span class="n">cust_type_cd</span><span class="p">,</span>
  <span class="n">address</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">postal_code</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;777-77-7777&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;29 Admiral Ln&#39;</span><span class="p">,</span> <span class="s1">&#39;Wilmington&#39;</span><span class="p">,</span> <span class="s1">&#39;MA&#39;</span><span class="p">,</span> <span class="s1">&#39;01887&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">customer</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">fed_id</span><span class="p">,</span> <span class="n">cust_type_cd</span><span class="p">,</span>
  <span class="n">address</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">postal_code</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;888-88-8888&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;472 Freedom Rd&#39;</span><span class="p">,</span> <span class="s1">&#39;Salem&#39;</span><span class="p">,</span> <span class="s1">&#39;NH&#39;</span><span class="p">,</span> <span class="s1">&#39;03079&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">customer</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">fed_id</span><span class="p">,</span> <span class="n">cust_type_cd</span><span class="p">,</span>
  <span class="n">address</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">postal_code</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;999-99-9999&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;29 Maple St&#39;</span><span class="p">,</span> <span class="s1">&#39;Newton&#39;</span><span class="p">,</span> <span class="s1">&#39;MA&#39;</span><span class="p">,</span> <span class="s1">&#39;02458&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">customer</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">fed_id</span><span class="p">,</span> <span class="n">cust_type_cd</span><span class="p">,</span>
  <span class="n">address</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">postal_code</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;04-1111111&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;7 Industrial Way&#39;</span><span class="p">,</span> <span class="s1">&#39;Salem&#39;</span><span class="p">,</span> <span class="s1">&#39;NH&#39;</span><span class="p">,</span> <span class="s1">&#39;03079&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">customer</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">fed_id</span><span class="p">,</span> <span class="n">cust_type_cd</span><span class="p">,</span>
  <span class="n">address</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">postal_code</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;04-2222222&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;287A Corporate Ave&#39;</span><span class="p">,</span> <span class="s1">&#39;Wilmington&#39;</span><span class="p">,</span> <span class="s1">&#39;MA&#39;</span><span class="p">,</span> <span class="s1">&#39;01887&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">customer</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">fed_id</span><span class="p">,</span> <span class="n">cust_type_cd</span><span class="p">,</span>
  <span class="n">address</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">postal_code</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;04-3333333&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;789 Main St&#39;</span><span class="p">,</span> <span class="s1">&#39;Salem&#39;</span><span class="p">,</span> <span class="s1">&#39;NH&#39;</span><span class="p">,</span> <span class="s1">&#39;03079&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">customer</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">fed_id</span><span class="p">,</span> <span class="n">cust_type_cd</span><span class="p">,</span>
  <span class="n">address</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">postal_code</span><span class="p">)</span>
<span class="k">values</span> <span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="s1">&#39;04-4444444&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;4772 Presidential Way&#39;</span><span class="p">,</span> <span class="s1">&#39;Quincy&#39;</span><span class="p">,</span> <span class="s1">&#39;MA&#39;</span><span class="p">,</span> <span class="s1">&#39;02169&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>


<div class="outline-4">
<h4 id="orgheadline19">insert where语句</h4>
<div class="outline-text-4" id="text-3-2-2">
<p>
下面往individual表格插入数据的操作就是前面谈论过的insert where语句。
</p>
<div class="highlight"><pre><span></span><span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">individual</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">birth_date</span><span class="p">)</span>
<span class="k">select</span> <span class="n">cust_id</span><span class="p">,</span> <span class="s1">&#39;James&#39;</span><span class="p">,</span> <span class="s1">&#39;Hadley&#39;</span><span class="p">,</span> <span class="s1">&#39;1972-04-22&#39;</span> <span class="k">from</span> <span class="n">customer</span>
<span class="k">where</span> <span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;111-11-1111&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">individual</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">birth_date</span><span class="p">)</span>
<span class="k">select</span> <span class="n">cust_id</span><span class="p">,</span> <span class="s1">&#39;Susan&#39;</span><span class="p">,</span> <span class="s1">&#39;Tingley&#39;</span><span class="p">,</span> <span class="s1">&#39;1968-08-15&#39;</span> <span class="k">from</span> <span class="n">customer</span>
<span class="k">where</span> <span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;222-22-2222&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">individual</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">birth_date</span><span class="p">)</span>
<span class="k">select</span> <span class="n">cust_id</span><span class="p">,</span> <span class="s1">&#39;Frank&#39;</span><span class="p">,</span> <span class="s1">&#39;Tucker&#39;</span><span class="p">,</span> <span class="s1">&#39;1958-02-06&#39;</span> <span class="k">from</span> <span class="n">customer</span>
<span class="k">where</span> <span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;333-33-3333&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">individual</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">birth_date</span><span class="p">)</span>
<span class="k">select</span> <span class="n">cust_id</span><span class="p">,</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;Hayward&#39;</span><span class="p">,</span> <span class="s1">&#39;1966-12-22&#39;</span> <span class="k">from</span> <span class="n">customer</span>
<span class="k">where</span> <span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;444-44-4444&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">individual</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">birth_date</span><span class="p">)</span>
<span class="k">select</span> <span class="n">cust_id</span><span class="p">,</span> <span class="s1">&#39;Charles&#39;</span><span class="p">,</span> <span class="s1">&#39;Frasier&#39;</span><span class="p">,</span> <span class="s1">&#39;1971-08-25&#39;</span> <span class="k">from</span> <span class="n">customer</span>
<span class="k">where</span> <span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;555-55-5555&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">individual</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">birth_date</span><span class="p">)</span>
<span class="k">select</span> <span class="n">cust_id</span><span class="p">,</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;Spencer&#39;</span><span class="p">,</span> <span class="s1">&#39;1962-09-14&#39;</span> <span class="k">from</span> <span class="n">customer</span>
<span class="k">where</span> <span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;666-66-6666&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">individual</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">birth_date</span><span class="p">)</span>
<span class="k">select</span> <span class="n">cust_id</span><span class="p">,</span> <span class="s1">&#39;Margaret&#39;</span><span class="p">,</span> <span class="s1">&#39;Young&#39;</span><span class="p">,</span> <span class="s1">&#39;1947-03-19&#39;</span> <span class="k">from</span> <span class="n">customer</span>
<span class="k">where</span> <span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;777-77-7777&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">individual</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">birth_date</span><span class="p">)</span>
<span class="k">select</span> <span class="n">cust_id</span><span class="p">,</span> <span class="s1">&#39;Louis&#39;</span><span class="p">,</span> <span class="s1">&#39;Blake&#39;</span><span class="p">,</span> <span class="s1">&#39;1977-07-01&#39;</span> <span class="k">from</span> <span class="n">customer</span>
<span class="k">where</span> <span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;888-88-8888&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">individual</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">birth_date</span><span class="p">)</span>
<span class="k">select</span> <span class="n">cust_id</span><span class="p">,</span> <span class="s1">&#39;Richard&#39;</span><span class="p">,</span> <span class="s1">&#39;Farley&#39;</span><span class="p">,</span> <span class="s1">&#39;1968-06-16&#39;</span> <span class="k">from</span> <span class="n">customer</span>
<span class="k">where</span> <span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;999-99-9999&#39;</span><span class="p">;</span>


<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">business</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">state_id</span><span class="p">,</span> <span class="n">incorp_date</span><span class="p">)</span>
<span class="k">select</span> <span class="n">cust_id</span><span class="p">,</span> <span class="s1">&#39;Chilton Engineering&#39;</span><span class="p">,</span> <span class="s1">&#39;12-345-678&#39;</span><span class="p">,</span> <span class="s1">&#39;1995-05-01&#39;</span> <span class="k">from</span> <span class="n">customer</span>
<span class="k">where</span> <span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;04-1111111&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">business</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">state_id</span><span class="p">,</span> <span class="n">incorp_date</span><span class="p">)</span>
<span class="k">select</span> <span class="n">cust_id</span><span class="p">,</span> <span class="s1">&#39;Northeast Cooling Inc.&#39;</span><span class="p">,</span> <span class="s1">&#39;23-456-789&#39;</span><span class="p">,</span> <span class="s1">&#39;2001-01-01&#39;</span> <span class="k">from</span> <span class="n">customer</span>
<span class="k">where</span> <span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;04-2222222&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">business</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">state_id</span><span class="p">,</span> <span class="n">incorp_date</span><span class="p">)</span>
<span class="k">select</span> <span class="n">cust_id</span><span class="p">,</span> <span class="s1">&#39;Superior Auto Body&#39;</span><span class="p">,</span> <span class="s1">&#39;34-567-890&#39;</span><span class="p">,</span> <span class="s1">&#39;2002-06-30&#39;</span> <span class="k">from</span> <span class="n">customer</span>
<span class="k">where</span> <span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;04-3333333&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">business</span> <span class="p">(</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">state_id</span><span class="p">,</span> <span class="n">incorp_date</span><span class="p">)</span>
<span class="k">select</span> <span class="n">cust_id</span><span class="p">,</span> <span class="s1">&#39;AAA Insurance Inc.&#39;</span><span class="p">,</span> <span class="s1">&#39;45-678-901&#39;</span><span class="p">,</span> <span class="s1">&#39;1999-05-01&#39;</span> <span class="k">from</span> <span class="n">customer</span>
<span class="k">where</span> <span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;04-4444444&#39;</span><span class="p">;</span>

<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">officer</span> <span class="p">(</span><span class="n">officer_id</span><span class="p">,</span> <span class="n">cust_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span>
  <span class="n">title</span><span class="p">,</span> <span class="n">start_date</span><span class="p">)</span>
<span class="k">select</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cust_id</span><span class="p">,</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;Chilton&#39;</span><span class="p">,</span> <span class="s1">&#39;President&#39;</span><span class="p">,</span> <span class="s1">&#39;1995-05-01&#39;</span>
<span class="k">from</span> <span class="n">customer</span>
<span class="k">where</span> <span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;04-1111111&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">officer</span> <span class="p">(</span><span class="n">officer_id</span><span class="p">,</span> <span class="n">cust_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span>
  <span class="n">title</span><span class="p">,</span> <span class="n">start_date</span><span class="p">)</span>
<span class="k">select</span> <span class="mi">2</span><span class="p">,</span> <span class="n">cust_id</span><span class="p">,</span> <span class="s1">&#39;Paul&#39;</span><span class="p">,</span> <span class="s1">&#39;Hardy&#39;</span><span class="p">,</span> <span class="s1">&#39;President&#39;</span><span class="p">,</span> <span class="s1">&#39;2001-01-01&#39;</span>
<span class="k">from</span> <span class="n">customer</span>
<span class="k">where</span> <span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;04-2222222&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">officer</span> <span class="p">(</span><span class="n">officer_id</span><span class="p">,</span> <span class="n">cust_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span>
  <span class="n">title</span><span class="p">,</span> <span class="n">start_date</span><span class="p">)</span>
<span class="k">select</span> <span class="mi">3</span><span class="p">,</span> <span class="n">cust_id</span><span class="p">,</span> <span class="s1">&#39;Carl&#39;</span><span class="p">,</span> <span class="s1">&#39;Lutz&#39;</span><span class="p">,</span> <span class="s1">&#39;President&#39;</span><span class="p">,</span> <span class="s1">&#39;2002-06-30&#39;</span>
<span class="k">from</span> <span class="n">customer</span>
<span class="k">where</span> <span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;04-3333333&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">officer</span> <span class="p">(</span><span class="n">officer_id</span><span class="p">,</span> <span class="n">cust_id</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span>
  <span class="n">title</span><span class="p">,</span> <span class="n">start_date</span><span class="p">)</span>
<span class="k">select</span> <span class="mi">4</span><span class="p">,</span> <span class="n">cust_id</span><span class="p">,</span> <span class="s1">&#39;Stanley&#39;</span><span class="p">,</span> <span class="s1">&#39;Cheswick&#39;</span><span class="p">,</span> <span class="s1">&#39;President&#39;</span><span class="p">,</span> <span class="s1">&#39;1999-05-01&#39;</span>
<span class="k">from</span> <span class="n">customer</span>
<span class="k">where</span> <span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;04-4444444&#39;</span><span class="p">;</span>
</pre></div>
</div>
</div>

<div class="outline-4">
<h4 id="orgheadline20">交叉连接</h4>
<div class="outline-text-4" id="text-3-2-3">
<p>
接下来的这个语句显得更加复杂了:
</p>
<div class="highlight"><pre><span></span><span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">account</span> <span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">product_cd</span><span class="p">,</span> <span class="n">cust_id</span><span class="p">,</span> <span class="n">open_date</span><span class="p">,</span>
  <span class="n">last_activity_date</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">open_branch_id</span><span class="p">,</span>
  <span class="n">open_emp_id</span><span class="p">,</span> <span class="n">avail_balance</span><span class="p">,</span> <span class="n">pending_balance</span><span class="p">)</span>
<span class="k">select</span> <span class="mi">1</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">prod_cd</span><span class="p">,</span> <span class="n">c</span><span class="p">.</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">open_date</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">last_date</span><span class="p">,</span> <span class="s1">&#39;ACTIVE&#39;</span><span class="p">,</span>
  <span class="n">e</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">avail</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">pend</span>
<span class="k">from</span> <span class="n">customer</span> <span class="n">c</span> <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span>
  <span class="k">from</span> <span class="n">branch</span> <span class="n">b</span> <span class="k">inner</span> <span class="k">join</span> <span class="n">employee</span> <span class="n">e</span> <span class="k">on</span> <span class="n">e</span><span class="p">.</span><span class="n">assigned_branch_id</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span>
  <span class="k">where</span> <span class="n">b</span><span class="p">.</span><span class="n">city</span> <span class="o">=</span> <span class="s1">&#39;Woburn&#39;</span> <span class="k">limit</span> <span class="mi">1</span><span class="p">)</span> <span class="n">e</span>
  <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="s1">&#39;CHK&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2000-01-15&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2005-01-04&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">1057</span><span class="p">.</span><span class="mi">75</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">1057</span><span class="p">.</span><span class="mi">75</span> <span class="n">pend</span> <span class="k">union</span> <span class="k">all</span>
  <span class="k">select</span> <span class="s1">&#39;SAV&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2000-01-15&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2004-12-19&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">500</span><span class="p">.</span><span class="mi">00</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">500</span><span class="p">.</span><span class="mi">00</span> <span class="n">pend</span> <span class="k">union</span> <span class="k">all</span>
  <span class="k">select</span> <span class="s1">&#39;CD&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2004-06-30&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2004-06-30&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">3000</span><span class="p">.</span><span class="mi">00</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">3000</span><span class="p">.</span><span class="mi">00</span> <span class="n">pend</span><span class="p">)</span> <span class="n">a</span>
<span class="k">where</span> <span class="n">c</span><span class="p">.</span><span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;111-11-1111&#39;</span><span class="p">;</span>
</pre></div>
<p>
该SQL语句主体是insert select语句，然后显得复杂的部分就是那个select语句是有customer（别名c）和一个子查询语句生成的表格（别名e）和另外一个子查询语句生成的表格（别名a）的 <code>cross join</code> 而成的一个复杂的表格。
</p>

<p>
这里我们需要理解cross join这个概念，不知道读者之前接触过inner join，内连接的概念没有，如果接触过那么一定了解了SQL表格在join的时候不加任何过滤条件其生成的表格就是所谓的这两个SQL表格的笛卡尔积。所谓的笛卡尔积就是，假设一个表格有三行，a行b行c行，然后假设另外一个表格有两行，1行和2行，那么这两个表格的笛卡尔积就是生成一个大表格，具体是(a1行a2行b1行b2行c1行c2行)，一共3*2=6行。
</p>

<p>
而所谓的cross join交叉连接实际上就是多个表格之间进行笛卡尔积运算之后组合成为一个更大的表格。
</p>
</div>
</div>

<div class="outline-4">
<h4 id="orgheadline21">内连接</h4>
<div class="outline-text-4" id="text-3-2-4">
<p>
我们又看到上面的例子中第一个子查询语句里面还有 <code>inner join</code> 关键词，其是所谓的内连接。内连接可以看作是在交叉连接生成的表格的基础上进一步加上了某些过滤条件从而将某些行给删除掉了。
</p>

<p>
我们首先来看一下:
</p>
<pre>
select b.branch_id, e.emp_id, e.assigned_branch_id from branch b cross join employee e ;
</pre>

<p>
branch表格有4条记录，branch有18条记录，所以cross join之后将组合出72条记录。
</p>

<p>
然后我们再来看这个查询:
</p>
<pre>
select b.branch_id, e.emp_id from branch b inner join employee e on e.assigned_branch_id = b.branch_id;
</pre>

<p>
通常两个SQL表格cross join之后出来的大SQL表格里面有些数据组合是实际可能并不存在的，而上面inner join通过on关键词过滤将使得生成的大SQL表格更具有现实意义。比如这里每一个雇员只可能在某一个分公司，而cross join让每个雇员都有可能在四个分公司了，这里的inner join加上on主要就是控制雇员具体分配的那个分公司正是连接的那个分公司号。这样实现更有现实意义的连接。我们也可以这样理解，雇员的分公司属性id为1，那么在连接分公司表格的时候，只有确定了这个，才能保证分公司表格的其他属性也是属于该雇员的。
</p>

<p>
现在我们进行到这里了:
</p>
<pre>
mysql&gt; select b.branch_id, e.emp_id,b.city from branch b inner join employee e on e.assigned_branch_id = b.branch_id;
+-----------+--------+---------+
| branch_id | emp_id | city    |
+-----------+--------+---------+
|         1 |      1 | Waltham |
|         1 |      2 | Waltham |
|         1 |      3 | Waltham |
|         1 |      4 | Waltham |
|         1 |      5 | Waltham |
|         1 |      6 | Waltham |
|         1 |      7 | Waltham |
|         1 |      8 | Waltham |
|         1 |      9 | Waltham |
|         2 |     10 | Woburn  |
|         2 |     11 | Woburn  |
|         2 |     12 | Woburn  |
|         3 |     13 | Quincy  |
|         3 |     14 | Quincy  |
|         3 |     15 | Quincy  |
|         4 |     16 | Salem   |
|         4 |     17 | Salem   |
|         4 |     18 | Salem   |
+-----------+--------+---------+
18 rows in set (0.00 sec)
</pre>

<p>
然后通过  where b.city = 'Woburn' 这实际上就限定为具体某一个分公司了。
</p>

<pre>
mysql&gt; select b.branch_id, e.emp_id,b.city from branch b inner join employee e on e.assigned_branch_id = b.branch_id where b.city='Woburn';
+-----------+--------+--------+
| branch_id | emp_id | city   |
+-----------+--------+--------+
|         2 |     10 | Woburn |
|         2 |     11 | Woburn |
|         2 |     12 | Woburn |
+-----------+--------+--------+
3 rows in set (0.00 sec)
</pre>

<p>
然后后面跟了 <code>limit 1</code> 这样将只返回一条记录了。然后我们注意到最终cross join生成的大表格还加上了过滤条件 
</p>
<pre>
where c.fed_id = '111-11-1111';
</pre>
<p>
由于每一个顾客的fed_id都是唯一的，所以实际上custom表格真正交叉连接的也只有一条记录，这样这个三个表格cross join这个复杂的情况就等同于前面两个表格一条记录属性都加上，再cross 第三个表格，第三个表格有三条记录，这样最终的大表格有三条记录。
</p>
</div>
</div>

<div class="outline-4">
<h4 id="orgheadline22">union all</h4>
<div class="outline-text-4" id="text-3-2-5">
<p>
<code>union all</code> 将多个数据集进行合并。此外还有一种 <code>union</code> 的用法，其中 <code>union</code>  会删除重复项，而union all只是单纯的合并。如下所示:
</p>

<pre>
mysql&gt; select 'CHK' prod_cd, '2000-01-15' open_date, '2005-01-04' last_date,
    -&gt;     1057.75 avail, 1057.75 pend union all
    -&gt;   select 'SAV' prod_cd, '2000-01-15' open_date, '2004-12-19' last_date,
    -&gt;     500.00 avail, 500.00 pend union all
    -&gt;   select 'CD' prod_cd, '2004-06-30' open_date, '2004-06-30' last_date,
    -&gt;     3000.00 avail, 3000.00 pend;
+---------+------------+------------+---------+---------+
| prod_cd | open_date  | last_date  | avail   | pend    |
+---------+------------+------------+---------+---------+
| CHK     | 2000-01-15 | 2005-01-04 | 1057.75 | 1057.75 |
| SAV     | 2000-01-15 | 2004-12-19 |  500.00 |  500.00 |
| CD      | 2004-06-30 | 2004-06-30 | 3000.00 | 3000.00 |
+---------+------------+------------+---------+---------+
3 rows in set (0.01 sec)
</pre>


<p>
这样下面这些我们应该也大致能够看明白了:
</p>
<div class="highlight"><pre><span></span><span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">account</span> <span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">product_cd</span><span class="p">,</span> <span class="n">cust_id</span><span class="p">,</span> <span class="n">open_date</span><span class="p">,</span>
  <span class="n">last_activity_date</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">open_branch_id</span><span class="p">,</span>
  <span class="n">open_emp_id</span><span class="p">,</span> <span class="n">avail_balance</span><span class="p">,</span> <span class="n">pending_balance</span><span class="p">)</span>
<span class="k">select</span> <span class="mi">2</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">prod_cd</span><span class="p">,</span> <span class="n">c</span><span class="p">.</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">open_date</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">last_date</span><span class="p">,</span> <span class="s1">&#39;ACTIVE&#39;</span><span class="p">,</span>
  <span class="n">e</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">avail</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">pend</span>
<span class="k">from</span> <span class="n">customer</span> <span class="n">c</span> <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span>
  <span class="k">from</span> <span class="n">branch</span> <span class="n">b</span> <span class="k">inner</span> <span class="k">join</span> <span class="n">employee</span> <span class="n">e</span> <span class="k">on</span> <span class="n">e</span><span class="p">.</span><span class="n">assigned_branch_id</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span>
  <span class="k">where</span> <span class="n">b</span><span class="p">.</span><span class="n">city</span> <span class="o">=</span> <span class="s1">&#39;Woburn&#39;</span> <span class="k">limit</span> <span class="mi">1</span><span class="p">)</span> <span class="n">e</span>
  <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="s1">&#39;CHK&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2001-03-12&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2004-12-27&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">2258</span><span class="p">.</span><span class="mi">02</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">2258</span><span class="p">.</span><span class="mi">02</span> <span class="n">pend</span> <span class="k">union</span> <span class="k">all</span>
  <span class="k">select</span> <span class="s1">&#39;SAV&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2001-03-12&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2004-12-11&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">200</span><span class="p">.</span><span class="mi">00</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">200</span><span class="p">.</span><span class="mi">00</span> <span class="n">pend</span><span class="p">)</span> <span class="n">a</span>
<span class="k">where</span> <span class="n">c</span><span class="p">.</span><span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;222-22-2222&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">account</span> <span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">product_cd</span><span class="p">,</span> <span class="n">cust_id</span><span class="p">,</span> <span class="n">open_date</span><span class="p">,</span>
  <span class="n">last_activity_date</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">open_branch_id</span><span class="p">,</span>
  <span class="n">open_emp_id</span><span class="p">,</span> <span class="n">avail_balance</span><span class="p">,</span> <span class="n">pending_balance</span><span class="p">)</span>
<span class="k">select</span> <span class="mi">3</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">prod_cd</span><span class="p">,</span> <span class="n">c</span><span class="p">.</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">open_date</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">last_date</span><span class="p">,</span> <span class="s1">&#39;ACTIVE&#39;</span><span class="p">,</span>
  <span class="n">e</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">avail</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">pend</span>
<span class="k">from</span> <span class="n">customer</span> <span class="n">c</span> <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span>
  <span class="k">from</span> <span class="n">branch</span> <span class="n">b</span> <span class="k">inner</span> <span class="k">join</span> <span class="n">employee</span> <span class="n">e</span> <span class="k">on</span> <span class="n">e</span><span class="p">.</span><span class="n">assigned_branch_id</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span>
  <span class="k">where</span> <span class="n">b</span><span class="p">.</span><span class="n">city</span> <span class="o">=</span> <span class="s1">&#39;Quincy&#39;</span> <span class="k">limit</span> <span class="mi">1</span><span class="p">)</span> <span class="n">e</span>
  <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="s1">&#39;CHK&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2002-11-23&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2004-11-30&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">1057</span><span class="p">.</span><span class="mi">75</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">1057</span><span class="p">.</span><span class="mi">75</span> <span class="n">pend</span> <span class="k">union</span> <span class="k">all</span>
  <span class="k">select</span> <span class="s1">&#39;MM&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2002-12-15&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2004-12-05&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">2212</span><span class="p">.</span><span class="mi">50</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">2212</span><span class="p">.</span><span class="mi">50</span> <span class="n">pend</span><span class="p">)</span> <span class="n">a</span>
<span class="k">where</span> <span class="n">c</span><span class="p">.</span><span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;333-33-3333&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">account</span> <span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">product_cd</span><span class="p">,</span> <span class="n">cust_id</span><span class="p">,</span> <span class="n">open_date</span><span class="p">,</span>
  <span class="n">last_activity_date</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">open_branch_id</span><span class="p">,</span>
  <span class="n">open_emp_id</span><span class="p">,</span> <span class="n">avail_balance</span><span class="p">,</span> <span class="n">pending_balance</span><span class="p">)</span>
<span class="k">select</span> <span class="mi">4</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">prod_cd</span><span class="p">,</span> <span class="n">c</span><span class="p">.</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">open_date</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">last_date</span><span class="p">,</span> <span class="s1">&#39;ACTIVE&#39;</span><span class="p">,</span>
  <span class="n">e</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">avail</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">pend</span>
<span class="k">from</span> <span class="n">customer</span> <span class="n">c</span> <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span>
  <span class="k">from</span> <span class="n">branch</span> <span class="n">b</span> <span class="k">inner</span> <span class="k">join</span> <span class="n">employee</span> <span class="n">e</span> <span class="k">on</span> <span class="n">e</span><span class="p">.</span><span class="n">assigned_branch_id</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span>
  <span class="k">where</span> <span class="n">b</span><span class="p">.</span><span class="n">city</span> <span class="o">=</span> <span class="s1">&#39;Waltham&#39;</span> <span class="k">limit</span> <span class="mi">1</span><span class="p">)</span> <span class="n">e</span>
  <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="s1">&#39;CHK&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2003-09-12&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2005-01-03&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">534</span><span class="p">.</span><span class="mi">12</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">534</span><span class="p">.</span><span class="mi">12</span> <span class="n">pend</span> <span class="k">union</span> <span class="k">all</span>
  <span class="k">select</span> <span class="s1">&#39;SAV&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2000-01-15&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2004-10-24&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">767</span><span class="p">.</span><span class="mi">77</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">767</span><span class="p">.</span><span class="mi">77</span> <span class="n">pend</span> <span class="k">union</span> <span class="k">all</span>
  <span class="k">select</span> <span class="s1">&#39;MM&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2004-09-30&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2004-11-11&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">5487</span><span class="p">.</span><span class="mi">09</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">5487</span><span class="p">.</span><span class="mi">09</span> <span class="n">pend</span><span class="p">)</span> <span class="n">a</span>
<span class="k">where</span> <span class="n">c</span><span class="p">.</span><span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;444-44-4444&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">account</span> <span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">product_cd</span><span class="p">,</span> <span class="n">cust_id</span><span class="p">,</span> <span class="n">open_date</span><span class="p">,</span>
  <span class="n">last_activity_date</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">open_branch_id</span><span class="p">,</span>
  <span class="n">open_emp_id</span><span class="p">,</span> <span class="n">avail_balance</span><span class="p">,</span> <span class="n">pending_balance</span><span class="p">)</span>
<span class="k">select</span> <span class="mi">5</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">prod_cd</span><span class="p">,</span> <span class="n">c</span><span class="p">.</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">open_date</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">last_date</span><span class="p">,</span> <span class="s1">&#39;ACTIVE&#39;</span><span class="p">,</span>
  <span class="n">e</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">avail</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">pend</span>
<span class="k">from</span> <span class="n">customer</span> <span class="n">c</span> <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span>
  <span class="k">from</span> <span class="n">branch</span> <span class="n">b</span> <span class="k">inner</span> <span class="k">join</span> <span class="n">employee</span> <span class="n">e</span> <span class="k">on</span> <span class="n">e</span><span class="p">.</span><span class="n">assigned_branch_id</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span>
  <span class="k">where</span> <span class="n">b</span><span class="p">.</span><span class="n">city</span> <span class="o">=</span> <span class="s1">&#39;Salem&#39;</span> <span class="k">limit</span> <span class="mi">1</span><span class="p">)</span> <span class="n">e</span>
  <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="s1">&#39;CHK&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2004-01-27&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2005-01-05&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">2237</span><span class="p">.</span><span class="mi">97</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">2897</span><span class="p">.</span><span class="mi">97</span> <span class="n">pend</span><span class="p">)</span> <span class="n">a</span>
<span class="k">where</span> <span class="n">c</span><span class="p">.</span><span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;555-55-5555&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">account</span> <span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">product_cd</span><span class="p">,</span> <span class="n">cust_id</span><span class="p">,</span> <span class="n">open_date</span><span class="p">,</span>
  <span class="n">last_activity_date</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">open_branch_id</span><span class="p">,</span>
  <span class="n">open_emp_id</span><span class="p">,</span> <span class="n">avail_balance</span><span class="p">,</span> <span class="n">pending_balance</span><span class="p">)</span>
<span class="k">select</span> <span class="mi">6</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">prod_cd</span><span class="p">,</span> <span class="n">c</span><span class="p">.</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">open_date</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">last_date</span><span class="p">,</span> <span class="s1">&#39;ACTIVE&#39;</span><span class="p">,</span>
  <span class="n">e</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">avail</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">pend</span>
<span class="k">from</span> <span class="n">customer</span> <span class="n">c</span> <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span>
  <span class="k">from</span> <span class="n">branch</span> <span class="n">b</span> <span class="k">inner</span> <span class="k">join</span> <span class="n">employee</span> <span class="n">e</span> <span class="k">on</span> <span class="n">e</span><span class="p">.</span><span class="n">assigned_branch_id</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span>
  <span class="k">where</span> <span class="n">b</span><span class="p">.</span><span class="n">city</span> <span class="o">=</span> <span class="s1">&#39;Waltham&#39;</span> <span class="k">limit</span> <span class="mi">1</span><span class="p">)</span> <span class="n">e</span>
  <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="s1">&#39;CHK&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2002-08-24&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2004-11-29&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">122</span><span class="p">.</span><span class="mi">37</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">122</span><span class="p">.</span><span class="mi">37</span> <span class="n">pend</span> <span class="k">union</span> <span class="k">all</span>
  <span class="k">select</span> <span class="s1">&#39;CD&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2004-12-28&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2004-12-28&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">10000</span><span class="p">.</span><span class="mi">00</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">10000</span><span class="p">.</span><span class="mi">00</span> <span class="n">pend</span><span class="p">)</span> <span class="n">a</span>
<span class="k">where</span> <span class="n">c</span><span class="p">.</span><span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;666-66-6666&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">account</span> <span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">product_cd</span><span class="p">,</span> <span class="n">cust_id</span><span class="p">,</span> <span class="n">open_date</span><span class="p">,</span>
  <span class="n">last_activity_date</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">open_branch_id</span><span class="p">,</span>
  <span class="n">open_emp_id</span><span class="p">,</span> <span class="n">avail_balance</span><span class="p">,</span> <span class="n">pending_balance</span><span class="p">)</span>
<span class="k">select</span> <span class="mi">7</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">prod_cd</span><span class="p">,</span> <span class="n">c</span><span class="p">.</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">open_date</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">last_date</span><span class="p">,</span> <span class="s1">&#39;ACTIVE&#39;</span><span class="p">,</span>
  <span class="n">e</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">avail</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">pend</span>
<span class="k">from</span> <span class="n">customer</span> <span class="n">c</span> <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span>
  <span class="k">from</span> <span class="n">branch</span> <span class="n">b</span> <span class="k">inner</span> <span class="k">join</span> <span class="n">employee</span> <span class="n">e</span> <span class="k">on</span> <span class="n">e</span><span class="p">.</span><span class="n">assigned_branch_id</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span>
  <span class="k">where</span> <span class="n">b</span><span class="p">.</span><span class="n">city</span> <span class="o">=</span> <span class="s1">&#39;Woburn&#39;</span> <span class="k">limit</span> <span class="mi">1</span><span class="p">)</span> <span class="n">e</span>
  <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="s1">&#39;CD&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2004-01-12&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2004-01-12&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">5000</span><span class="p">.</span><span class="mi">00</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">5000</span><span class="p">.</span><span class="mi">00</span> <span class="n">pend</span><span class="p">)</span> <span class="n">a</span>
<span class="k">where</span> <span class="n">c</span><span class="p">.</span><span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;777-77-7777&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">account</span> <span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">product_cd</span><span class="p">,</span> <span class="n">cust_id</span><span class="p">,</span> <span class="n">open_date</span><span class="p">,</span>
  <span class="n">last_activity_date</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">open_branch_id</span><span class="p">,</span>
  <span class="n">open_emp_id</span><span class="p">,</span> <span class="n">avail_balance</span><span class="p">,</span> <span class="n">pending_balance</span><span class="p">)</span>
<span class="k">select</span> <span class="mi">8</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">prod_cd</span><span class="p">,</span> <span class="n">c</span><span class="p">.</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">open_date</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">last_date</span><span class="p">,</span> <span class="s1">&#39;ACTIVE&#39;</span><span class="p">,</span>
  <span class="n">e</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">avail</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">pend</span>
<span class="k">from</span> <span class="n">customer</span> <span class="n">c</span> <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span>
  <span class="k">from</span> <span class="n">branch</span> <span class="n">b</span> <span class="k">inner</span> <span class="k">join</span> <span class="n">employee</span> <span class="n">e</span> <span class="k">on</span> <span class="n">e</span><span class="p">.</span><span class="n">assigned_branch_id</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span>
  <span class="k">where</span> <span class="n">b</span><span class="p">.</span><span class="n">city</span> <span class="o">=</span> <span class="s1">&#39;Salem&#39;</span> <span class="k">limit</span> <span class="mi">1</span><span class="p">)</span> <span class="n">e</span>
  <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="s1">&#39;CHK&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2001-05-23&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2005-01-03&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">3487</span><span class="p">.</span><span class="mi">19</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">3487</span><span class="p">.</span><span class="mi">19</span> <span class="n">pend</span> <span class="k">union</span> <span class="k">all</span>
  <span class="k">select</span> <span class="s1">&#39;SAV&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2001-05-23&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2004-10-12&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">387</span><span class="p">.</span><span class="mi">99</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">387</span><span class="p">.</span><span class="mi">99</span> <span class="n">pend</span><span class="p">)</span> <span class="n">a</span>
<span class="k">where</span> <span class="n">c</span><span class="p">.</span><span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;888-88-8888&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">account</span> <span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">product_cd</span><span class="p">,</span> <span class="n">cust_id</span><span class="p">,</span> <span class="n">open_date</span><span class="p">,</span>
  <span class="n">last_activity_date</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">open_branch_id</span><span class="p">,</span>
  <span class="n">open_emp_id</span><span class="p">,</span> <span class="n">avail_balance</span><span class="p">,</span> <span class="n">pending_balance</span><span class="p">)</span>
<span class="k">select</span> <span class="mi">9</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">prod_cd</span><span class="p">,</span> <span class="n">c</span><span class="p">.</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">open_date</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">last_date</span><span class="p">,</span> <span class="s1">&#39;ACTIVE&#39;</span><span class="p">,</span>
  <span class="n">e</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">avail</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">pend</span>
<span class="k">from</span> <span class="n">customer</span> <span class="n">c</span> <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span>
  <span class="k">from</span> <span class="n">branch</span> <span class="n">b</span> <span class="k">inner</span> <span class="k">join</span> <span class="n">employee</span> <span class="n">e</span> <span class="k">on</span> <span class="n">e</span><span class="p">.</span><span class="n">assigned_branch_id</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span>
  <span class="k">where</span> <span class="n">b</span><span class="p">.</span><span class="n">city</span> <span class="o">=</span> <span class="s1">&#39;Waltham&#39;</span> <span class="k">limit</span> <span class="mi">1</span><span class="p">)</span> <span class="n">e</span>
  <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="s1">&#39;CHK&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2003-07-30&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2004-12-15&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">125</span><span class="p">.</span><span class="mi">67</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">125</span><span class="p">.</span><span class="mi">67</span> <span class="n">pend</span> <span class="k">union</span> <span class="k">all</span>
  <span class="k">select</span> <span class="s1">&#39;MM&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2004-10-28&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2004-10-28&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">9345</span><span class="p">.</span><span class="mi">55</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">9845</span><span class="p">.</span><span class="mi">55</span> <span class="n">pend</span> <span class="k">union</span> <span class="k">all</span>
  <span class="k">select</span> <span class="s1">&#39;CD&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2004-06-30&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2004-06-30&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">1500</span><span class="p">.</span><span class="mi">00</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">1500</span><span class="p">.</span><span class="mi">00</span> <span class="n">pend</span><span class="p">)</span> <span class="n">a</span>
<span class="k">where</span> <span class="n">c</span><span class="p">.</span><span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;999-99-9999&#39;</span><span class="p">;</span>


<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">account</span> <span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">product_cd</span><span class="p">,</span> <span class="n">cust_id</span><span class="p">,</span> <span class="n">open_date</span><span class="p">,</span>
  <span class="n">last_activity_date</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">open_branch_id</span><span class="p">,</span>
  <span class="n">open_emp_id</span><span class="p">,</span> <span class="n">avail_balance</span><span class="p">,</span> <span class="n">pending_balance</span><span class="p">)</span>
<span class="k">select</span> <span class="mi">10</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">prod_cd</span><span class="p">,</span> <span class="n">c</span><span class="p">.</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">open_date</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">last_date</span><span class="p">,</span> <span class="s1">&#39;ACTIVE&#39;</span><span class="p">,</span>
  <span class="n">e</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">avail</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">pend</span>
<span class="k">from</span> <span class="n">customer</span> <span class="n">c</span> <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span>
  <span class="k">from</span> <span class="n">branch</span> <span class="n">b</span> <span class="k">inner</span> <span class="k">join</span> <span class="n">employee</span> <span class="n">e</span> <span class="k">on</span> <span class="n">e</span><span class="p">.</span><span class="n">assigned_branch_id</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span>
  <span class="k">where</span> <span class="n">b</span><span class="p">.</span><span class="n">city</span> <span class="o">=</span> <span class="s1">&#39;Salem&#39;</span> <span class="k">limit</span> <span class="mi">1</span><span class="p">)</span> <span class="n">e</span>
  <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="s1">&#39;CHK&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2002-09-30&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2004-12-15&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">23575</span><span class="p">.</span><span class="mi">12</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">23575</span><span class="p">.</span><span class="mi">12</span> <span class="n">pend</span> <span class="k">union</span> <span class="k">all</span>
  <span class="k">select</span> <span class="s1">&#39;BUS&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2002-10-01&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2004-08-28&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">0</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">0</span> <span class="n">pend</span><span class="p">)</span> <span class="n">a</span>
<span class="k">where</span> <span class="n">c</span><span class="p">.</span><span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;04-1111111&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">account</span> <span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">product_cd</span><span class="p">,</span> <span class="n">cust_id</span><span class="p">,</span> <span class="n">open_date</span><span class="p">,</span>
  <span class="n">last_activity_date</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">open_branch_id</span><span class="p">,</span>
  <span class="n">open_emp_id</span><span class="p">,</span> <span class="n">avail_balance</span><span class="p">,</span> <span class="n">pending_balance</span><span class="p">)</span>
<span class="k">select</span> <span class="mi">11</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">prod_cd</span><span class="p">,</span> <span class="n">c</span><span class="p">.</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">open_date</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">last_date</span><span class="p">,</span> <span class="s1">&#39;ACTIVE&#39;</span><span class="p">,</span>
  <span class="n">e</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">avail</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">pend</span>
<span class="k">from</span> <span class="n">customer</span> <span class="n">c</span> <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span>
  <span class="k">from</span> <span class="n">branch</span> <span class="n">b</span> <span class="k">inner</span> <span class="k">join</span> <span class="n">employee</span> <span class="n">e</span> <span class="k">on</span> <span class="n">e</span><span class="p">.</span><span class="n">assigned_branch_id</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span>
  <span class="k">where</span> <span class="n">b</span><span class="p">.</span><span class="n">city</span> <span class="o">=</span> <span class="s1">&#39;Woburn&#39;</span> <span class="k">limit</span> <span class="mi">1</span><span class="p">)</span> <span class="n">e</span>
  <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="s1">&#39;BUS&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2004-03-22&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2004-11-14&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">9345</span><span class="p">.</span><span class="mi">55</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">9345</span><span class="p">.</span><span class="mi">55</span> <span class="n">pend</span><span class="p">)</span> <span class="n">a</span>
<span class="k">where</span> <span class="n">c</span><span class="p">.</span><span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;04-2222222&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">account</span> <span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">product_cd</span><span class="p">,</span> <span class="n">cust_id</span><span class="p">,</span> <span class="n">open_date</span><span class="p">,</span>
  <span class="n">last_activity_date</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">open_branch_id</span><span class="p">,</span>
  <span class="n">open_emp_id</span><span class="p">,</span> <span class="n">avail_balance</span><span class="p">,</span> <span class="n">pending_balance</span><span class="p">)</span>
<span class="k">select</span> <span class="mi">12</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">prod_cd</span><span class="p">,</span> <span class="n">c</span><span class="p">.</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">open_date</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">last_date</span><span class="p">,</span> <span class="s1">&#39;ACTIVE&#39;</span><span class="p">,</span>
  <span class="n">e</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">avail</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">pend</span>
<span class="k">from</span> <span class="n">customer</span> <span class="n">c</span> <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span>
  <span class="k">from</span> <span class="n">branch</span> <span class="n">b</span> <span class="k">inner</span> <span class="k">join</span> <span class="n">employee</span> <span class="n">e</span> <span class="k">on</span> <span class="n">e</span><span class="p">.</span><span class="n">assigned_branch_id</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span>
  <span class="k">where</span> <span class="n">b</span><span class="p">.</span><span class="n">city</span> <span class="o">=</span> <span class="s1">&#39;Salem&#39;</span> <span class="k">limit</span> <span class="mi">1</span><span class="p">)</span> <span class="n">e</span>
  <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="s1">&#39;CHK&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2003-07-30&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2004-12-15&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">38552</span><span class="p">.</span><span class="mi">05</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">38552</span><span class="p">.</span><span class="mi">05</span> <span class="n">pend</span><span class="p">)</span> <span class="n">a</span>
<span class="k">where</span> <span class="n">c</span><span class="p">.</span><span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;04-3333333&#39;</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">ignore</span> <span class="k">into</span> <span class="nf">account</span> <span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">product_cd</span><span class="p">,</span> <span class="n">cust_id</span><span class="p">,</span> <span class="n">open_date</span><span class="p">,</span>
  <span class="n">last_activity_date</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">open_branch_id</span><span class="p">,</span>
  <span class="n">open_emp_id</span><span class="p">,</span> <span class="n">avail_balance</span><span class="p">,</span> <span class="n">pending_balance</span><span class="p">)</span>
<span class="k">select</span> <span class="mi">13</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">prod_cd</span><span class="p">,</span> <span class="n">c</span><span class="p">.</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">open_date</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">last_date</span><span class="p">,</span> <span class="s1">&#39;ACTIVE&#39;</span><span class="p">,</span>
  <span class="n">e</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">avail</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">pend</span>
<span class="k">from</span> <span class="n">customer</span> <span class="n">c</span> <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">emp_id</span>
  <span class="k">from</span> <span class="n">branch</span> <span class="n">b</span> <span class="k">inner</span> <span class="k">join</span> <span class="n">employee</span> <span class="n">e</span> <span class="k">on</span> <span class="n">e</span><span class="p">.</span><span class="n">assigned_branch_id</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">branch_id</span>
  <span class="k">where</span> <span class="n">b</span><span class="p">.</span><span class="n">city</span> <span class="o">=</span> <span class="s1">&#39;Quincy&#39;</span> <span class="k">limit</span> <span class="mi">1</span><span class="p">)</span> <span class="n">e</span>
  <span class="k">cross</span> <span class="k">join</span>
 <span class="p">(</span><span class="k">select</span> <span class="s1">&#39;SBL&#39;</span> <span class="n">prod_cd</span><span class="p">,</span> <span class="s1">&#39;2004-02-22&#39;</span> <span class="n">open_date</span><span class="p">,</span> <span class="s1">&#39;2004-12-17&#39;</span> <span class="n">last_date</span><span class="p">,</span>
    <span class="mi">50000</span><span class="p">.</span><span class="mi">00</span> <span class="n">avail</span><span class="p">,</span> <span class="mi">50000</span><span class="p">.</span><span class="mi">00</span> <span class="n">pend</span><span class="p">)</span> <span class="n">a</span>
<span class="k">where</span> <span class="n">c</span><span class="p">.</span><span class="n">fed_id</span> <span class="o">=</span> <span class="s1">&#39;04-4444444&#39;</span><span class="p">;</span>
</pre></div>
</div>
</div>


<div class="outline-4">
<h4 id="orgheadline23">不能重复刷的部分</h4>
<div class="outline-text-4" id="text-3-2-6">
<p>
这种insert select语句有多行记录要刷进去，目前还找不到防止重复刷的办法，只好单独放在这里了。
</p>
<div class="highlight"><pre><span></span><span class="k">insert</span> <span class="k">into</span> <span class="nf">transaction</span> <span class="p">(</span><span class="n">txn_id</span><span class="p">,</span> <span class="n">txn_date</span><span class="p">,</span> <span class="n">account_id</span><span class="p">,</span> <span class="n">txn_type_cd</span><span class="p">,</span>
  <span class="n">amount</span><span class="p">,</span> <span class="n">funds_avail_date</span><span class="p">)</span>
<span class="k">select</span> <span class="no">null</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">open_date</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">account_id</span><span class="p">,</span> <span class="s1">&#39;CDT&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">open_date</span>
<span class="k">from</span> <span class="n">account</span> <span class="n">a</span>
<span class="k">where</span> <span class="n">a</span><span class="p">.</span><span class="n">product_cd</span> <span class="k">IN</span> <span class="p">(</span><span class="s1">&#39;CHK&#39;</span><span class="p">,</span><span class="s1">&#39;SAV&#39;</span><span class="p">,</span><span class="s1">&#39;CD&#39;</span><span class="p">,</span><span class="s1">&#39;MM&#39;</span><span class="p">);</span>
</pre></div>




<hr >
</div>
</div>
</div>
</div>


<div class="outline-2">
<h2 id="orgheadline26">别名</h2>
<div class="outline-text-2" id="text-4">
<p>
前面说了select字句是不仅可以运算列，还可以重新构建一个列，这些列mysql会自动为其创建默认名字，你也可以明确指定该名字，用如下 <strong>as</strong> 关键词，如下所示:
</p>

<pre>
select emp_id, 'ACTIVE' as status, emp_id * 3.1415926 as empid_x_pi, upper(lname) as last_name_upper from employee;
</pre>

<p>
<strong>as</strong> 关键词可以省略，表达仍然有效，但还是推荐加上 <strong>as</strong> 关键词，这样SQL语句可读性更高。
</p>
</div>
</div>

<div class="outline-2">
<h2 id="orgheadline27">去除重复的行</h2>
<div class="outline-text-2" id="text-5">
<p>
如下所示加入 <strong>distinct</strong> 关键词来让select字句过滤掉重复的行。
</p>
<pre>
select distinct cust_id from account;
</pre>
</div>
</div>





<div class="outline-2">
<h2 id="orgheadline30">附录</h2>
<div class="outline-text-2" id="text-6">
</div><div class="outline-3">
<h3 id="orgheadline28">演示例子的补充信息</h3>
<div class="outline-text-3" id="text-6-1">
<p>
该演示数据，按照《SQL学习指南》一书所说，是为了某一银行建立的数据模型，不过我们看到，其中涉及的顾客，部门，产品等概念在很多领域都是适用的。
</p>

<p>
下面列出关于这些表格的含义说明:
</p>
<dl class="org-dl">
<dt>account</dt><dd>为特定顾客开放的特定产品</dd>
<dt>branch</dt><dd>开展银行交易业务的场所，就可理解为某分公司分银行。</dd>
<dt>business</dt><dd>公司顾客</dd>
<dt>customer</dt><dd>与银行有业务往来的个人或公司</dd>
<dt>department</dt><dd>就可理解为银行内某部门</dd>
<dt>employee</dt><dd>银行工作人员</dd>
<dt>individual</dt><dd>个人顾客，我们看到和business对应。</dd>
<dt>officer</dt><dd>允许为公司顾客发起交易的人</dd>
<dt>product</dt><dd>向顾客提供的银行服务</dd>
<dt>product_type</dt><dd>服务类型</dd>
<dt>transaction</dt><dd>改变账户余额的操作</dd>
</dl>
</div>
</div>

<div class="outline-3">
<h3 id="orgheadline29">参考资料</h3>
<div class="outline-text-3" id="text-6-2">
<ol class="org-ol">
<li>本网页主要参考了《SQL学习指南》一书，第二版，Alan Beaulieu著，张伟超，林青松译。</li>
</ol>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara">参考了<a href="http://www.w3schools.com/sql/sql_insert_into_select.asp">这个网页</a>。</div></div>


</div>
</div></div>
</body>
</html>
